------------------------------------------------------------
revno: 3724
committer: Mattias Jonsson <mattias.jonsson@oracle.com>
branch nick: 5.6.5-m8
timestamp: Thu 2012-03-29 10:11:03 +0200
message:
  Revert of WL#4305 due to bug#13838761.
  Manual revert of:
  revid:mattias.jonsson@oracle.com-20120227103042-bs14kskt8zy6j3yj
------------------------------------------------------------
revno: 3723
committer: Sunny Bains <Sunny.Bains@Oracle.Com>
branch nick: 5.6-m8-release
timestamp: Wed 2012-03-28 08:45:30 +1100
message:
  Bug#13792503 - INNODB.INNODB_BUG60049 TEST FAILS ON TRUNK SPORADICALLY
  
  Force the purge coordinator to make one more pass at purging when
  the server state changes to shutdown.
  
  Add a truncate parameter to trx_purge() so that the purge coordinator
  thread (the caller) can decide when to truncate.
  
  rb://966 Approved by Jimmy Yang.  Ported from mysql-trunk:
  revision-id: sunny.bains@oracle.com-20120307050609-edb7al2wjs7tvesc
------------------------------------------------------------
revno: 3722
committer: Tor Didriksen <tor.didriksen@oracle.com>
branch nick: mysql-5.6.5-m8-release
timestamp: Tue 2012-03-27 12:53:19 +0200
message:
  Bug#13887284 MYSQL CLIENT COPYRIGHT NOTICE MUST SHOW 2012 INSTEAD OF 2011
------------------------------------------------------------
revno: 3721
committer: Joerg Bruehe <joerg.bruehe@oracle.com>
branch nick: clone-trunk
timestamp: Wed 2012-03-21 15:23:22 +0100
message:
  Update copyright year for Windows installer: This is 2012.
  Bug #13860319  	COPYRIGHT NOTICE MUST SHOW 2012 INSTEAD OF 2011
------------------------------------------------------------
revno: 3720
committer: Jon Olav Hauglid <jon.hauglid@oracle.com>
branch nick: mysql-5.6.5-m8-release
timestamp: Fri 2012-03-16 08:07:28 +0100
message:
  Bug#13833438 ERROR CODES MUST HAVE SAME VALUE ACROSS MYSQL VERSIONS
  
  Follow-up patch.
  
  Fix test failures when the following tests are run in MTS mode:
  - rpl.rpl_stm_EE_err2
  - rpl.rpl_loaddata
  - rpl.rpl_stm_loaddata_concurrent
------------------------------------------------------------
revno: 3719
committer: Inaam Rana <inaam.rana@oracle.com>
branch nick: 5.6.5-m8
timestamp: Thu 2012-03-15 10:04:03 -0400
message:
  Bug#13789853 SHOW ENGINE INNODB STATUS HANGS DUE TO EXCESSIVE WORK
  IN LOCK_VALIDATE()
  
  rb://971
  approved by: Marko Makela
  
  In lock_validate() the limit is used to release the lock_sys::mutex during
  the validation, to obey the latching order.
  If we do the limit++ then we are rechecking the same lock most times on
  each iteration because limit is being incremented by one and
  <space, page_no> will nearly always be > limit. If we set the limit
  correctly to (space, page+1) then we are actually making progress
  during the iteration.
------------------------------------------------------------
revno: 3718
committer: Jon Olav Hauglid <jon.hauglid@oracle.com>
branch nick: mysql-5.6.5-m8-release
timestamp: Thu 2012-03-15 10:21:40 +0100
message:
  Bug#13833438 ERROR CODES MUST HAVE SAME VALUE ACROSS MYSQL VERSIONS
  
  All MySQL error numbers should be stable between major versions
  as this allows client applications to handle errors based on
  error number without rebuilding/rewriting between MySQL versions.
  
  MySQL error numbers are determined by the order MySQL errors
  are listed in errmsg-utf8.txt.
  
  This patch reorders the MySQL errors so that new errors
  introduced in 5.6 are listed last and that MySQL errors
  also present in 5.5 are listed in the same order so that they
  keep their error number.
------------------------------------------------------------
revno: 3717
committer: Frazer Clement <frazer.clement@oracle.com>
branch nick: mysql-5.6.5-m8-binlog-event-ids
timestamp: Tue 2012-03-13 10:40:23 +0000
message:
  WL#5917 : Fix missing description event initialisation
------------------------------------------------------------
revno: 3716
committer: Frazer Clement <frazer.clement@oracle.com>
branch nick: mysql-5.6.5-m8-binlog-event-ids
timestamp: Mon 2012-03-12 17:43:28 +0000
message:
  WL#5917 
  
  Reserving Binlog log event numbers for future push
------------------------------------------------------------
revno: 3715
committer: Marc Alff <marc.alff@oracle.com>
branch nick: mysql-5.6.5-m8-release
timestamp: Mon 2012-03-12 17:13:37 +0100
message:
  Port merge cleanup for WL#5259 performance schema host cache.
  
  Renamed columns / system variables for consistency with existing names.
  - COUNT_MAX_USER_CONNECTION_ERRORS --> COUNT_MAX_USER_CONNECTIONS_ERRORS
  - COUNT_MAX_USER_CONNECTION_PER_HOUR_ERRORS --> COUNT_MAX_USER_CONNECTIONS_PER_HOUR_ERRORS
  - Connection_errors_max_connection --> Connection_errors_max_connections
------------------------------------------------------------
revno: 3714
committer: Alfranio Correia <alfranio.correia@oracle.com>
branch nick: mysql-5.6.5-m8-release
timestamp: Mon 2012-03-12 12:09:40 +0000
message:
  BUG#13820370 - RPL_GTID_MODE FAILS IN PB
    
  The test case rpl_gtid_mode.test is doing the following steps to
  check whether the server fails while starting up as supposed to be
  or not:
    
    . starting slave with gtid-mode=ON; 
    . issuing "CHANGE MASTER TO AUTO_POSITION=1"; 
    . shutting down slave; 
    . trying to restart slave with gtid-mode=OFF. 
    
  However, when the slave fails in the startup routine, it tries to
  print out an error message with ER(X) which uses "current_thread". 
  This variable is not defined though as there is no thread causing
  a segmentation fault.
    
  To fix the problem, we replace ER(X) by my_error().
------------------------------------------------------------
revno: 3713
committer: Marc Alff <marc.alff@oracle.com>
branch nick: mysql-5.6.5-m8-release
timestamp: Mon 2012-03-12 12:21:16 +0100
message:
  Manual merge to mysql-5.6.5-m8-release
  
  Ported manually the following fixes to the 5.6.5-m8 release branch:
  
  - WL#5767 post merge cleanup (build break, test suite when building without perfschema)
  
  - Bug#13819132 BROKEN SYNTAX ACCEPTED FOR START TRANSACTION
    and related warning cleanup in sql/sql_yacc.yy
------------------------------------------------------------
revno: 3712
committer: Joerg Bruehe <joerg.bruehe@oracle.com>
branch nick: clone-trunk
timestamp: Mon 2012-03-05 16:22:58 +0100
message:
  This is 2012 - update the copyright year.
------------------------------------------------------------
revno: 3711
tags: clone-5.6.5-m8-build
committer: Gleb Shchepa <gleb.shchepa@oracle.com>
branch nick: trunk
timestamp: Mon 2012-03-05 09:14:45 +0400
message:
  WL#5855: Print EXPLAIN in JSON format
  
  Minor update for the test result
------------------------------------------------------------
revno: 3710
committer: Jorgen Loland <jorgen.loland@oracle.com>
branch nick: mysql-trunk
timestamp: Fri 2012-03-02 10:11:19 +0100
message:
  BUG#11764155 postpush fix: record result files in engines/iuds/
------------------------------------------------------------
revno: 3709
committer: Dmitry Lenev <Dmitry.Lenev@oracle.com>
branch nick: mysql-trunk-wl5968
timestamp: Fri 2012-03-02 11:57:54 +0400
message:
  Changed name of the tree back to "mysql-trunk" before pushing
  into the main tree.
------------------------------------------------------------
revno: 3708 [merge]
committer: Dmitry Lenev <Dmitry.Lenev@oracle.com>
branch nick: mysql-trunk-wl5968
timestamp: Fri 2012-03-02 11:08:30 +0400
message:
  Merged recent changes from mysql-trunk into
  mysql-trunk-wl5968 tree.
    ------------------------------------------------------------
    revno: 3704.1.11
    committer: Sunny Bains <Sunny.Bains@Oracle.Com>
    branch nick: trunk
    timestamp: Fri 2012-03-02 10:22:33 +1100
    message:
      Fix a test that failed randomly. Introduce a SYNC point to ensure that the
      locking selects actually are in state waiting before we check their status
      in the default thread.
------------------------------------------------------------
revno: 3707 [merge]
committer: Jon Olav Hauglid <jon.hauglid@oracle.com>
branch nick: mysql-trunk-wl5968-new
timestamp: Thu 2012-03-01 16:40:00 +0100
message:
  Merge from mysql-trunk to mysql-trunk-wl5968
  No conflicts
    ------------------------------------------------------------
    revno: 3704.1.10
    committer: Jorgen Loland <jorgen.loland@oracle.com>
    branch nick: mysql-trunk-12640437
    timestamp: Thu 2012-03-01 13:58:27 +0100
    message:
      BUG#12640437 - USING SQL_BUFFER_RESULT RESULTS IN A DIFFERENT 
                     QUERY OUTPUT
      
      For all but simple grouped queries, temporary tables are used to
      resolve grouping. In these cases, the list of grouping fields is
      stored in the temporary table and grouping is resolved
      there (e.g. by adding a unique constraint on the involved
      fields). Because of this, grouping is already done when the rows
      are read from the temporary table.
      
      In the case where a group clause may be optimized away, grouping
      does not have to be resolved using a temporary table. However, if
      a temporary table is explicitly requested (e.g. because the
      SQL_BUFFER_RESULT hint is used, or the statement is
      INSERT...SELECT), a temporary table is used anyway. In this case,
      the temporary table is created with an empty group list (because
      the group clause was optimized away) and it will therefore not
      create groups. Since the temporary table does not take care of
      grouping, JOIN::group shall not be set to false in 
      make_simple_join(). This was fixed in bug 12578908. 
      
      However, there is an exception where make_simple_join() should
      set JOIN::group to false even if the query uses a temporary table
      that was explicitly requested but is not strictly needed. That
      exception is if the loose index scan access method (explain
      says "Using index for group-by") is used to read into the 
      temporary table. With loose index scan, grouping is resolved 
      by the access method. This is exactly what happens in this bug.
    ------------------------------------------------------------
    revno: 3704.1.9 [merge]
    committer: brajmohan saxena <brajmohan.saxena@oracle.com>
    branch nick: b13738013-trunk
    timestamp: Thu 2012-03-01 18:06:53 +0530
    message:
         auto-merge
        ------------------------------------------------------------
        revno: 3704.2.1
        committer: Jorgen Loland <jorgen.loland@oracle.com>
        branch nick: mysql-trunk-greedysearchblog
        timestamp: Thu 2012-03-01 13:25:52 +0100
        message:
          WL#6158 followup 
          
          * Rename variable Opt_partial_plans to Last_query_partial_plans.
          * Reset the variable for each query so that it works similar
            to Last_query_cost
          * It does not make sense to have a global version of this 
            variable.
    ------------------------------------------------------------
    revno: 3704.1.8
    committer: brajmohan saxena <brajmohan.saxena@oracle.com>
    branch nick: b13738013-trunk
    timestamp: Thu 2012-03-01 18:02:57 +0530
    message:
           BUG#13738013 - REMOVE ALL TRACES OF THE READLINE LIBRARY FROM MYSQL
                  
          Discription - Remove the integration with the readline library from the build scripts
    ------------------------------------------------------------
    revno: 3704.1.7
    committer: Tor Didriksen <tor.didriksen@oracle.com>
    branch nick: trunk
    timestamp: Thu 2012-03-01 12:38:57 +0100
    message:
      Bug#13783777 CONSTANT PROPAGATION IS WRONG FOR DISJUNCTIVE PREDICATES IN VIEWS
      
      This predicate: pk > 8 OR ((pk BETWEEN 9 AND 13) AND pk = 90)
      was optimized into : (90 > 8)
      
      The reason is sharing of the underlying Item_field.
      Solution: disable equality propagation for views.
    ------------------------------------------------------------
    revno: 3704.1.6
    committer: Marc Alff <marc.alff@oracle.com>
    branch nick: mysql-trunk-merge
    timestamp: Thu 2012-03-01 11:44:16 +0100
    message:
      Fixed robustness of tests hostcache_ipv4_max_con, hostcache_ipv6_max_con
    ------------------------------------------------------------
    revno: 3704.1.5
    committer: Jorgen Loland <jorgen.loland@oracle.com>
    branch nick: mysql-trunk-11764155
    timestamp: Thu 2012-03-01 09:09:04 +0100
    message:
      BUG#11764155 - INCONSISTENT 'OUT OF RANGE' WARNING MESSAGE ON 
                     SELECT
      
      When the optimizer decides to use ref access on a table, the
      conditions that are guaranteed to be satisfied by the ref 
      access itself does not need to be checked in the server.
      
      Removal of such "guaranteed by ref access" conditions is done
      by make_cond_for_table_from_pred(). One way a predicate can be
      guaranteed to be satisfied is if the consition is on the
      form "field = constant" and the field is covered by the index.
      In addition, it is required that the constant can be converted 
      to the field's type without error when test_if_ref() saves the 
      const value in the field.
      
      Consider the following query where the constant is higher than
      the maximum int value:
      
      SELECT * FROM t1 WHERE int_col = 999999999999
      
      The problem in this bug was that the value was stored using
      thd->count_cuted_fields == CHECK_FIELD_WARN. Because of this,
      store_val_in_field() would emit a warning when the too-high
      integer in the above query was stored. There is no use for this
      warning. In fact, when the range optimizer does a similar thing
      when building the ranges, get_mm_leaf() calls
      Item::save_in_field_no_warnings() instead to turn off warnings. 
      
      The fix is a simplification: the function store_val_in_field() 
      is removed and replaced with Item::save_in_field_no_warnings().
      store_val_in_field() was used only to store constants in key
      fields and was almost identical to
      Item::save_in_field_no_warnings(). The difference between these
      functions was that 
        a) the latter did not give warnings (which is desirable), and
        b) the latter accepts storing a 0000-00-00 date even when 
           the SQL mode does not permit it. This is OK and even 
           desirable because store_val_in_field() was only called for
           queries. Before this change, a query of the form 
      
              "SELECT * FROM t1 WHERE date_col = '0000-00-00'" 
      
           that was ref-accessed through an index covering date_col, 
           would not only evaluate the condition by ref-accessing in
           the index but also in the server because 
           store_val_in_field() reported "hey! NULL dates are not 
           allowed".
    ------------------------------------------------------------
    revno: 3704.1.4
    committer: Jimmy Yang <jimmy.yang@oracle.com>
    branch nick: mysql-trunk
    timestamp: Thu 2012-03-01 15:50:14 +0800
    message:
      Fix Bug #13732540 - FAILING ASSERTION: POS == NODE->FIRST_DOC_ID IF
      FTS_DOC_ID_INDEX IS MISSING
            
      rb://957 approved by Sunny Bains
    ------------------------------------------------------------
    revno: 3704.1.3
    committer: Gleb Shchepa <gleb.shchepa@oracle.com>
    branch nick: trunk
    timestamp: Thu 2012-03-01 09:41:57 +0400
    message:
      WL#5855: Print EXPLAIN in JSON format
      
      After-push bugfix: minor valgrind issue
    ------------------------------------------------------------
    revno: 3704.1.2 [merge]
    committer: Mattias Jonsson <mattias.jonsson@oracle.com>
    branch nick: topush-trunk
    timestamp: Wed 2012-02-29 22:02:42 +0100
    message:
      merge from mysql-5.5 to mysql-trunk
        ------------------------------------------------------------
        revno: 2875.348.3 [merge]
        committer: Mattias Jonsson <mattias.jonsson@oracle.com>
        branch nick: topush-5.5
        timestamp: Wed 2012-02-29 21:18:50 +0100
        message:
          merge from mysql-5.1
            ------------------------------------------------------------
            revno: 2661.830.10 [merge]
            committer: Mattias Jonsson <mattias.jonsson@oracle.com>
            branch nick: topush-5.1
            timestamp: Wed 2012-02-29 20:51:38 +0100
            message:
              merge into mysql-5.1
                ------------------------------------------------------------
                revno: 2661.832.1
                committer: Mattias Jonsson <mattias.jonsson@oracle.com>
                branch nick: b11761296-5.1_no_qc
                timestamp: Mon 2012-02-20 22:59:11 +0100
                message:
                  Bug#11761296: 53775: QUERY ON PARTITIONED TABLE RETURNS CACHED
                                                          RESULT FROM PREVIOUS TRANSACTION
                  
                  The current Query Cache API is not fully compatible with
                  the partitioning engine.
                  
                  There is no good way to implement support for QC due to:
                  1) a static callback for ha_partition would need to have access
                  to all partition names and call the underlying callback for each
                  [sub]partition with the correct name.
                  2) pruning would be impossible, even if one used the ulonglong
                  engine_data due to if engine_data is changed, the table is
                  invalidated by the QC.
                  
                  So the only viable solution to avoid incorrect data is to not allow
                  caching of queries using partitioned tables.
                  
                  (There are some extra changes, due to removal of \r as line break)
            ------------------------------------------------------------
            revno: 2661.830.9 [merge]
            committer: Praveenkumar Hulakund <praveenkumar.hulakund@oracle.com>
            branch nick: mysql-5.1-new
            timestamp: Wed 2012-02-29 14:52:08 +0530
            message:
              Bug#12601974 - STORED PROCEDURE SQL_MODE=NO_BACKSLASH_ESCAPES IGNORED AND BREAKS REPLICATION
              
              Analysis:
              ========================
              sql_mode "NO_BACKSLASH_ESCAPES": When user want to use backslash as character input,
              instead of escape character in a string literal then sql_mode can be set to 
              "NO_BACKSLASH_ESCAPES". With this mode enabled, backslash becomes an ordinary 
              character like any other. 
              
              SQL_MODE set applies to the current client session. And while creating the stored 
              procedure, MySQL stores the current sql_mode and always executes the stored 
              procedure in sql_mode stored with the Procedure, regardless of the server SQL 
              mode in effect when the routine is invoked.  
              
              In the scenario (for which bug is reported), the routine is created with 
              sql_mode=NO_BACKSLASH_ESCAPES. And routine is executed with the invoker sql_mode
              is "" (NOT SET) by executing statement "call testp('Axel\'s')".
              Since invoker sql_mode is "" (NOT_SET), the '\' in 'Axel\'s'(argument to function)
              is considered as escape character and column "a" (of table "t1") values are 
              updated with "Axel's". The binary log generated for above update operation is as below,
              
                set sql_mode=XXXXXX (for no_backslash_escapes)
                update test.t1 set a= NAME_CONST('var',_latin1'Axel\'s' COLLATE 'latin1_swedish_ci');
              
              While logging stored procedure statements, the local variables (params) used in
              statements are replaced with the NAME_CONST(var_name, var_value) (Internal function) 
              (http://dev.mysql.com/doc/refman/5.6/en/miscellaneous-functions.html#function_name-const)
              
              On slave, these logs are applied. NAME_CONST is parsed to get the variable and its
              value. Since, stored procedure is created with sql_mode="NO_BACKSLASH_ESCAPES", the sql_mode
              is also logged in. So that at slave this sql_mode is set before executing the statements
              of routine.  So at slave, sql_mode is set to "NO_BACKSLASH_ESCAPES" and then while
              parsing NAME_CONST of string variable, '\' is considered as NON ESCAPE character
              and parsing reported error for "'" (as we have only one "'" no backslash). 
              
              At slave, parsing was proper with sql_mode "NO_BACKSLASH_ESCAPES".
              But above error reported while writing bin log, "'" (of Axel's) is escaped with
              "\" character. Actually, all special characters (n, r, ', ", \, 0...) are escaped
              while writing NAME_CONST for string variable(param, local variable) in bin log 
              irrespective of "NO_BACKSLASH_ESCAPES" sql_mode. So, basically, the problem is 
              that logging string parameter does not take into account sql_mode value.
              
              Fix:
              ========================
              So when sql_mode is set to "NO_BACKSLASH_ESCAPES", escaping  characters as 
              (n, r, ', ", \, 0...) should be avoided. To do so, added a check to not to
              escape such characters while writing NAME_CONST for string variables in bin 
              log. 
              And when sql_mode is set to NO_BACKSLASH_ESCAPES, quote character "'" is
              represented as ''.
              http://dev.mysql.com/doc/refman/5.6/en/string-literals.html (There are several 
              ways to include quote characters within a string: )
    ------------------------------------------------------------
    revno: 3704.1.1 [merge]
    committer: Marc Alff <marc.alff@oracle.com>
    branch nick: mysql-trunk-merge
    timestamp: Wed 2012-02-29 18:00:19 +0100
    message:
      WL#5767 PERFORMANCE SCHEMA STATEMENT DIGESTS
      
      Merge of mysql-trunk-wl5767 to mysql-trunk
        ------------------------------------------------------------
        revno: 2876.477.92 [merge]
        committer: Marc Alff <marc.alff@oracle.com>
        branch nick: mysql-trunk-wl5767
        timestamp: Wed 2012-02-29 17:40:40 +0100
        message:
          Merge mysql-trunk --> mysql-trunk-wl5767
        ------------------------------------------------------------
        revno: 2876.477.91 [merge]
        committer: Marc Alff <marc.alff@oracle.com>
        branch nick: mysql-trunk-wl5767
        timestamp: Wed 2012-02-29 15:44:48 +0100
        message:
          Merge mysql-trunk --> mysql-trunk-wl5767
        ------------------------------------------------------------
        revno: 2876.477.90
        committer: Marc Alff <marc.alff@oracle.com>
        branch nick: mysql-trunk-wl5767
        timestamp: Wed 2012-02-29 15:43:11 +0100
        message:
          Aditional code cleanup:
          - fixed doxygen comments
          - fixed the NULL bits that go with DBUG_ASSERT(table->s->null_bytes == 3), in table_events_stementes.cc
        ------------------------------------------------------------
        revno: 2876.477.89 [merge]
        committer: Marc Alff <marc.alff@oracle.com>
        branch nick: mysql-trunk-wl5767
        timestamp: Wed 2012-02-29 14:26:31 +0100
        message:
          Merge mysql-trunk --> mysql-trunk-wl5767
          
          Adjusted the digests MD5 in tests results, due to the new FORMAT_SYM token.
        ------------------------------------------------------------
        revno: 2876.477.88 [merge]
        committer: Mayank Prasad <mayank.prasad@oracle.com>
        branch nick: mysql-trunk-wl5767-merge
        timestamp: Wed 2012-02-29 10:16:19 +0530
        message:
          WL#5767 : Statements Digest, performance Schema.
          
          Merge: mysql-trunk -> mysql-trunk-wl5767
        ------------------------------------------------------------
        revno: 2876.477.87
        committer: Marc Alff <marc.alff@oracle.com>
        branch nick: mysql-trunk-wl5767
        timestamp: Tue 2012-02-28 16:57:52 +0100
        message:
          Fixed an issue with LF_PINS in the digest LF_HASH.
          Implemented the missing digest_lost counter.
          Adjusted the test cases.
        ------------------------------------------------------------
        revno: 2876.477.86 [merge]
        committer: Marc Alff <marc.alff@oracle.com>
        branch nick: mysql-trunk-wl5767
        timestamp: Tue 2012-02-28 15:40:36 +0100
        message:
          Merge mysql-trunk --> mysql-trunk-wl5767
        ------------------------------------------------------------
        revno: 2876.477.85 [merge]
        committer: Marc Alff <marc.alff@oracle.com>
        branch nick: mysql-trunk-wl5767
        timestamp: Tue 2012-02-28 12:05:49 +0100
        message:
          Merge mysql-trunk --> mysql-trunk-wl5767
        ------------------------------------------------------------
        revno: 2876.477.84 [merge]
        committer: Mayank Prasad <mayank.prasad@oracle.com>
        branch nick: mysql-trunk-wl5767-merge
        timestamp: Mon 2012-02-27 16:33:24 +0530
        message:
          WL#5767 : Statements Digest, Performance Schema.
          
          Merge mysql-trunk -> mysql-trunk-wl5767
        ------------------------------------------------------------
        revno: 2876.477.83
        committer: Christopher Powers <chris.powers@oracle.com>
        branch nick: mysql-trunk-wl5767
        timestamp: Thu 2012-02-23 19:25:29 -0600
        message:
          WL#5767 PERFORMANCE_SCHEMA statement digests
          
          Fixed timestamp bug pfs_engine_table
        ------------------------------------------------------------
        revno: 2876.477.82 [merge]
        committer: Marc Alff <marc.alff@oracle.com>
        branch nick: mysql-trunk-wl5767
        timestamp: Fri 2012-02-24 01:24:16 +0100
        message:
          Merge mysql-trunk --> mysql-trunk-wl5767
        ------------------------------------------------------------
        revno: 2876.477.81
        committer: Marc Alff <marc.alff@oracle.com>
        branch nick: mysql-trunk-wl5767
        timestamp: Fri 2012-02-24 00:27:02 +0100
        message:
          Code cleanup, continued
        ------------------------------------------------------------
        revno: 2876.477.80 [merge]
        committer: Marc Alff <marc.alff@oracle.com>
        branch nick: mysql-trunk-wl5767
        timestamp: Wed 2012-02-22 17:43:06 +0100
        message:
          Merge mysql-trunk --> mysql-trunk-wl5767
        ------------------------------------------------------------
        revno: 2876.477.79
        committer: Marc Alff <marc.alff@oracle.com>
        branch nick: mysql-trunk-wl5767
        timestamp: Tue 2012-02-21 19:27:58 +0100
        message:
          Code cleanup
        ------------------------------------------------------------
        revno: 2876.477.78
        committer: Marc Alff <marc.alff@oracle.com>
        branch nick: mysql-trunk-wl5767
        timestamp: Mon 2012-02-20 21:56:20 +0100
        message:
          Post merge cleanup: integration with recent changes in sql/ related to MD5.
        ------------------------------------------------------------
        revno: 2876.477.77 [merge]
        committer: Marc Alff <marc.alff@oracle.com>
        branch nick: mysql-trunk-wl5767
        timestamp: Mon 2012-02-20 19:05:15 +0100
        message:
          Merge mysql-trunk --> mysql-trunk-wl5767
        ------------------------------------------------------------
        revno: 2876.477.76
        committer: Mayank Prasad <mayank.prasad@oracle.com>
        branch nick: 5767
        timestamp: Mon 2012-02-20 19:02:56 +0530
        message:
          WL#5767 : Performance Schema, Statements Digest.
          
          Details:
           - Modified code to capture statements giving ERROR/WARNINGS.
           - Added code to collect stats of ERROR/WARNING/ROW_AFFECTED counts.
           - Added/Modified test cases accordingly.
        ------------------------------------------------------------
        revno: 2876.477.75
        committer: Mayank Prasad <mayank.prasad@oracle.com>
        branch nick: 5767
        timestamp: Thu 2012-02-16 20:28:41 +0530
        message:
          WL#5767 : Performanc Schema, Statements Digest.
          
          Details:
           - Modifed code to show stats stored at index 0.
           - added a new test case for displaying index 0 stat when 
          digest table is full.
        ------------------------------------------------------------
        revno: 2876.477.74
        committer: Mayank Prasad <mayank.prasad@oracle.com>
        branch nick: 5767
        timestamp: Thu 2012-02-16 18:27:06 +0530
        message:
          WL#5767 : Performance_schema, Statements Digest.
          
          Details:
           - Added code to distinguish between IDENT and IDENT_QUOTED tokens.
           - Modified test case and result files accordingly.
        ------------------------------------------------------------
        revno: 2876.477.73
        committer: Marc Alff <marc.alff@oracle.com>
        branch nick: mysql-trunk-wl5767
        timestamp: Thu 2012-02-16 12:50:07 +0100
        message:
          Code cleanup (dos2unix), test cleanup
        ------------------------------------------------------------
        revno: 2876.477.72 [merge]
        committer: Mayank Prasad <mayank.prasad@oracle.com>
        branch nick: mysql-trunk-wl5767-merge
        timestamp: Wed 2012-02-15 21:23:33 +0530
        message:
          WL#5767 : Performance Schema, Statements Digest.
          
          Merge : mysql-trunk->mysql-trunk-wl5767
        ------------------------------------------------------------
        revno: 2876.477.71
        committer: Mayank Prasad <mayank.prasad@oracle.com>
        branch nick: 5767_2
        timestamp: Wed 2012-02-15 19:07:08 +0530
        message:
          WL#5767 : Performance Schema, Statements Digest.
          
          Details:
           - Added code to collect digest only for successful statements.
           - Modified table events_statements_summary_by_digest definition 
             as per modifed specs.
           - Modified test result accordingly.
        ------------------------------------------------------------
        revno: 2876.477.70
        committer: Mayank Prasad <mayank.prasad@oracle.com>
        branch nick: 5767_2
        timestamp: Tue 2012-02-14 14:50:56 +0530
        message:
          WL#5767 : Performance Schema, Statements Digest.
          
          Details:
           - Fix failing test cases on gcov.
        ------------------------------------------------------------
        revno: 2876.477.69
        committer: Mayank Prasad <mayank.prasad@oracle.com>
        branch nick: 5767_2
        timestamp: Mon 2012-02-13 18:08:43 +0530
        message:
          WL#5767 : Performance Schema, Statements Digest.
          
          Details:
           - Fix for failing valgrind test cases.
        ------------------------------------------------------------
        revno: 2876.477.68 [merge]
        committer: Mayank Prasad <mayank.prasad@oracle.com>
        branch nick: mysql-trunk-wl5767-merge
        timestamp: Mon 2012-02-13 14:31:42 +0530
        message:
          WL#5767 : Performance Schema, Statements Digest
          
          Details:
           - Merge mysql-trunk -> mysql-trunk-wl5767
        ------------------------------------------------------------
        revno: 2876.477.67 [merge]
        committer: Christopher Powers <chris.powers@oracle.com>
        branch nick: mysql-trunk-wl5767
        timestamp: Sun 2012-02-12 16:06:47 -0600
        message:
          merge with mysql-trunk
        ------------------------------------------------------------
        revno: 2876.477.66
        committer: Christopher Powers <chris.powers@oracle.com>
        branch nick: mysql-trunk-wl5767
        timestamp: Sun 2012-02-12 16:05:27 -0600
        message:
          WL#5767 PERFORMANCE_SCHEMA, statement digests
          
          Update ABI check files
        ------------------------------------------------------------
        revno: 2876.477.65
        committer: Christopher Powers <chris.powers@oracle.com>
        branch nick: mysql-trunk-wl5767
        timestamp: Sun 2012-02-12 15:48:28 -0600
        message:
          WL#5767 PERFORMANCE_SCHEMA, statement digests
          
          Test case cleanup
          - Moved digest_* include files to local include directory
          - start_server_no_digest: Replaced source inclusion of statement_digest.test
          to avoid double inclusion of header files
          - Standardized test file names
          - Standardized upper/lower case use in SQL syntax 
        ------------------------------------------------------------
        revno: 2876.477.64
        committer: Christopher Powers <chris.powers@oracle.com>
        branch nick: mysql-trunk-wl5767
        timestamp: Sun 2012-02-12 14:08:11 -0600
        message:
          WL#5767 PERFORMANCE_SCHEMA, statement digest
          
          - Fixed build break for builds with no perfschema
          - Fixed warning in pfs_noop.c
        ------------------------------------------------------------
        revno: 2876.477.63
        committer: Christopher Powers <chris.powers@oracle.com>
        branch nick: mysql-trunk-wl5767
        timestamp: Sat 2012-02-11 14:33:44 -0600
        message:
          WL#5767 PERFORMANCE_SCHEMA STATEMENT DIGEST
          
          - Fixed PB2 crash
        ------------------------------------------------------------
        revno: 2876.477.62
        committer: Christopher Powers <chris.powers@oracle.com>
        branch nick: mysql-trunk-wl5767
        timestamp: Fri 2012-02-10 17:14:57 -0600
        message:
          WL#5767 PERFORMANCE_SCHEMA STATEMENT DIGEST
          
          - Added MYSQL_ADD_TOKEN() to PSI interface, replaced macro in sql_lex.cc
          - Added data flow comments to doxygen LLD in pfs.cc
          - Minor style changes in pfs_digest.cc
        ------------------------------------------------------------
        revno: 2876.477.61 [merge]
        committer: Christopher Powers <chris.powers@oracle.com>
        branch nick: mysql-trunk-wl5767
        timestamp: Fri 2012-02-10 15:20:10 -0600
        message:
          WL#5767 PERFORMANCE_SCHEMA STATEMENTS DIGEST
          
          Merge with mysql-trunk
        ------------------------------------------------------------
        revno: 2876.477.60 [merge]
        committer: Christopher Powers <chris.powers@oracle.com>
        branch nick: base_mysql-trunk-wl5767
        timestamp: Fri 2012-02-10 15:02:01 -0600
        message:
          local merge
            ------------------------------------------------------------
            revno: 2876.478.21
            committer: Mayank Prasad <mayank.prasad@oracle.com>
            branch nick: 5767
            timestamp: Fri 2012-02-10 18:28:30 +0530
            message:
              WL#5767 : Performance Schema, Statements Digest
              
              Details:
               - Added missing test case result file.
            ------------------------------------------------------------
            revno: 2876.478.20
            committer: Mayank Prasad <mayank.prasad@oracle.com>
            branch nick: 5767
            timestamp: Fri 2012-02-10 18:25:57 +0530
            message:
              WL#5767 : Performance Schema, Statements Digest
              
              Details:
               - Made digest_storage part of digest_locker_state.
               - Remove dependency of consumer digest_storage from consumer
                 statement_current.
               - Enabled new test case.
            ------------------------------------------------------------
            revno: 2876.478.19
            committer: Mayank Prasad <mayank.prasad@oracle.com>
            branch nick: 5767
            timestamp: Fri 2012-02-10 15:43:58 +0530
            message:
              WL#5767 : Performance Schema, Statements Digest
              
              Details:
               - Added new and modified existing test cases.
            ------------------------------------------------------------
            revno: 2876.478.18
            committer: Marc Alff <marc.alff@oracle.com>
            branch nick: mysql-trunk-wl5767
            timestamp: Thu 2012-02-09 15:41:43 +0100
            message:
              Revised the add_token interface
        ------------------------------------------------------------
        revno: 2876.477.59 [merge]
        committer: Christopher Powers <chris.powers@oracle.com>
        branch nick: base_mysql-trunk-wl5767
        timestamp: Wed 2012-02-08 10:42:30 -0600
        message:
          local merge
            ------------------------------------------------------------
            revno: 2876.478.17
            committer: Mayank Prasad <mayank.prasad@oracle.com>
            branch nick: 5767
            timestamp: Wed 2012-02-08 17:21:37 +0530
            message:
              WL#5767 : Performance Schema, Statements Digest
              
              Details:
               - Modified PASS_TOKEN_TO_PS.
               - Modified test cases result files accordingly.
            ------------------------------------------------------------
            revno: 2876.478.16
            committer: Mayank Prasad <mayank.prasad@oracle.com>
            branch nick: 5767
            timestamp: Wed 2012-02-08 16:00:58 +0530
            message:
              WL#5767 : Performance Schema, Statements Digest
              
              Details:
               - Added HAVE_PSI_STATEMENT_DIGEST_INTERFACE/DISABLE_PSI_STATEMENT_DIGEST
            ------------------------------------------------------------
            revno: 2876.478.15 [merge]
            committer: Mayank Prasad <mayank.prasad@oracle.com>
            branch nick: mysql-trunk-wl5767-merge
            timestamp: Wed 2012-02-08 15:14:47 +0530
            message:
              WL#5767 : Performance Schema, Statements Digest
              
              Merge : mysql_trunk->mysql_trunk_wl5767
        ------------------------------------------------------------
        revno: 2876.477.58 [merge]
        committer: Christopher Powers <chris.powers@oracle.com>
        branch nick: base_mysql-trunk-wl5767
        timestamp: Mon 2012-02-06 15:19:50 -0600
        message:
          local merge
            ------------------------------------------------------------
            revno: 2876.478.14 [merge]
            committer: Mayank Prasad <mayank.prasad@oracle.com>
            branch nick: mysql-trunk-wl5767-merge
            timestamp: Mon 2012-02-06 22:46:51 +0530
            message:
              WL#5767:
              
              Merge : mysql-trunk->mysql-trunk-wl5767
            ------------------------------------------------------------
            revno: 2876.478.13
            committer: Mayank Prasad <mayank.prasad@oracle.com>
            branch nick: 5767
            timestamp: Mon 2012-02-06 17:38:15 +0530
            message:
              WL#5767 : Performance Schema, Statements Digest
              
              Details:
               - Added new flag m_full in PFS_digest_storage.
               - Modified code to make sure not to overflow digest_text
                 buffer while generating digest text.
            ------------------------------------------------------------
            revno: 2876.478.12
            committer: Mayank Prasad <mayank.prasad@oracle.com>
            branch nick: 5767
            timestamp: Mon 2012-02-06 15:00:53 +0530
            message:
              WL#5767: Performance Schema, Statements Digest
              
              Details:
               - Modified PSI_digest_locker_state_v1 to have last_id_index.
               - Modified PFS_digest_storage to have only Token Stream.
               - Modified PFS_statements_digest_stat to have Digest Hash.
            ------------------------------------------------------------
            revno: 2876.478.11
            committer: Mayank Prasad <mayank.prasad@oracle.com>
            branch nick: 5767
            timestamp: Mon 2012-02-06 12:16:14 +0530
            message:
              WL#5767 : Performance Schema, Statements Digest	
              
              Details:
               - Probable fix for a failing test case on PB2.
            ------------------------------------------------------------
            revno: 2876.478.10 [merge]
            committer: Mayank Prasad <mayank.prasad@oracle.com>
            branch nick: mysql-trunk-wl5767-merge
            timestamp: Mon 2012-02-06 10:57:56 +0530
            message:
              WL#5767 : Performance Schema, Statements Digest
              
              Details:
               - Merge mysql-trunk -> mysql-trunk-wl5767
        ------------------------------------------------------------
        revno: 2876.477.57 [merge]
        committer: Christopher Powers <chris.powers@oracle.com>
        branch nick: base_mysql-trunk-wl5767
        timestamp: Sun 2012-02-05 20:41:36 -0600
        message:
          local merge
            ------------------------------------------------------------
            revno: 2876.478.9
            committer: Mayank Prasad <mayank.prasad@oracle.com
            branch nick: 5767
            timestamp: Sun 2012-02-05 00:32:49 +0530
            message:
              WL#5767: Performance Schema, Statements Digest
              
              Details:
              - probable fix for failing test case on PB2.
              - A little Code cleanup.
            ------------------------------------------------------------
            revno: 2876.478.8
            committer: Mayank Prasad <mayank.prasad@oracle.com>
            branch nick: 5767
            timestamp: Fri 2012-02-03 21:30:30 +0530
            message:
              WL#5767 : Performance Schema, Statements Digest
              
              Detials:
              - Removed digest_end completely.
              - Moved processing of digest_end to end_statement.
              - Removed unwanted function yyLength_PS (added 
                earlier by me only).
              - Modified token PASS_TOKEN_TO_PS.
            ------------------------------------------------------------
            revno: 2876.478.7
            committer: Mayank Prasad <mayank.prasad@oracle.com>
            branch nick: 5767
            timestamp: Fri 2012-02-03 17:08:42 +0530
            message:
              WL#5767 Performance Schema, Statements Digest
              
              Details:
              - Removed duplicates from PFS_statements_digest_stat.
              - Added code to delete hash entries once truncate table is called.
              - Did few code cleanup.
            ------------------------------------------------------------
            revno: 2876.478.6
            committer: Mayank Prasad <mayank.prasad@oracle.com>
            branch nick: 5767
            timestamp: Thu 2012-02-02 23:01:41 +0530
            message:
              WL#5767: Performance Schema, Statements Digest
              
              Details
              - Modified result file for failing test cases.
            ------------------------------------------------------------
            revno: 2876.478.5
            committer: Mayank Prasad <mayank.prasad@oracle.com>
            branch nick: 5767
            timestamp: Thu 2012-02-02 21:27:35 +0530
            message:
              WL#5767 : Performance Schema, statements digest
              
              Details:
              - Modified printed reduced token for digest text as per new
                specification. Modified code comments as well.
              - Removed TOK_PFS_ROW_POSSIBLE_SINGLE_VALUE,
                TOK_PFS_ROW_POSSIBLE_MULTIPLE_VALUE
              - Made READ/STORE(_TOKEN) & READ/STORE(_IDENTIFIER) etc to
                inline function.
              - Modified structure PFS_statements_digest_stat as per comments.
            ------------------------------------------------------------
            revno: 2876.478.4
            committer: Mayank Prasad <mayank.prasad@oracle.com>
            branch nick: 5767
            timestamp: Thu 2012-02-02 17:34:43 +0530
            message:
              WL#5767 Performance Schema, Statements Digest
              
              Details:
              - Implemented FIRST_SEEN/LAST_SEEN, Column. Getting Wrong
                dates, need to see.
              - Changed Digest COLUMN size from varchar(64) to varchar(32).
              - tried to fix statements_digest_long_query by specifying 
                big value of thread_stack.
            ------------------------------------------------------------
            revno: 2876.478.3
            committer: Mayank Prasad <mayank.prasad@oracle.com>
            branch nick: 5767
            timestamp: Thu 2012-02-02 13:45:42 +0530
            message:
              WL#5767 Performance Schema, Statements Digest
              
              Details:
              - Moved digest text calculation (get_digest_text call) from
                "during statement execution" to "during querying digest table".
        ------------------------------------------------------------
        revno: 2876.477.56 [merge]
        committer: Christopher Powers <chris.powers@oracle.com>
        branch nick: base_mysql-trunk-wl5767
        timestamp: Wed 2012-02-01 12:45:52 -0600
        message:
          local merge
            ------------------------------------------------------------
            revno: 2876.478.2 [merge]
            committer: Marc Alff <marc.alff@oracle.com>
            branch nick: mysql-trunk-wl5767
            timestamp: Wed 2012-02-01 10:20:33 +0100
            message:
              Merge mysql-trunk --> mysql-trunk-wl5767
            ------------------------------------------------------------
            revno: 2876.478.1 [merge]
            committer: Mayank Prasad <mayank.prasad@oracle.com>
            branch nick: mysql-trunk-wl5767-merge
            timestamp: Tue 2012-01-31 12:04:29 +0530
            message:
              WL#5767 : Performance Schema, Statements Digest.
              
              Merge mysql-trunk->mysql-trunk-wl5767
        ------------------------------------------------------------
        revno: 2876.477.55
        committer: Christopher Powers <chris.powers@oracle.com>
        branch nick: mysql-trunk-wl5767
        timestamp: Tue 2012-01-31 08:09:18 -0600
        message:
          WL#5767 PERFORMANCE_SCHEMA STATEMENT DIGEST
          
          Changed include path for yacc files
        ------------------------------------------------------------
        revno: 2876.477.54 [merge]
        committer: Mayank Prasad <mayank.prasad@oracle.com>
        branch nick: mysql-trunk-wl5767-merge
        timestamp: Mon 2012-01-23 12:55:50 +0530
        message:
          WL#5767: Statements Digest, Performance Schema
          
          Merge : mysql-trunk->mysql-trunk-wl5767
        ------------------------------------------------------------
        revno: 2876.477.53
        committer: Mayank Prasad <mayank.prasad@oracle.com>
        branch nick: 5767
        timestamp: Tue 2012-01-17 15:45:06 +0530
        message:
          WL#5767 : Performance Schema, Statements Digest.
          
          Details:
           - Added code for handling INDEX 0 entries i.e. DIGEST=NULL
             entries when digest table is full. All records would be aggregated 
             at index 0.
           - Added/Modified test cases/result.
           - Few code cleanup.
        ------------------------------------------------------------
        revno: 2876.477.52
        committer: Mayank Prasad <mayank.prasad@oracle.com>
        branch nick: 5767
        timestamp: Tue 2012-01-17 00:37:57 +0530
        message:
          WL#5767: Statements Digest, Performance Schema.
          
          Details:
           - Added multiple test cases suggested by Mark.
           - Fixed few issues, found in unit testing.
        ------------------------------------------------------------
        revno: 2876.477.51 [merge]
        committer: Mayank Prasad <mayank.prasad@oracle.com>
        branch nick: mysql-trunk-wl5767-merge
        timestamp: Mon 2012-01-16 11:07:16 +0530
        message:
          Merge mysql-trunk --> mysql-trunk-wl5767
        ------------------------------------------------------------
        revno: 2876.477.50 [merge]
        committer: Mayank Prasad <mayank.prasad@oracle.com>
        branch nick: mysql-trunk-wl5767-merge
        timestamp: Mon 2012-01-09 14:39:26 +0530
        message:
          Merge mysql-trunk --> mysql-trunk-wl5767
        ------------------------------------------------------------
        revno: 2876.477.49
        committer: Mayank Prasad <mayank.prasad@oracle.com>
        branch nick: 5767
        timestamp: Mon 2012-01-09 12:55:42 +0530
        message:
          WL#5767 : Performance Schema, Statement Digest.
          
          Details:
           - Addressed first round of review comments from Marc.
        ------------------------------------------------------------
        revno: 2876.477.48
        committer: Mayank Prasad <mayank.prasad@oracle.com>
        branch nick: 5767
        timestamp: Wed 2012-01-04 16:01:04 +0530
        message:
          WL#5767 : Statements Digest, Performance Schema
          
          Details:
           - Added code to avoid Identifier to be considered
             in reducing tokens for normalisation.
        ------------------------------------------------------------
        revno: 2876.477.47
        committer: Mayank Prasad <mayank.prasad@oracle.com>
        branch nick: 5767
        timestamp: Wed 2012-01-04 13:45:36 +0530
        message:
          WL#5767 : Statement Digest, Performance Schema
          
          Details:
           - Modified token array from int array to byte (char) array.
           - Stored identifiers as token array.
           - Modified test case statements_digest result accordingly.
        ------------------------------------------------------------
        revno: 2876.477.46 [merge]
        committer: Mayank Prasad <mayank.prasad@oracle.com>
        branch nick: mysql-trunk-wl5767-merge
        timestamp: Mon 2012-01-02 11:32:30 +0530
        message:
          WL#5767: Statement Digest, Performance Schema
          
          Details:
           - Merge from latest mysql-trunk.
        ------------------------------------------------------------
        revno: 2876.477.45
        committer: Mayank Prasad <mayank.prasad@oracle.com>
        branch nick: 5767
        timestamp: Thu 2011-12-29 17:38:32 +0530
        message:
          WL#5767 : Performance Schema, Statement Digest
          
          Details:
           - implemented delete_all_rows function for
             events_statements_summary_by_digest table.
           - Modified test case to show digest iformation
             for relevent queries only.
        ------------------------------------------------------------
        revno: 2876.477.44
        committer: Mayank Prasad <mayank.prasad@oracle.com>
        branch nick: 5767
        timestamp: Wed 2011-12-28 21:26:31 +0530
        message:
          WL#5767: Performance Schema, Statements Digest
          
          Details:
           - Addressed code review comment from Marc
           - Added a test case for Statement Digest
        ------------------------------------------------------------
        revno: 2876.477.43
        committer: Mayank Prasad <mayank.prasad@oracle.com>
        branch nick: 5767
        timestamp: Wed 2011-12-28 18:10:43 +0530
        message:
          WL#5767 : Statement Digest, Performance Schema
          
          Details:
           - Added code to REDUCE tokens (i.e. normalization).
        ------------------------------------------------------------
        revno: 2876.477.42 [merge]
        committer: Mayank Prasad <mayank.prasad@oracle.com>
        branch nick: mysql-trunk-wl5767-merge
        timestamp: Mon 2011-12-26 12:36:05 +0530
        message:
          WL#5767 : 
          
          Details:
           - Merge from latest mysql-trunk.
        ------------------------------------------------------------
        revno: 2876.477.41
        committer: Mayank Prasad <mayank.prasad@oracle.com>
        branch nick: 5767
        timestamp: Wed 2011-12-21 00:44:57 +0530
        message:
          WL#5767 : Performance Schema, Statement Digest
          
          Details:
           - Fixed failing test cases on pb2
        ------------------------------------------------------------
        revno: 2876.477.40
        committer: Mayank Prasad <mayank.prasad@oracle.com>
        branch nick: 5767
        timestamp: Tue 2011-12-20 18:17:29 +0530
        message:
          WL#5767 :  Performance Schema, Satement Digest
          
          Details
           - Fixed failing test cases.
        ------------------------------------------------------------
        revno: 2876.477.39
        committer: Mayank Prasad <mayank.prasad@oracle.com>
        branch nick: 5767
        timestamp: Tue 2011-12-20 00:38:09 +0530
        message:
          WL#5767 : Performance Schema, Statement Digest
          
          Details
           - Added server startup option 
             --performance_schema_consumer_statements_digest to enable/disable
             statements_digest consumer. Default value is set to FALSE.
        ------------------------------------------------------------
        revno: 2876.477.38 [merge]
        committer: Mayank Prasad <mayank.prasad@oracle.com>
        branch nick: mysql-trunk-wl5767-merge
        timestamp: Mon 2011-12-19 15:24:42 +0530
        message:
          WL#5767 : Statement Digest, Performance Schema
          
          Details:
           - Merge from mysql-trunk
        ------------------------------------------------------------
        revno: 2876.477.37 [merge]
        committer: Mayank Prasad <mayank.prasad@oracle.com>
        branch nick: mysql-trunk-wl5767-merge
        timestamp: Mon 2011-12-19 12:49:03 +0530
        message:
          WL#5767: statement digest, performance schema.
          
          details:
           -merge frm latest trunk
        ------------------------------------------------------------
        revno: 2876.477.36 [merge]
        committer: Mayank Prasad <mayank.prasad@oracle.com>
        branch nick: mysql-trunk-wl5767-merge
        timestamp: Mon 2011-12-12 14:36:06 +0530
        message:
          WL#5767 : statement digest, Performance Schema
          
          Details:
           - Merge from mysql-trunk
        ------------------------------------------------------------
        revno: 2876.477.35
        committer: Marc Alff <marc.alff@oracle.com>
        branch nick: mysql-trunk-wl5767-marc
        timestamp: Thu 2011-12-08 16:02:04 +0100
        message:
          Fixed build break, when starting from an empty tree
        ------------------------------------------------------------
        revno: 2876.477.34
        committer: Marc Alff <marc.alff@oracle.com>
        branch nick: mysql-trunk-wl5767-marc
        timestamp: Thu 2011-12-08 15:30:18 +0100
        message:
          WL#5767 PERFORMANCE SCHEMA, statement digest
          
          Code generation for the token strings.
          Implemented the first reduce for token normalization, to layout the code structure.
        ------------------------------------------------------------
        revno: 2876.477.33
        committer: Mayank Prasad <mayank.prasad@oracle.com>
        branch nick: 5767
        timestamp: Thu 2011-12-08 09:42:50 +0530
        message:
          WL#5767 : Performance Schema, statement digest
          
          Details:
           - fixing the probable cause of failing test case on pb2 for windows
             and SUN platform.
        ------------------------------------------------------------
        revno: 2876.477.32
        committer: Mayank Prasad <mayank.prasad@oracle.com>
        branch nick: 5767
        timestamp: Wed 2011-12-07 17:46:49 +0530
        message:
          WL#5767 : performance schema, statement digest
          
          details:
           - Tried to fix pb2 issue on Sparc
           - Fixed issue which was seen when PS was not on and 
             digest table was queried. was crashing before.
        ------------------------------------------------------------
        revno: 2876.477.31
        committer: Mayank Prasad <mayank.prasad@oracle.com>
        branch nick: 5767
        timestamp: Tue 2011-12-06 00:02:34 +0530
        message:
          WL#5767 : Performance schema, statement digest.
          
          Details:
          - Put call to start_digest/end_digest to correct place.
          - Initialization of m_digest_hash_pins.
          - Corrected Copyright information.
          - Modified windows specific test case.
        ------------------------------------------------------------
        revno: 2876.477.30 [merge]
        committer: Mayank Prasad <mayank.prasad@oracle.com>
        branch nick: mysql-trunk-wl5767-merge
        timestamp: Mon 2011-12-05 18:42:47 +0530
        message:
          WL#5767 : merge from mysql-trunk
        ------------------------------------------------------------
        revno: 2876.477.29
        committer: Mayank Prasad <mayank.prasad@oracle.com>
        branch nick: 5767
        timestamp: Fri 2011-12-02 19:07:06 +0530
        message:
          WL#5767 : Performance Schema, Statement digest
          
          Details:
           - Added perl script to automatically generate p_lex.h and p_lex.cc
             files having token-> string mapping.
           - Added function to give string for a token using token->string array.
        ------------------------------------------------------------
        revno: 2876.477.28
        committer: Mayank Prasad <mayank.prasad@oracle.com>
        branch nick: 5767_thread
        timestamp: Thu 2011-12-01 16:18:50 +0530
        message:
          WL#5767: PS Statement Digest
          
          Details:
           - Resolved failing test cases
             (like table_aggregate_thread_2u_2t) 
        ------------------------------------------------------------
        revno: 2876.477.27
        committer: Mayank Prasad <mayank.prasad@oracle.com>
        branch nick: mysql-trunk-wl5767-merge
        timestamp: Fri 2011-11-25 16:33:13 +0530
        message:
          WL#5885 - Merge from mysql-trunk to wl tree.
        ------------------------------------------------------------
        revno: 2876.477.26 [merge]
        committer: Mayank Prasad <mayank.prasad@oracle.com>
        branch nick: mysql-trunk-wl5767-merge
        timestamp: Wed 2011-11-23 18:26:12 +0530
        message:
          WL#5767 :
          
          Merge from mysql-trunk to Wl tree.
        ------------------------------------------------------------
        revno: 2876.477.25
        committer: Mayank Prasad <mayank.prasad@oracle.com>
        branch nick: 5767
        timestamp: Fri 2011-11-18 20:09:33 +0530
        message:
          WL#5767
          
          Details:
          - Addressed review comments from Marc.
          - Added stmt stats in digest table
          - Added initial code for token->string conversion.
        ------------------------------------------------------------
        revno: 2876.477.24
        committer: Mayank Prasad <mayank.prasad@oracle.com>
        branch nick: 5767
        timestamp: Thu 2011-10-13 16:19:15 +0530
        message:
          correction for compilation error for gcov
        ------------------------------------------------------------
        revno: 2876.477.23
        committer: Marc Alff <marc.alff@oracle.com>
        branch nick: mysql-trunk-wl5767
        timestamp: Thu 2011-10-13 10:04:17 +0200
        message:
          Fixed windows build break (tentative)
          
          my_sys.h is needed early for my_pthread.h on windows.
        ------------------------------------------------------------
        revno: 2876.477.22
        committer: Marc Alff <marc.alff@oracle.com>
        branch nick: mysql-trunk-wl5767
        timestamp: Thu 2011-10-13 09:15:46 +0200
        message:
          Added missing my_global.h
        ------------------------------------------------------------
        revno: 2876.477.21 [merge]
        committer: Mayank Prasad <mayank.prasad@oracle.com>
        branch nick: mysql-trunk-wl5767-merge
        timestamp: Tue 2011-10-11 13:05:41 +0530
        message:
          merge from mysql-trunk
        ------------------------------------------------------------
        revno: 2876.477.20
        committer: Mayank Prasad <mayank.prasad@oracle.com>
        branch nick: 5767_push
        timestamp: Tue 2011-10-04 17:46:34 +0530
        message:
          WL#5767 : statement digest, performance schema
          
          Details:
          - Addressed review comments from Marc.
        ------------------------------------------------------------
        revno: 2876.477.19
        committer: Mayank Prasad <mayank.prasad@oracle.com>
        branch nick: 5767_push
        timestamp: Thu 2011-09-15 17:52:08 +0530
        message:
          wl#5767 : performance schema, statement digest
          
          Details:
          - Code for populating statement_current, statement_history and
            statement_history_long tables with captured digest information.
        ------------------------------------------------------------
        revno: 2876.477.18
        committer: Mayank Prasad <mayank.prasad@oracle.com>
        branch nick: 5767_push
        timestamp: Wed 2011-09-14 17:28:49 +0530
        message:
          WL#5767: statement digest, performance schema
          	
          Details:
          - Added code for LF_HASH on computed digest.
        ------------------------------------------------------------
        revno: 2876.477.17
        committer: Mayank Prasad <mayank.prasad@oracle.com>
        branch nick: 5767_push
        timestamp: Tue 2011-09-13 16:59:39 +0530
        message:
          WL#5767 : Statement Digest, Performance Schema
          
          Details:
             Added code to populate digest table with computed digest information.
        ------------------------------------------------------------
        revno: 2876.477.16
        committer: Mayank Prasad <mayank.prasad@oracle.com>
        branch nick: 5767_push
        timestamp: Fri 2011-09-09 16:12:34 +0530
        message:
          fix for crash on pb2
        ------------------------------------------------------------
        revno: 2876.477.15
        committer: Mayank Prasad <mayank.prasad@oracle.com>
        branch nick: 5767_push
        timestamp: Thu 2011-09-08 02:57:46 +0530
        message:
          fix for failing test cases on pb2
        ------------------------------------------------------------
        revno: 2876.477.14
        committer: Mayank Prasad <mayank.prasad@oracle.com>
        branch nick: 5767_push
        timestamp: Wed 2011-09-07 16:08:59 +0530
        message:
          WL#5767 : performance schema, statement digest
          
          Code changes:
          1. Coded digest_start/digest_end and added calls.
          2. Made digest_storage to thread/statement specific.
          3. Added restriction to number of tokens collected for long query.
          4. Added digest initialization code in unittest (pfs-t) to run clean.
        ------------------------------------------------------------
        revno: 2876.477.13 [merge]
        committer: Mayank Prasad <mayank.prasad@oracle.com>
        branch nick: mysql-trunk-wl5767-merge
        timestamp: Tue 2011-09-06 17:54:04 +0530
        message:
          merge from trunk
        ------------------------------------------------------------
        revno: 2876.477.12
        committer: Mayank Prasad <mayank.prasad@oracle.com>
        branch nick: 5767_push
        timestamp: Fri 2011-08-19 15:15:07 +0530
        message:
          removed printf which I forgot in earlier push and was causing issue on pb2
        ------------------------------------------------------------
        revno: 2876.477.11
        committer: Mayank Prasad <mayank.prasad@oracle.com>
        branch nick: 5767_push
        timestamp: Thu 2011-08-18 18:17:38 +0530
        message:
          WL#5767 : PERFORMANCE SCHEMA, statement digest
          
          Description:
          	1. Code to store tokens passed from Lexer to PS.
          	2. Code to calculate MD5 for the tokens recieved.
          	3. Code to calculate digest for the statement parsed.
        ------------------------------------------------------------
        revno: 2876.477.10
        committer: Mayank Prasad <mayank.prasad@oracle.com>
        branch nick: 5767_2
        timestamp: Mon 2011-08-08 11:40:03 +0530
        message:
          wl#5767 : PERFORMANCE SCHEMA, statement digest
          
          Details:
          additional Code changes for getting tokens from Lexer to PS function.
        ------------------------------------------------------------
        revno: 2876.477.9
        committer: Mayank Prasad <mayank.prasad@oracle.com>
        branch nick: 5767
        timestamp: Wed 2011-08-03 01:32:22 +0530
        message:
          WL#5767 : PERFORMANCE SCHEMA, statement digest
          
          Changes:
          --------
          1. Code changes to Adjust "SHOW ENGINE PERFORMANCE_SCHEMA STATUS".
          2. Code changes to pass every token from Lexer to PS.
        ------------------------------------------------------------
        revno: 2876.477.8 [merge]
        committer: Mayank Prasad <mayank.prasad@oracle.com>
        branch nick: mysql-trunk-wl5767-merge
        timestamp: Tue 2011-08-02 13:23:14 +0530
        message:
          wl#5767 : PERFORMANCE SCHEMA, statement digest
          
          merge mysql-trunk->mysql-trunk-wl5767
        ------------------------------------------------------------
        revno: 2876.477.7
        committer: Mayank Prasad <mayank.prasad@oracle.com
        branch nick: 5767
        timestamp: Wed 2011-06-15 15:58:15 +0530
        message:
          WL#5767:PERFORMANCE SCHEMA, statement digest
          
          Fix:
          fix for failing test case mysqld--help-win.test.
        ------------------------------------------------------------
        revno: 2876.477.6
        committer: Mayank Prasad <mayank.prasad@oracle.com
        branch nick: 5767
        timestamp: Mon 2011-06-13 17:24:30 +0530
        message:
          WL#5767 : PERFORMANCE SCHEMA, statement digest
          
          Description:
          Fixed failing test case issues.
        ------------------------------------------------------------
        revno: 2876.477.5 [merge]
        committer: Mayank Prasad <mayank.prasad@oracle.com
        branch nick: mysql-trunk-wl5767_merge
        timestamp: Tue 2011-06-07 17:38:35 +0530
        message:
          merge from mysql-trunk
        ------------------------------------------------------------
        revno: 2876.477.4
        committer: Mayank Prasad <mayank.prasad@oracle.com
        branch nick: 5767
        timestamp: Tue 2011-06-07 15:53:30 +0530
        message:
          fix for failing test case ddl_esms_by_digest.test
        ------------------------------------------------------------
        revno: 2876.477.3
        committer: Mayank Prasad <mayank.prasad@oracle.com
        branch nick: 5767
        timestamp: Mon 2011-05-16 16:50:58 +0530
        message:
          WL#5767 : Commit with modified skeleton code and updated test cases.
          
          Covered:
          > Skeleton code updated as per small modification in LLD.
          > Test case failures.
        ------------------------------------------------------------
        revno: 2876.477.2
        committer: Mayank Prasad <mayank.prasad@oracle.com
        branch nick: mysql-trunk-wl5767
        timestamp: Tue 2011-05-10 23:56:49 +0530
        message:
          WL#5767 : First commit with skeleton code
          
          Changes Description:
          --------------------
          Following coding is done as per LLD:
          1)
            - Add new columns to events_statements_current / history / history_long tables.
            - Expose them as NULL.
                  >> Coded.
          2)
            - Create a new table events_statements_summary_by_digest
            - C++ file for this table:
            - storage/perfschema/table_esms_by_digest.h, .cc
                  >> Coded.
          3)
            - Add a new perfschema startup option:
            - performance-schema-digests-size
                  >> Coded.
          4)
            - Define new structures for internal buffers for events_statements_summary_by_digest
            - C++ files
            - storage/perfschema/pfs_digest.h, .cc
            - PFS_statement_digest_stat structure
            - statement_digest_stat_array[]
                  >> Skeleton Coded.
          5)
            - Change the performance schema initialization to allocate memory
            - for buffers in 4), using the size from 3)
                  >> Skeleton Coded.
        ------------------------------------------------------------
        revno: 2876.477.1
        committer: Marc Alff <marc.alff@oracle.com>
        branch nick: mysql-trunk-wl5767
        timestamp: Wed 2011-05-04 21:59:15 -0600
        message:
          New tree
------------------------------------------------------------
revno: 3706
committer: Jon Olav Hauglid <jon.hauglid@oracle.com>
branch nick: mysql-trunk-wl5968-new
timestamp: Thu 2012-03-01 14:53:55 +0100
message:
  WL#5968: Implement START TRANSACTION READ (WRITE|ONLY);
    
  This worklog implements support for explicitly or implicitly
  starting read-only transactions. During a read-only transaction
  all DDL statements as well as inserts, updates and deletions of
  data in non-temporary tables will return an error message:
  "Cannot execute statement in a READ ONLY transaction."
  
  The reason for implementing support for read-only transactions
  is that it allows engine optimizations that will result in
  performance improvements for read-only workloads.
  
  Read-only transactions can be explicitly started using the
  new START TRANSACTION READ ONLY syntax. Similarly, read-write
  transactions can be explicitly started using START TRANSACTION
  READ WRITE.
  
  Read-only transactions can be implicitly started by first changing
  the default access mode to read-only using:
  *) SET [GLOBAL|SESSION] TRANSACTION READ ONLY
     (READ WRITE is also supported)
  *) Global/session dynamic server variable "tx_read_only".
     This has the same effect as SET GLOBAL/SESSION TRANSACTION.
  *) Server startup option --transaction-read-only
  and then starting a transaction without explicit access mode.
  Note that read-write is the default access mode (matching
  existing behavior before this worklog).
  
  Note that SET TRANSACTION READ ONLY (or READ WRITE) sets the
  access mode for the next (and only next) transaction, while
  SET SESSION sets the session server variable which will
  affect all following transactions.
  
  The worklog also updates the client/server protocol by adding
  a new SERVER_STATUS_IN_TRANS_READONLY server status flag.
  This allows clients to examine the access mode of any current
  transaction.
  
  Incompatible change: SET TRANSACTION is now a separate
  statement from SET. This means that it is now longer possible
  to execute e.g. SET @a= 1, TRANSACTION ISOLATION LEVEL SERIALIZABLE.
------------------------------------------------------------
revno: 3705
committer: Jon Olav Hauglid <jon.hauglid@oracle.com>
branch nick: mysql-trunk-wl5968-new
timestamp: Wed 2012-02-29 17:15:13 +0100
message:
  Change tree name.
------------------------------------------------------------
revno: 3704
committer: Roy Lyseng <roy.lyseng@oracle.com>
branch nick: mysql-sb5
timestamp: Wed 2012-02-29 16:28:26 +0100
message:
  Bug#13726217: Crash in Item_ident::fix_after_pullout()
  
  The problem query contains three nested query blocks, denoted A, B
  and C. The resolution process is performed infix, so that the inner
  block C is resolved first. It is marked as const, and hence executed
  in the resolver phase. During execution, some temporary Item_field
  objects are created and added to the item tree. Going outwards,
  a semi-join transform merges the middle query block B into the outer
  query block A. In this process, Item::fix_after_pullout() is called
  on all inner items.
  
  However, the temporary Item_field objects attached to query block C
  were created without a name resolution context, which is essential
  for Item_ident::fix_after_pullout(). When attempting to access the
  context object, a crash occurs.
  
  The problem is fixed by ignoring objects with context == NULL, as
  they must be contained in an inner query block that is already
  executed.
  
  mysql-test/include/subquery_sj.inc
    Added test case for bug#13726217.
  
  mysql-test/r/subquery_sj_all.result
  mysql-test/r/subquery_sj_all_bka.result
  mysql-test/r/subquery_sj_all_bka_nixbnl.result
  mysql-test/r/subquery_sj_all_bkaunique.result
  mysql-test/r/subquery_sj_dupsweed.result
  mysql-test/r/subquery_sj_dupsweed_bka.result
  mysql-test/r/subquery_sj_dupsweed_bka_nixbnl.result
  mysql-test/r/subquery_sj_dupsweed_bkaunique.result
  mysql-test/r/subquery_sj_firstmatch.result
  mysql-test/r/subquery_sj_firstmatch_bka.result
  mysql-test/r/subquery_sj_firstmatch_bka_nixbnl.result
  mysql-test/r/subquery_sj_firstmatch_bkaunique.result
  mysql-test/r/subquery_sj_loosescan.result
  mysql-test/r/subquery_sj_loosescan_bka.result
  mysql-test/r/subquery_sj_loosescan_bka_nixbnl.result
  mysql-test/r/subquery_sj_loosescan_bkaunique.result
  mysql-test/r/subquery_sj_mat.result
  mysql-test/r/subquery_sj_mat_bka.result
  mysql-test/r/subquery_sj_mat_bka_nixbnl.result
  mysql-test/r/subquery_sj_mat_bkaunique.result
  mysql-test/r/subquery_sj_mat_nosj.result
  mysql-test/r/subquery_sj_none.result
  mysql-test/r/subquery_sj_none_bka.result
  mysql-test/r/subquery_sj_none_bka_nixbnl.result
  mysql-test/r/subquery_sj_none_bkaunique.result
    Added test case results for bug#13726217.
  
  sql/item.cc
    In Item_ident::fix_after_pullout(), ignore objects without
    name resolution context.
  
  sql/item.h
    Added a comment.
------------------------------------------------------------
revno: 3703 [merge]
committer: Manish Kumar<manish.4.kumar@oracle.com>
branch nick: bug12400221
timestamp: Tue 2012-02-28 19:46:56 +0530
message:
  upmerging from mysql-5.5 -> mysql-trunk
        
    ------------------------------------------------------------
    revno: 2875.348.2
    committer: Manish Kumar<manish.4.kumar@oracle.com>
    branch nick: mysql-5.5
    timestamp: Tue 2012-02-28 19:43:09 +0530
    message:
      BUG#13333431 - INCORRECT DEFAULT PORT IN 'SHOW SLAVE HOSTS' OUTPUT
            
      This is a post commit patch for failing test on windows.
    ------------------------------------------------------------
    revno: 2875.348.1
    committer: Manish Kumar<manish.4.kumar@oracle.com>
    branch nick: mysql-5.5
    timestamp: Tue 2012-02-28 16:25:13 +0530
    message:
      BUG#13333431 - INCORRECT DEFAULT PORT IN 'SHOW SLAVE HOSTS' OUTPUT
      
      This is a post commit patch for failing test on windows.
------------------------------------------------------------
revno: 3702
committer: Praveenkumar Hulakund <praveenkumar.hulakund@oracle.com>
branch nick: mysql-trunk-new
timestamp: Wed 2012-02-29 19:34:30 +0530
message:
  Bug#12601974 - STORED PROCEDURE SQL_MODE=NO_BACKSLASH_ESCAPES IGNORED AND BREAKS REPLICATION
  
  Moving test cases not applicable to embedded server to "not_embedded_server.test" 
  from "sql_mode.test"
------------------------------------------------------------
revno: 3701
committer: Gleb Shchepa <gleb.shchepa@oracle.com>
branch nick: trunk
timestamp: Wed 2012-02-29 16:37:34 +0400
message:
  WL#5855: Print EXPLAIN in JSON format
  
  Minor fix to make GCC compiler happy with strict flags.
------------------------------------------------------------
revno: 3700 [merge]
committer: Gleb Shchepa <gleb.shchepa@oracle.com>
branch nick: trunk
timestamp: Wed 2012-02-29 16:03:59 +0400
message:
  auto-merge of mysql-trunk with a local tree
    ------------------------------------------------------------
    revno: 3698.1.4
    committer: Hemant Kumar <hemant.hk.kumar@oracle.com>
    branch nick: mysql-trunk
    timestamp: Wed 2012-02-29 17:22:32 +0530
    message:
      Enabling partition test suite for daily run.
    ------------------------------------------------------------
    revno: 3698.1.3
    committer: Marko M?kel? <marko.makela@oracle.com>
    branch nick: mysql-trunk
    timestamp: Wed 2012-02-29 13:40:41 +0200
    message:
      Fix a compilation error of the non-debug build.
    ------------------------------------------------------------
    revno: 3698.1.2 [merge]
    committer: Manish Kumar<manish.4.kumar@oracle.com>
    branch nick: bug12400221
    timestamp: Tue 2012-02-28 16:27:17 +0530
    message:
      Upmerge from mysql-5.5 -> mysql-trunk
        ------------------------------------------------------------
        revno: 2875.347.3
        committer: Manish Kumar<manish.4.kumar@oracle.com>
        branch nick: mysql-5.5
        timestamp: Tue 2012-02-28 16:17:14 +0530
        message:
          BUG#13333431 - INCORRECT DEFAULT PORT IN 'SHOW SLAVE HOSTS' OUTPUT
          
          This is a post commit patch for failing test on windows.
        ------------------------------------------------------------
        revno: 2875.347.2 [merge]
        committer: Praveenkumar Hulakund <praveenkumar.hulakund@oracle.com>
        branch nick: mysql-5.5-new
        timestamp: Wed 2012-02-29 14:15:15 +0530
        message:
          Merge from 5.1 to  5.5
    ------------------------------------------------------------
    revno: 3698.1.1
    committer: Marko M?kel? <marko.makela@oracle.com>
    branch nick: mysql-trunk
    timestamp: Wed 2012-02-29 12:48:53 +0200
    message:
      Fix null pointer dereferencing in fulltext index creation debug code.
      
      DEBUG_SYNC_C_IF_THD(): Like DEBUG_SYNC_C(), but do nothing
      if the supplied THD (current_thd) is NULL. InnoDB full-text indexes
      are being inserted by a background thread.
      
      This fixes a failure of innodb_fts.innodb_fts_large_records
      in debug builds.
------------------------------------------------------------
revno: 3699
committer: Gleb Shchepa <gleb.shchepa@oracle.com>
branch nick: trunk
timestamp: Wed 2012-02-29 15:17:52 +0400
message:
  WL#5855: Print EXPLAIN in JSON format
  
  * New syntax has been added to output EXPLAIN in a structured form: EXPLAIN FORMAT=JSON
  
  * Traditional EXPLAIN output format has been modified:
    1. The "Extra" column:
       * metadata change:
         was not-nullable,
         from now it is nullable;
       * default value:
         was: empty string,
         from now: NULL
    2. The "ref" column:
       * default value:
         was: mix of empty string in one cases and NULL in others,
         from now: NULL
    3. The "partitions" column:
       * default value:
         was: empty string,
         from now: NULL
  
  * New system variable has been added: end_markers_in_json
  
  * The old optimizer_trace variable has been modified to not accept the "end_marker" parameter (moved to "end_markers_in_json").
  
  * New error message has been added: ER_UNKNOWN_EXPLAIN_FORMAT
  
  * mysqltest and MTR utilities have updated to accept a new command line parameter: --json-explain-protocol
------------------------------------------------------------
revno: 3698
committer: Manish Kumar<manish.4.kumar@oracle.com>
branch nick: bug12400221
timestamp: Tue 2012-02-28 15:45:29 +0530
message:
  BUG#13333431 - INCORRECT DEFAULT PORT IN 'SHOW SLAVE HOSTS' OUTPUT
  
  This is a post commit patch for the failing test on PB2.
------------------------------------------------------------
revno: 3697 [merge]
committer: Manish Kumar<manish.4.kumar@oracle.com>
branch nick: bug13333431
timestamp: Tue 2012-02-28 14:41:34 +0530
message:
  BUG#13333431 - INCORRECT DEFAULT PORT IN 'SHOW SLAVE HOSTS' OUTPUT
  
  Problem - The default port number shown in SHOW SLAVE HOSTS is always 3306 
            though the slave is actually listening on a different port number.
            This is a problem as the user can not be sure whether this port 
            value can be trusted and so client trying to read replication 
            topology can get confused.
  
  Fix - 3306 ceases to be the default value of report-port. Moreover report-port
        does not have a static default any longer.
        Instead we initialize report-port to 0 as the new default value and change
        it based on two checks :
  
        1) If report_port is not set, the slave reports the port number its listening 
           on. (i.e. if report-port is not set we get the actual value of the slave's 
           port number).
  
        2) If report-port is set, we show the value report-port is set to, as the slave's
           port number.
    ------------------------------------------------------------
    revno: 2875.347.1 [merge]
    committer: Manish Kumar<manish.4.kumar@oracle.com>
    branch nick: mysql-5.5
    timestamp: Tue 2012-02-28 14:02:27 +0530
    message:
      BUG#13333431 - INCORRECT DEFAULT PORT IN 'SHOW SLAVE HOSTS' OUTPUT
      
      Problem - The default port number shown in SHOW SLAVE HOSTS is always 3306 
                though the slave is actually listening on a different port number.
                This is a problem as the user can not be sure whether this port 
                value can be trusted and so client trying to read replication 
                topology can get confused.
      
      Fix - 3306 ceases to be the default value of report-port. Moreover report-port
            does not have a static default any longer.
            Instead we initialize report-port to 0 as the new default value and change
            it based on two checks :
      
            1) If report_port is not set, the slave reports the port number its listening 
               on. (i.e. if report-port is not set we get the actual value of the slave's 
               port number).
      
            2) If report-port is set, we show the value report-port is set to, as the slave's
               port number.
        ------------------------------------------------------------
        revno: 2875.346.1
        committer: chuck.bell@oracle.com
        branch nick: mysql-12969301
        timestamp: Thu 2011-12-15 16:16:48 -0500
        message:
          BUG#12969301 : mysql_plugin: enable is ignored if plugin exists
          
          This patch changes the mechanism by which the client enables a 
          plugin. Instead of using INSERT IGNORE to reload a plugin library,
          it now uses REPLACE INTO. This allows users to load a library
          multiple times replacing the existing values in the mysql.plugin
          table. This allows users to replace the symbol reference to a
          different dl name in the table. Thus permitting enabling of 
          multiple versions of the same library without first disabling
          the old version.
          
          A regression test was added to ensure this feature works.
------------------------------------------------------------
revno: 3696 [merge]
committer: Praveenkumar Hulakund <praveenkumar.hulakund@oracle.com>
branch nick: mysql-trunk-new
timestamp: Wed 2012-02-29 14:14:27 +0530
message:
  Merge from 5.5 to trunk (5.6)
    ------------------------------------------------------------
    revno: 2875.341.25 [merge]
    committer: Praveenkumar Hulakund <praveenkumar.hulakund@oracle.com>
    branch nick: mysql-5.5-new
    timestamp: Wed 2012-02-29 12:36:59 +0530
    message:
      Merge from 5.1 to  5.5
        ------------------------------------------------------------
        revno: 2661.831.1
        committer: Praveenkumar Hulakund <praveenkumar.hulakund@oracle.com>
        branch nick: mysql-5.1
        timestamp: Wed 2012-02-29 12:23:15 +0530
        message:
          Bug#12601974 - STORED PROCEDURE SQL_MODE=NO_BACKSLASH_ESCAPES IGNORED AND BREAKS REPLICATION
          
          Analysis:
          ========================
          sql_mode "NO_BACKSLASH_ESCAPES": When user want to use backslash as character input,
          instead of escape character in a string literal then sql_mode can be set to 
          "NO_BACKSLASH_ESCAPES". With this mode enabled, backslash becomes an ordinary 
          character like any other. 
          
          SQL_MODE set applies to the current client session. And while creating the stored 
          procedure, MySQL stores the current sql_mode and always executes the stored 
          procedure in sql_mode stored with the Procedure, regardless of the server SQL 
          mode in effect when the routine is invoked.  
          
          In the scenario (for which bug is reported), the routine is created with 
          sql_mode=NO_BACKSLASH_ESCAPES. And routine is executed with the invoker sql_mode
          is "" (NOT SET) by executing statement "call testp('Axel\'s')".
          Since invoker sql_mode is "" (NOT_SET), the '\' in 'Axel\'s'(argument to function)
          is considered as escape character and column "a" (of table "t1") values are 
          updated with "Axel's". The binary log generated for above update operation is as below,
          
            set sql_mode=XXXXXX (for no_backslash_escapes)
            update test.t1 set a= NAME_CONST('var',_latin1'Axel\'s' COLLATE 'latin1_swedish_ci');
          
          While logging stored procedure statements, the local variables (params) used in
          statements are replaced with the NAME_CONST(var_name, var_value) (Internal function) 
          (http://dev.mysql.com/doc/refman/5.6/en/miscellaneous-functions.html#function_name-const)
          
          On slave, these logs are applied. NAME_CONST is parsed to get the variable and its
          value. Since, stored procedure is created with sql_mode="NO_BACKSLASH_ESCAPES", the sql_mode
          is also logged in. So that at slave this sql_mode is set before executing the statements
          of routine.  So at slave, sql_mode is set to "NO_BACKSLASH_ESCAPES" and then while
          parsing NAME_CONST of string variable, '\' is considered as NON ESCAPE character
          and parsing reported error for "'" (as we have only one "'" no backslash). 
          
          At slave, parsing was proper with sql_mode "NO_BACKSLASH_ESCAPES".
          But above error reported while writing bin log, "'" (of Axel's) is escaped with
          "\" character. Actually, all special characters (n, r, ', ", \, 0...) are escaped
          while writing NAME_CONST for string variable(param, local variable) in bin log 
          Airrespective of "NO_BACKSLASH_ESCAPES" sql_mode. So, basically, the problem is 
          that logging string parameter does not take into account sql_mode value.
          
          Fix:
          ========================
          So when sql_mode is set to "NO_BACKSLASH_ESCAPES", escaping  characters as 
          (n, r, ', ", \, 0...) should be avoided. To do so, added a check to not to
          escape such characters while writing NAME_CONST for string variables in bin 
          log. 
          And when sql_mode is set to NO_BACKSLASH_ESCAPES, quote character "'" is
          represented as ''.
          http://dev.mysql.com/doc/refman/5.6/en/string-literals.html (There are several 
          ways to include quote characters within a string: )
------------------------------------------------------------
revno: 3695
committer: Jorgen Loland <jorgen.loland@oracle.com>
branch nick: mysql-trunk-fixwl5957
timestamp: Wed 2012-02-29 07:58:34 +0100
message:
  WL#5957 followup: Change meaning of eq_range_exceeds_limit 
                    variable
  
  Before:
  -------
  0..UINT_MAX-1  use statistics if there are x or more 
                 equality ranges
  UINT_MAX       off: don't use index statistics 
  
  Now:
  ----
  0              off: don't use index statistics
  1..UINT_MAX    use statistics if there are x or more equality 
                 ranges
------------------------------------------------------------
revno: 3694
committer: Christopher Powers <chris.powers@oracle.com>
branch nick: mysql-trunk
timestamp: Tue 2012-02-28 15:05:54 -0600
message:
  WL#5259 PERFORMANCE_SCHEMA HOST_CACHE
  
  Fixed FreeBSD build break
------------------------------------------------------------
revno: 3693
committer: Marko M?kel? <marko.makela@oracle.com>
branch nick: mysql-trunk
timestamp: Tue 2012-02-28 22:53:42 +0200
message:
  Fix nondeterministic test result.
------------------------------------------------------------
revno: 3692 [merge]
committer: Marko M?kel? <marko.makela@oracle.com>
branch nick: mysql-trunk
timestamp: Tue 2012-02-28 21:54:17 +0200
message:
  Merge mysql-5.5 to mysql-trunk.
    ------------------------------------------------------------
    revno: 2875.341.24 [merge]
    committer: Marko M?kel? <marko.makela@oracle.com>
    branch nick: mysql-5.5
    timestamp: Tue 2012-02-28 21:43:08 +0200
    message:
      Merge mysql-5.1 to mysql-5.5.
        ------------------------------------------------------------
        revno: 2661.830.8
        committer: Marko M?kel? <marko.makela@oracle.com>
        branch nick: mysql-5.1
        timestamp: Tue 2012-02-28 21:41:55 +0200
        message:
          Fix a mistake in the Bug#12861864 fix.
          
          row_drop_table_for_mysql(): Really flag the indexes unavailable before
          starting to drop the table.
------------------------------------------------------------
revno: 3691
committer: Marko M?kel? <marko.makela@oracle.com>
branch nick: mysql-trunk
timestamp: Tue 2012-02-28 17:37:26 +0200
message:
  Restrict innodb-blob.test for 16k page size.
------------------------------------------------------------
revno: 3690 [merge]
committer: Marc Alff <marc.alff@oracle.com>
branch nick: mysql-trunk-merge
timestamp: Tue 2012-02-28 14:32:35 +0100
message:
  WL#5259 PERFORMANCE_SCHEMA HOST_CACHE
  
  Merge of performance_schema.host_cache (mysql-trunk-wl5259) to mysql-trunk.
  
  This feature is also related to:
  
  MySQL Bug#22821  Adding "SHOW HOST_CACHE" patch from Jeremy Cole
  Bug#11746048 - 22821: ADDING "SHOW HOST_CACHE" PATCH FROM JEREMY COLE
  
  MySQL Bug#24906  No command to monitor blocked hosts
  Bug#11746269 - 24906: NO COMMAND TO MONITOR BLOCKED HOSTS
  
  MySQL Bug#45817  Please add SHOW command for inc_host_errors(max_connect_errors)
  Bug#11754244 - 45817: PLEASE ADD SHOW COMMAND FOR INC_HOST_ERRORS(MAX_CONNECT_ERRORS)
  
  MySQL Bug#59404  More info from host cache
  Bug#11766316 - 59404: MORE INFO FROM HOST CACHE
    ------------------------------------------------------------
    revno: 3331.1.61 [merge]
    committer: Marc Alff <marc.alff@oracle.com>
    branch nick: mysql-trunk-wl5259
    timestamp: Tue 2012-02-28 12:07:43 +0100
    message:
      Merge mysql-trunk --> mysql-trunk-wl5259
    ------------------------------------------------------------
    revno: 3331.1.60 [merge]
    committer: Christopher Powers <chris.powers@oracle.com>
    branch nick: base_mysql-trunk-wl5259
    timestamp: Thu 2012-02-23 19:03:48 -0600
    message:
      local merge
        ------------------------------------------------------------
        revno: 3331.3.1 [merge]
        committer: Marc Alff <marc.alff@oracle.com>
        branch nick: mysql-trunk-wl5259
        timestamp: Fri 2012-02-24 00:47:40 +0100
        message:
          Merge mysql-trunk --> mysql-trunk-wl5259
    ------------------------------------------------------------
    revno: 3331.1.59
    committer: Christopher Powers <chris.powers@oracle.com>
    branch nick: mysql-trunk-wl5259
    timestamp: Thu 2012-02-23 18:57:57 -0600
    message:
      WL#5259 PERFORMANCE SCHEMA, host cache
      
      Fixed timestamp bug
    ------------------------------------------------------------
    revno: 3331.1.58 [merge]
    committer: Marc Alff <marc.alff@oracle.com>
    branch nick: mysql-trunk-wl5259
    timestamp: Wed 2012-02-22 17:44:55 +0100
    message:
      Merge mysql-trunk --> mysql-trunk-wl5259
    ------------------------------------------------------------
    revno: 3331.1.57 [merge]
    committer: Christopher Powers <chris.powers@oracle.com>
    branch nick: base_mysql-trunk-wl5259
    timestamp: Mon 2012-02-20 15:23:20 -0600
    message:
      local merge
        ------------------------------------------------------------
        revno: 3331.2.1 [merge]
        committer: Marc Alff <marc.alff@oracle.com>
        branch nick: mysql-trunk-wl5259
        timestamp: Mon 2012-02-20 17:44:07 +0100
        message:
          Merge mysql-trunk --> mysql-trunk-wl5259
    ------------------------------------------------------------
    revno: 3331.1.56
    committer: Christopher Powers <chris.powers@oracle.com>
    branch nick: mysql-trunk-wl5259
    timestamp: Mon 2012-02-20 15:10:16 -0600
    message:
      WL#5259 PERFORMANCE_SCHEMA host cache
      
      Change table_host_cache::materialize() to handle circularly linked host cache.
    ------------------------------------------------------------
    revno: 3331.1.55
    committer: Christopher Powers <chris.powers@oracle.com>
    branch nick: mysql-trunk-wl5259
    timestamp: Mon 2012-02-20 14:55:15 -0600
    message:
      WL#5259 PERFORMANCE_SCHEMA host cache
      
      Change table_host_cache::materialize() to handle circularly linked host cache
    ------------------------------------------------------------
    revno: 3331.1.54
    committer: Marc Alff <marc.alff@oracle.com>
    branch nick: mysql-trunk-wl5259
    timestamp: Mon 2012-02-20 12:11:30 +0100
    message:
      Simplified test output
    ------------------------------------------------------------
    revno: 3331.1.53
    committer: Marc Alff <marc.alff@oracle.com>
    branch nick: mysql-trunk-wl5259
    timestamp: Thu 2012-02-16 11:47:43 +0100
    message:
      Test cleanup
    ------------------------------------------------------------
    revno: 3331.1.52 [merge]
    committer: Marc Alff <marc.alff@oracle.com>
    branch nick: mysql-trunk-wl5259
    timestamp: Thu 2012-02-16 11:36:35 +0100
    message:
      Merge mysql-trunk --> mysql-trunk-wl5259
    ------------------------------------------------------------
    revno: 3331.1.51
    committer: Marc Alff <marc.alff@oracle.com>
    branch nick: mysql-trunk-wl5259
    timestamp: Wed 2012-02-15 13:05:06 +0100
    message:
      More test cases
    ------------------------------------------------------------
    revno: 3331.1.50 [merge]
    committer: Marc Alff <marc.alff@oracle.com>
    branch nick: mysql-trunk-wl5259
    timestamp: Wed 2012-02-15 09:52:48 +0100
    message:
      Merge mysql-trunk --> mysql-trunk-wl5259
    ------------------------------------------------------------
    revno: 3331.1.49
    committer: Marc Alff <marc.alff@oracle.com>
    branch nick: mysql-trunk-wl5259
    timestamp: Tue 2012-02-14 10:42:07 +0100
    message:
      Timestamps changed to use a precision to the second only.
    ------------------------------------------------------------
    revno: 3331.1.48 [merge]
    committer: Marc Alff <marc.alff@oracle.com>
    branch nick: mysql-trunk-wl5259
    timestamp: Tue 2012-02-14 10:03:26 +0100
    message:
      Merge mysql-trunk --> mysql-trunk-wl5259
    ------------------------------------------------------------
    revno: 3331.1.47 [merge]
    committer: Marc Alff <marc.alff@oracle.com>
    branch nick: mysql-trunk-wl5259
    timestamp: Mon 2012-02-13 10:54:48 +0100
    message:
      Merge mysql-trunk --> mysql-trunk-wl5259
    ------------------------------------------------------------
    revno: 3331.1.46
    committer: Marc Alff <marc.alff@oracle.com>
    branch nick: mysql-trunk-wl5259
    timestamp: Wed 2012-02-08 16:55:31 +0100
    message:
      Renaming due to review comments
    ------------------------------------------------------------
    revno: 3331.1.45 [merge]
    committer: Marc Alff <marc.alff@oracle.com>
    branch nick: mysql-trunk-wl5259
    timestamp: Wed 2012-02-08 15:27:40 +0100
    message:
      Merge mysql-trunk --> mysql-trunk-wl5259
    ------------------------------------------------------------
    revno: 3331.1.44 [merge]
    committer: Marc Alff <marc.alff@oracle.com>
    branch nick: mysql-trunk-wl5259
    timestamp: Tue 2012-02-07 15:36:57 +0100
    message:
      Merge mysql-trunk --> mysql-trunk-wl5259
    ------------------------------------------------------------
    revno: 3331.1.43
    committer: Marc Alff <marc.alff@oracle.com>
    branch nick: mysql-trunk-wl5259
    timestamp: Tue 2012-02-07 15:35:13 +0100
    message:
      Plugin API improvements, for column AUTH_PLUGIN
    ------------------------------------------------------------
    revno: 3331.1.42 [merge]
    committer: Marc Alff <marc.alff@oracle.com>
    branch nick: mysql-trunk-wl5259
    timestamp: Mon 2012-02-06 10:49:52 +0100
    message:
      Merge mysql-trunk --> mysql-trunk-wl5259, test cleanup
    ------------------------------------------------------------
    revno: 3331.1.41
    committer: Marc Alff <marc.alff@oracle.com>
    branch nick: mysql-trunk-wl5259
    timestamp: Mon 2012-02-06 10:13:43 +0100
    message:
      Misc cleanup
    ------------------------------------------------------------
    revno: 3331.1.40 [merge]
    committer: Marc Alff <marc.alff@oracle.com>
    branch nick: mysql-trunk-wl5259
    timestamp: Fri 2012-02-03 14:18:12 +0100
    message:
      Merge mysql-trunk --> mysql-trunk-wl5259
    ------------------------------------------------------------
    revno: 3331.1.39
    committer: Marc Alff <marc.alff@oracle.com>
    branch nick: mysql-trunk-wl5259
    timestamp: Thu 2012-02-02 19:37:22 +0100
    message:
      Work in progress
    ------------------------------------------------------------
    revno: 3331.1.38 [merge]
    committer: Marc Alff <marc.alff@oracle.com>
    branch nick: mysql-trunk-wl5259
    timestamp: Thu 2012-02-02 10:46:59 +0100
    message:
      Merge mysql-trunk --> mysql-trunk-wl5259
    ------------------------------------------------------------
    revno: 3331.1.37 [merge]
    committer: Marc Alff <marc.alff@oracle.com>
    branch nick: mysql-trunk-wl5259
    timestamp: Wed 2012-02-01 19:26:21 +0100
    message:
      Merge mysql-trunk --> mysql-trunk-wl5259
    ------------------------------------------------------------
    revno: 3331.1.36
    committer: Marc Alff <marc.alff@oracle.com>
    branch nick: mysql-trunk-wl5259
    timestamp: Wed 2012-02-01 18:24:09 +0100
    message:
      Work in progress
    ------------------------------------------------------------
    revno: 3331.1.35 [merge]
    committer: Marc Alff <marc.alff@oracle.com>
    branch nick: mysql-trunk-wl5259
    timestamp: Tue 2012-01-31 10:23:16 +0100
    message:
      Merge mysql-trunk --> mysql-trunk-wl5259
    ------------------------------------------------------------
    revno: 3331.1.34
    committer: Marc Alff <marc.alff@oracle.com>
    branch nick: mysql-trunk-wl5259
    timestamp: Mon 2012-01-30 20:03:41 +0100
    message:
      Fixed blocked hosts, added tests
    ------------------------------------------------------------
    revno: 3331.1.33 [merge]
    committer: Marc Alff <marc.alff@oracle.com>
    branch nick: mysql-trunk-wl5259
    timestamp: Mon 2012-01-30 11:59:40 +0100
    message:
      Merge mysql-trunk --> mysql-trunk-wl5259
    ------------------------------------------------------------
    revno: 3331.1.32
    committer: Marc Alff <marc.alff@oracle.com>
    branch nick: mysql-trunk-wl5259
    timestamp: Mon 2012-01-30 11:39:47 +0100
    message:
      work in progress, tests
    ------------------------------------------------------------
    revno: 3331.1.31
    committer: Marc Alff <marc.alff@oracle.com>
    branch nick: mysql-trunk-wl5259
    timestamp: Fri 2012-01-27 13:14:54 +0100
    message:
      Test cleanup
    ------------------------------------------------------------
    revno: 3331.1.30 [merge]
    committer: Marc Alff <marc.alff@oracle.com>
    branch nick: mysql-trunk-wl5259
    timestamp: Thu 2012-01-26 11:20:10 +0100
    message:
      Merge mysql-trunk --> mysql-trunk-wl5259
    ------------------------------------------------------------
    revno: 3331.1.29
    committer: Marc Alff <marc.alff@oracle.com>
    branch nick: mysql-trunk-wl5259
    timestamp: Thu 2012-01-26 11:10:55 +0100
    message:
      Work in progress
    ------------------------------------------------------------
    revno: 3331.1.28
    committer: Marc Alff <marc.alff@oracle.com>
    branch nick: mysql-trunk-wl5259
    timestamp: Tue 2012-01-24 12:36:34 +0100
    message:
      Work in progress
    ------------------------------------------------------------
    revno: 3331.1.27 [merge]
    committer: Marc Alff <marc.alff@oracle.com>
    branch nick: mysql-trunk-wl5259
    timestamp: Mon 2012-01-23 16:45:22 +0100
    message:
      Merge mysql-trunk --> mysql-trunk-wl5259
    ------------------------------------------------------------
    revno: 3331.1.26
    committer: Marc Alff <marc.alff@oracle.com>
    branch nick: mysql-trunk-wl5259
    timestamp: Fri 2012-01-20 12:57:26 +0100
    message:
      Added time columns
    ------------------------------------------------------------
    revno: 3331.1.25
    committer: Marc Alff <marc.alff@oracle.com>
    branch nick: mysql-trunk-wl5259
    timestamp: Fri 2012-01-20 09:32:13 +0100
    message:
      Fixed windows XP build breaks
    ------------------------------------------------------------
    revno: 3331.1.24 [merge]
    committer: Marc Alff <marc.alff@oracle.com>
    branch nick: mysql-trunk-wl5259
    timestamp: Fri 2012-01-20 08:31:47 +0100
    message:
      Merge mysql-trunk --> mysql-trunk-wl5259
    ------------------------------------------------------------
    revno: 3331.1.23
    committer: Marc Alff <marc.alff@oracle.com>
    branch nick: mysql-trunk-wl5259
    timestamp: Thu 2012-01-19 17:02:32 +0100
    message:
      Fixed windows build breaks
    ------------------------------------------------------------
    revno: 3331.1.22
    committer: Marc Alff <marc.alff@oracle.com>
    branch nick: mysql-trunk-wl5259
    timestamp: Wed 2012-01-18 11:25:19 +0100
    message:
      Fixed test cases for IPv6
    ------------------------------------------------------------
    revno: 3331.1.21 [merge]
    committer: Marc Alff <marc.alff@oracle.com>
    branch nick: mysql-trunk-wl5259
    timestamp: Tue 2012-01-17 17:30:14 +0100
    message:
      Merge mysql-trunk --> mysql-trunk-wl5259
    ------------------------------------------------------------
    revno: 3331.1.20 [merge]
    committer: Marc Alff <marc.alff@oracle.com>
    branch nick: mysql-trunk-wl5259
    timestamp: Tue 2012-01-17 15:44:32 +0100
    message:
      Merge + work in progress
    ------------------------------------------------------------
    revno: 3331.1.19
    committer: Marc Alff <marc.alff@oracle.com>
    branch nick: mysql-trunk-wl5259
    timestamp: Tue 2012-01-17 14:48:50 +0100
    message:
      Work in progress
    ------------------------------------------------------------
    revno: 3331.1.18
    committer: Marc Alff <marc.alff@oracle.com>
    branch nick: mysql-trunk-wl5259
    timestamp: Tue 2012-01-17 09:31:24 +0100
    message:
      Work in progress
    ------------------------------------------------------------
    revno: 3331.1.17 [merge]
    committer: Marc Alff <marc.alff@oracle.com>
    branch nick: mysql-trunk-wl5259
    timestamp: Mon 2012-01-16 10:13:08 +0100
    message:
      Merge mysql-trunk --> mysql-trunk-wl5259
    ------------------------------------------------------------
    revno: 3331.1.16
    committer: Marc Alff <marc.alff@oracle.com>
    branch nick: mysql-trunk-wl5259
    timestamp: Mon 2012-01-16 10:02:11 +0100
    message:
      Whitespace
    ------------------------------------------------------------
    revno: 3331.1.15 [merge]
    committer: Marc Alff <marc.alff@oracle.com>
    branch nick: mysql-trunk-wl5259
    timestamp: Fri 2012-01-13 11:54:10 +0100
    message:
      Merge mysql-trunk --> mysql-trunk-wl5259
    ------------------------------------------------------------
    revno: 3331.1.14
    committer: Marc Alff <marc.alff@oracle.com>
    branch nick: mysql-trunk-wl5259
    timestamp: Fri 2012-01-13 11:07:52 +0100
    message:
      Fixed solaris crash
    ------------------------------------------------------------
    revno: 3331.1.13
    committer: Marc Alff <marc.alff@oracle.com>
    branch nick: mysql-trunk-wl5259
    timestamp: Tue 2012-01-10 22:02:53 +0100
    message:
      Testing in progress, continued
    ------------------------------------------------------------
    revno: 3331.1.12 [merge]
    committer: Marc Alff <marc.alff@oracle.com>
    branch nick: mysql-trunk-wl5259
    timestamp: Tue 2012-01-10 10:37:34 +0100
    message:
      Merge mysql-trunk --> mysql-trunk-wl5259
    ------------------------------------------------------------
    revno: 3331.1.11
    committer: Marc Alff <marc.alff@oracle.com>
    branch nick: mysql-trunk-wl5259
    timestamp: Tue 2012-01-10 10:35:16 +0100
    message:
      Testing, in progress
    ------------------------------------------------------------
    revno: 3331.1.10 [merge]
    committer: Marc Alff <marc.alff@oracle.com>
    branch nick: mysql-trunk-wl5259
    timestamp: Mon 2012-01-09 10:08:26 +0100
    message:
      Merge mysql-trunk --> mysql-trunk-wl5259
    ------------------------------------------------------------
    revno: 3331.1.9
    committer: Marc Alff <marc.alff@oracle.com>
    branch nick: mysql-trunk-wl5259
    timestamp: Mon 2012-01-09 10:07:34 +0100
    message:
      Work in progress
    ------------------------------------------------------------
    revno: 3331.1.8 [merge]
    committer: Marc Alff <marc.alff@oracle.com>
    branch nick: mysql-trunk-wl5259
    timestamp: Fri 2012-01-06 11:00:53 +0100
    message:
      Merge mysql-trunk --> mysql-trunk-wl5259
    ------------------------------------------------------------
    revno: 3331.1.7
    committer: Marc Alff <marc.alff@oracle.com>
    branch nick: mysql-trunk-wl5259
    timestamp: Fri 2012-01-06 10:52:43 +0100
    message:
      Work in progress
    ------------------------------------------------------------
    revno: 3331.1.6 [merge]
    committer: Marc Alff <marc.alff@oracle.com>
    branch nick: mysql-trunk-wl5259
    timestamp: Mon 2012-01-02 11:37:56 +0100
    message:
      Merge mysql-trunk --> mysql-trunk-wl5259
    ------------------------------------------------------------
    revno: 3331.1.5
    committer: Marc Alff <marc.alff@oracle.com>
    branch nick: mysql-trunk-wl5259
    timestamp: Thu 2011-08-11 13:25:37 +0200
    message:
      Fixed windows build break
    ------------------------------------------------------------
    revno: 3331.1.4 [merge]
    committer: Marc Alff <marc.alff@oracle.com>
    branch nick: mysql-trunk-wl5259
    timestamp: Thu 2011-08-11 13:10:14 +0200
    message:
      Merge mysql-trunk --> mysql-trunk-wl5259
    ------------------------------------------------------------
    revno: 3331.1.3
    committer: Marc Alff <marc.alff@oracle.com>
    branch nick: mysql-trunk-wl5259
    timestamp: Wed 2011-08-03 19:33:10 +0200
    message:
      Misc cleanup
    ------------------------------------------------------------
    revno: 3331.1.2
    committer: Marc Alff <marc.alff@oracle.com>
    branch nick: mysql-trunk-wl5259
    timestamp: Tue 2011-08-02 19:17:18 +0200
    message:
      WL#5259 PERFORMANCE SCHEMA HOST_CACHE
      
      Work in progress
    ------------------------------------------------------------
    revno: 3331.1.1
    committer: Marc Alff <marc.alff@oracle.com>
    branch nick: mysql-trunk-wl5259
    timestamp: Tue 2011-08-02 19:14:40 +0200
    message:
      New branch for WL#5259
------------------------------------------------------------
revno: 3689 [merge]
committer: Marko M?kel? <marko.makela@oracle.com>
branch nick: mysql-trunk
timestamp: Tue 2012-02-28 14:25:03 +0200
message:
  Merge mysql-5.5 to mysql-trunk.
    ------------------------------------------------------------
    revno: 2875.341.23 [merge]
    committer: Marko M?kel? <marko.makela@oracle.com>
    branch nick: mysql-5.5
    timestamp: Tue 2012-02-28 14:04:21 +0200
    message:
      Merge mysql-5.1 to mysql-5.5.
        ------------------------------------------------------------
        revno: 2661.830.7
        committer: Marko M?kel? <marko.makela@oracle.com>
        branch nick: mysql-5.1
        timestamp: Tue 2012-02-28 14:00:00 +0200
        message:
          Bug#12861864 RACE CONDITION IN BTR_GET_SIZE() AND DROP INDEX/TABLE/DATABASE
          also filed as Bug#13146269, Bug#13713178
          
          btr_get_size(): Add mtr_t parameter. Require that the caller S-latches
          index->lock. If index->page==FIL_NULL or the index is to be dropped,
          return ULINT_UNDEFINED to indicate that the statistics are
          unavailable.
          
          dict_update_statistics(): If btr_get_size() returns ULINT_UNDEFINED,
          fake the index cardinality statistics.
          
          dict_index_set_page(): Unused function, remove.
          
          row_drop_table_for_mysql(): Before starting to drop the table, mark
          the indexes unavailable in the data dictionary cache while holding
          index->lock X-latch.
          
          ha_innobase::prepare_drop_index(), ha_innobase::final_drop_index():
          When setting index->to_be_dropped, acquire the index->lock X-latch.
          
          rb:960 approved by Jimmy Yang
------------------------------------------------------------
revno: 3688
committer: Bjorn Munch <bjorn.munch@oracle.com>
branch nick: main-tr
timestamp: Tue 2012-02-28 13:18:13 +0100
message:
  We are seeing occasional 3 hour hangs when mtr tries (in vain) to run cdb
  after the server has crashed on Windows.
  Not being able to reproduce the hang manually, so adding a few debug print
  statements to try and pinpoint where the hang happens.
  
  These will be removed again once we've seen another hang.
------------------------------------------------------------
revno: 3687
committer: Alfranio Correia <alfranio.correia@oracle.com>
branch nick: mysql-trunk
timestamp: Tue 2012-02-28 12:04:45 +0000
message:
  Fixed some warning messages on windows and solaris platform after WL#3584.
------------------------------------------------------------
revno: 3686
committer: Hemant Kumar <hemant.hk.kumar@oracle.com>
branch nick: mysql-trunk
timestamp: Tue 2012-02-28 16:51:06 +0530
message:
  Disabling test cases from partition suite for one day daily run(in order to invesitage for valgrind timeout issue).
------------------------------------------------------------
revno: 3685 [merge]
committer: Luis Soares <luis.soares@oracle.com>
branch nick: mysql-trunk
timestamp: Tue 2012-02-28 09:07:06 +0000
message:
  Automerge into latest mysql-trunk.
    ------------------------------------------------------------
    revno: 3683.1.1
    committer: Luis Soares <luis.soares@oracle.com>
    branch nick: mysql-trunk
    timestamp: Tue 2012-02-28 01:21:24 +0000
    message:
      WL#3584
      
      Fix for rpl_gtid_mode.test wich fails in innodb_page_size=4K and in
      innodb_page_size=8K collections. 
      
      The test stops and starts the server manually, but it does not set
      the innodb_page_size correctly. Thus when restarting the server without
      specifying the page size that was used before stopping the server,
      makes the test case fail when the page size was different from the 
      default value.
      
      We fix this by including in the options passed to the mysqld, at restart
      time, the original value of innodb_page_size.
------------------------------------------------------------
revno: 3684
committer: Roy Lyseng <roy.lyseng@oracle.com>
branch nick: mysql-sb2
timestamp: Tue 2012-02-28 09:56:44 +0100
message:
  Bug#13727407: Assert !item->const_item() || !item->not_null_tables()
  
  This crash occurs due to a debug assert added with the refactoring
  patch roy.lyseng@oracle.com-20120208103337-erih8suhz4ndfwr1
  (Refactoring: Remove member and_tables_cache of Item_cond).
  
  The assert checks that not_null_tables() is always empty for an item
  that is const. This is true, however if we look at the documentation
  for not_null_tables() in item.h, it says "As this is only used in the
  beginning of optimization, the value don't have to be updated in
  update_used_tables()". Thus, we may have a situation in a late
  optimization phase where const_item() is updated but not_null_tables()
  is not.
  
  We have therefore decided to remove the assert.
  There are also other options:
  - AND not_null_tables() with used_tables() in the assert, as
    not_null_tables() is always a subset of used_tables(), and
    used_tables() is always kept up-to-date, or
  - make sure that not_null_tables() is always kept up-to-date.
  
  However, we decided that none of these options were worthwhile.
  
  mysql-test/include/subquery_mat.inc
    Added test case for bug#13727407.
  
  mysql-test/r/subquery_mat.result
  mysql-test/r/subquery_mat_all.result
  mysql-test/r/subquery_mat_none.result
    Added test case results for bug#13727407.
  
  sql/item_cmpfunc.cc
    Removed assert that does not hold at all times.
------------------------------------------------------------
revno: 3683 [merge]
committer: Marko M?kel? <marko.makela@oracle.com>
branch nick: mysql-trunk
timestamp: Mon 2012-02-27 23:28:20 +0200
message:
  Merge mysql-5.5 to mysql-trunk.
    ------------------------------------------------------------
    revno: 2875.341.22 [merge]
    committer: Marko M?kel? <marko.makela@oracle.com>
    branch nick: mysql-5.5
    timestamp: Mon 2012-02-27 23:24:36 +0200
    message:
      Merge mysql-5.1 to mysql-5.5.
        ------------------------------------------------------------
        revno: 2661.830.6
        committer: Marko M?kel? <marko.makela@oracle.com>
        branch nick: mysql-5.1
        timestamp: Mon 2012-02-27 23:19:14 +0200
        message:
          Remove a bogus BLOB debug assertion that was added in Bug#13721257 fix.
------------------------------------------------------------
revno: 3682
committer: Alexander Barkov <alexander.barkov@oracle.com>
branch nick: mysql-trunk.wl946cleanup
timestamp: Mon 2012-02-27 20:48:05 +0400
message:
       A clean up patch for WL#946:
        
        - Removing Item_typecast, as it's not needed any more.
          Before WL#946 it was a common parent for Item_char_typecast,
          Item_date_typecast, Item_time_typecast and Item_datetime_typecast.
          Now casts to the temporal types descend from the corresponding
          Item_{date|time|datetime}_func.
          Making Item_char_typecast descend from Item_str_func directly
        
        - Moving Item_char_typecast
          from item_timefunc.cc and item_timefunc.h
          to item_strfunc.cc and item_strfunc.h (finally!!!).
        
          These methods have been moved AS IS (cut and paste):
            Item_char_typecast::eq()
            Item_char_typecast::print()
            Item_char_typecast::val_str()
        
          The method Item_char_typecast::fix_length_and_dec()
          has had some slight changes:
        
          a. in how "from_cs" variable is initialized.
          Now we check args[0]->collation.repertoire instead of 
          args[0]->result_type(). This helps to avoid character set conversion
          in more cases.
        
          b. in how max_length is calculated. Instead of direct access to max_length,
          now we use methods max_char_length() and fix_char_length() introduced
          by WL#2649 Number-to-string conversions.
        
        - Fixing that Item_sp_varianble and Item_named_const did not
          initialize their collation.repertoire properly
          (only collation.collation and collation.derivation were initialized).
        
          This flaws were found by adding this code into 
          Item_char_typecast::fix_length_and_dec() temporary and running mtr:
        
          if (args[0]->result_type() == INT_RESULT || 
              args[0]->result_type() == DECIMAL_RESULT ||
              args[0]->result_type() == REAL_RESULT)
          {
            DBUG_ASSERT(args[0]->collation.collation == &my_charset_numeric);
            DBUG_ASSERT(args[0]->collation.repertoire == MY_REPERTOIRE_ASCII);
          }
        
        - Recording ctype_cp1251.result and ctype_utf8.result,
          caused by initializing Item_sp_variable::collation.repertoire properly.
------------------------------------------------------------
revno: 3681
committer: Hemant Kumar <hemant.hk.kumar@oracle.com>
branch nick: mysql-trunk
timestamp: Mon 2012-02-27 18:59:06 +0530
message:
  Sven Sandberg changed how the test utility include/show_binlog_events.inc works, so it now produces slightly different output.I have changed the test result file to incorporate his changes.
------------------------------------------------------------
revno: 3680 [merge]
committer: Guilhem Bichot <guilhem.bichot@oracle.com>
branch nick: trunk
timestamp: Mon 2012-02-27 12:36:40 +0100
message:
  merge from trunk
    ------------------------------------------------------------
    revno: 3677.1.2
    committer: Sven Sandberg <sven.sandberg@oracle.com>
    branch nick: trunk-wl3584-1
    timestamp: Mon 2012-02-27 12:01:04 +0100
    message:
      BUG#13783525 - Code cleanup after WL#3584
       - rename GTId, GTid -> GTID
       - rename group -> GTID in one error message (mysqld.cc)
       - remove external declaration of non-existing variable (set_var.h)
    ------------------------------------------------------------
    revno: 3677.1.1 [merge]
    committer: Mattias Jonsson <mattias.jonsson@oracle.com>
    branch nick: wl4305-push
    timestamp: Mon 2012-02-27 11:30:42 +0100
    message:
      WL#4305 merge into mysql-trunk
        ------------------------------------------------------------
        revno: 3674.1.2
        committer: Mattias Jonsson <mattias.jonsson@oracle.com>
        branch nick: wl4305-trunk_4
        timestamp: Sat 2012-02-25 14:38:41 +0100
        message:
          WL#4305
          Removed branch specific test collection
        ------------------------------------------------------------
        revno: 3674.1.1 [merge]
        committer: Mattias Jonsson <mattias.jonsson@oracle.com>
        branch nick: wl4305-trunk_4
        timestamp: Fri 2012-02-24 21:31:53 +0100
        message:
          WL#4305 merge with latest mysql-trunk
            ------------------------------------------------------------
            revno: 3402.77.2
            committer: Mattias Jonsson <mattias.jonsson@oracle.com>
            branch nick: wl4305-trunk_3
            timestamp: Fri 2012-02-24 21:24:34 +0100
            message:
              WL#4305 changes according to review of partitioning code.
              
              renamed _storage to _ref, since it was references.
              
              moved allocations from Parts_share_refs constructor
              to separate init function.
              
              Changed handler::ha_share to be private
              Not doing any locking in get/set_ha_share_ptr,
              but only asserting lock exists in debug.
              
              updated copyright year on touched files.
            ------------------------------------------------------------
            revno: 3402.77.1 [merge]
            committer: Mattias Jonsson <mattias.jonsson@oracle.com>
            branch nick: wl4305-trunk_3
            timestamp: Fri 2012-02-17 11:43:24 +0100
            message:
              WL#4305 - merge with updated mysql-trunk
              Added mysql-trunk-wl4305.push test collection which is
              a copy of default.push + partitions-big-debug from
              default.weekly
                ------------------------------------------------------------
                revno: 3402.68.3
                committer: Mattias Jonsson <mattias.jonsson@oracle.com>
                branch nick: wl4305-trunk_2
                timestamp: Thu 2012-02-16 22:32:23 +0100
                message:
                  WL#4305 merge fix of ha_archive::optimize(), removed duplicate mutex unlocked.
                ------------------------------------------------------------
                revno: 3402.68.2 [merge]
                committer: Mattias Jonsson <mattias.jonsson@oracle.com>
                branch nick: wl4305-trunk_2
                timestamp: Thu 2012-02-16 21:34:20 +0100
                message:
                  WL#4305: storage-engine private data area per physical table
                  
                  Approved patch merged with updated -trunk.
                    ------------------------------------------------------------
                    revno: 3402.76.4
                    committer: Mattias Jonsson <mattias.jonsson@oracle.com>
                    branch nick: wl4305-trunk
                    timestamp: Thu 2012-02-16 20:29:34 +0100
                    message:
                      WL#4305 - Final update of reviewers comments.
                    ------------------------------------------------------------
                    revno: 3402.76.3
                    committer: Mattias Jonsson <mattias.jonsson@oracle.com>
                    branch nick: wl4305-trunk
                    timestamp: Wed 2012-02-15 10:47:19 +0100
                    message:
                      WL#4305 - minor change.
                      
                      Removal of premature optimization.
                    ------------------------------------------------------------
                    revno: 3402.76.2
                    committer: Mattias Jonsson <mattias.jonsson@oracle.com>
                    branch nick: wl4305-trunk
                    timestamp: Tue 2012-02-14 13:35:37 +0100
                    message:
                      WL#4305 - update according to first reviewers comments.
                      
                      Moved variables and code to ha_partition.cc, since it was only used there.
                      
                      Removed the use of use_count in Archive_share.
                      Added ha_archive::extra to allow rename of archive tables/partitions
                      on windows.
                      Forwarding HA_EXTRA_PREPARE_FOR_RENAME and
                      HA_EXTRA_FORCE_REOPEN in ha_partition to all engines except
                      InnoDB.
                      
                      Also moved read_v1_metafile from ha_archive to Archive_share.
                      
                      reverted the change of ha_archive::destroy_record_buffer().
                    ------------------------------------------------------------
                    revno: 3402.76.1 [merge]
                    committer: Mattias Jonsson <mattias.jonsson@oracle.com>
                    branch nick: topush-trunk-wl4305
                    timestamp: Fri 2012-02-03 13:27:25 +0100
                    message:
                      WL#4305
                      
                      Updated with latest mysql-trunk
                        ------------------------------------------------------------
                        revno: 3402.49.4
                        committer: Mattias Jonsson <mattias.jonsson@oracle.com>
                        branch nick: wl4305-trunk
                        timestamp: Wed 2012-01-25 10:58:50 +0100
                        message:
                          WL#4305
                          
                          Updated according to second review comments.
                        ------------------------------------------------------------
                        revno: 3402.49.3 [merge]
                        committer: Mattias Jonsson <mattias.jonsson@oracle.com>
                        branch nick: wl4305-trunk_update
                        timestamp: Fri 2012-01-06 13:33:31 +0100
                        message:
                          WL#4305 - Merge with more recent mysql-trunk
                            ------------------------------------------------------------
                            revno: 3402.75.1 [merge]
                            committer: Mattias Jonsson <mattias.jonsson@oracle.com>
                            branch nick: topush-trunk-wl4305
                            timestamp: Mon 2012-01-02 15:36:59 +0100
                            message:
                              WL#4305
                              
                              Updated with latest -trunk
                                ------------------------------------------------------------
                                revno: 3402.74.2
                                committer: Mattias Jonsson <mattias.jonsson@oracle.com>
                                branch nick: wl4305-trunk
                                timestamp: Tue 2011-12-06 13:15:52 +0100
                                message:
                                  WL#4305 fix for valgrind warnings in archive storage engine.
                                  
                                  Instead of mutiple statements for setting things to 0,
                                  now memset'ing the whole struct to 0 at once.
                                  It should be more effective and also always sets
                                  longest/shortest_row to 0 on open.
                                ------------------------------------------------------------
                                revno: 3402.74.1
                                committer: Mattias Jonsson <mattias.jonsson@oracle.com>
                                branch nick: wl4305-trunk
                                timestamp: Fri 2011-12-02 10:05:28 +0100
                                message:
                                  WL#4305 - storage-engine private data area per physical table
                                  
                                  Implementing WL#4305 on the TABLE_SHARE and the handler class,
                                  including the engines partitioning, InnoDB, Archive and Example.
                                  
                                  Archive, InnoDB and Example is very similar, only differs in the
                                  engine specific data.
                                  
                                  Partitioning is similar, but extended with creating storage space for
                                  each partition.
                                  
                                  The main idea is to have a Handler_share class, which all engines can
                                  inherit and add their own shared data to.
                                  
                                  A pointer to the table's Handler_share is added to the TABLE_SHARE.
                                  And given to the engine right after it has been created with get_new_handler.
                                  If the TABLE_SHARE is given, then it must also call set_ha_share_storage
                                  with a pointer to the TABLE_SHARE::ha_share. For partitions handlers
                                  it is called by the partition handler pointing out an area in the Partition_share.
                                  
                                  The partitioning alter code has been changed to not use a temporary
                                  TABLE_SHARE, but instead use the original one to enforce only having
                                  one TABLE_SHARE per table. The new/temporary partitions are given
                                  a ha_share area within the partitioning handler, since they will only
                                  last as long as the statement and the handler will be destroyed in the end
                                  of the statement.
                                  Due to this change some result files for crashing/failure during partition alter
                                  was updated. Also test partition_myisam was updated since it did no longer
                                  opened a temporary instance during alter.
                                  
                                  Also cleaned up the crash/failure tests.
------------------------------------------------------------
revno: 3679 [merge]
committer: Guilhem Bichot <guilhem.bichot@oracle.com>
branch nick: trunk
timestamp: Mon 2012-02-27 11:22:11 +0100
message:
  merge with trunk
    ------------------------------------------------------------
    revno: 3402.73.1
    committer: Guilhem Bichot <guilhem.bichot@oracle.com>
    branch nick: trunk4
    timestamp: Thu 2012-02-16 17:53:44 +0100
    message:
      In:
      make_join_statistics()
      {
        TABLE *table;
        one loop setting and using 'table' in each iteration;
        one loop setting and using 'table' in each iteration;
        other code;
      }
      "other code" is at risk of accidentally using 'table'. To
      avoid this, we make the variable local to loops.
------------------------------------------------------------
revno: 3678 [merge]
committer: Guilhem Bichot <guilhem.bichot@oracle.com>
branch nick: trunk
timestamp: Mon 2012-02-27 11:20:18 +0100
message:
  merge with trunk
    ------------------------------------------------------------
    revno: 3402.72.1
    committer: Guilhem Bichot <guilhem.bichot@oracle.com>
    branch nick: bug13489996
    timestamp: Tue 2012-02-07 10:25:43 +0100
    message:
      Fix for BUG#13489996 valgrind:conditional jump or move depends on uninitialised values-field_blob.
      blob_ptr_size was not initialized properly: remove this variable.
------------------------------------------------------------
revno: 3677
committer: Tor Didriksen <tor.didriksen@oracle.com>
branch nick: trunk
timestamp: Mon 2012-02-27 11:00:05 +0100
message:
  Bug#13633549 HANDLE_FATAL_SIGNAL IN TEST_IF_SKIP_SORT_ORDER/CREATE_SORT_INDEX
  
  Don't invoke the range optimizer for a NULL select.
------------------------------------------------------------
revno: 3676
committer: Tor Didriksen <tor.didriksen@oracle.com>
branch nick: trunk-bug13720201memleak
timestamp: Mon 2012-02-27 10:09:31 +0100
message:
  Bug#13720201 VALGRIND: VARIOUS BLOCKS OF BYTES DEFINITELY LOST
  
  Item_equal has a 'cmp_item *eval_item' which may point to a cmp_item_sort_string
  which contains a 'String value;'.
  All objects containing String must be deleted properly
  (since the String may malloc)
  
  Solution: add a destructor to Item_equal.
  
  No mtr test case.
  The new unit test will report a memory leak (when run with valgrind) 
  if Item_equal DTOR is removed.
------------------------------------------------------------
revno: 3675
committer: Raghav Kapoor <raghav.kapoor@oracle.com>
branch nick: mysql-trunk-bug-11762377
timestamp: Mon 2012-02-27 12:42:58 +0530
message:
  BUG#11762377 - 54963: ENHANCE THE ERROR MESSAGE TO REDUCE USER CONFUSION 
  
  BACKGROUND:
  If a user tries to create a table with columns that combined
  have a total length larger than the maximum row size, an error
  message is returned. In this error message, the maximum row 
  length of the storage engine is given. The problem is that 
  it is not possible to create a table with a column length 
  matching the given maximum row length, as there are additional 
  column storage overheads that the error message does not 
  account for.
  
  FIX:
  This bug is fixed by enhancing the error message mentioning
  that the maximum size for columns is including storage 
  overhead and the user is asked to consult the manual.A test
  case has been written in create.test and the corresponding 
  result file has also been updated.
------------------------------------------------------------
revno: 3674 [merge]
committer: Jimmy Yang <jimmy.yang@oracle.com>
branch nick: trunk3
timestamp: Fri 2012-02-24 22:29:22 +0800
message:
  merge from mysql-5.5 to mysql-trunk
    ------------------------------------------------------------
    revno: 2875.341.21
    committer: Jimmy Yang <jimmy.yang@oracle.com>
    branch nick: mysql-5.5
    timestamp: Fri 2012-02-24 21:21:07 +0800
    message:
      Fix Bug #64432 Port bug fix #54330 from mysql-5.1 to mysql-5.5
------------------------------------------------------------
revno: 3673
committer: Sven Sandberg <sven.sandberg@oracle.com>
branch nick: trunk-wl3584-1
timestamp: Fri 2012-02-24 13:35:22 +0100
message:
  WL#3584 const correctness
  more const correctness.
  does this fix the compilation warning?
------------------------------------------------------------
revno: 3672
committer: Alfranio Correia <alfranio.correia@oracle.com>
branch nick: mysql-trunk
timestamp: Fri 2012-02-24 11:35:10 +0000
message:
  Post-push fix for WL#3584.
  
  Initialized variable that was causing an warning message in sys_vars.h.
------------------------------------------------------------
revno: 3671
committer: Sven Sandberg <sven.sandberg@oracle.com>
branch nick: trunk-wl3584-1
timestamp: Fri 2012-02-24 12:29:46 +0100
message:
  WL#3584 const correctness
  Corrected const correctness.
  Maybe this fixes compilation errors on some platforms too.
------------------------------------------------------------
revno: 3670
committer: Alfranio Correia <alfranio.correia@oracle.com>
branch nick: mysql-trunk
timestamp: Fri 2012-02-24 10:12:28 +0000
message:
  Fixed default.conf after pushing WL#3584.
------------------------------------------------------------
revno: 3669 [merge]
committer: Alfranio Correia <alfranio.correia@oracle.com>
branch nick: mysql-trunk-wl3584.merge
timestamp: Fri 2012-02-24 09:28:02 +0000
message:
  merge mysql-trunk --> mysql-trunk-wl3584 (local)
    ------------------------------------------------------------
    revno: 3402.50.249
    committer: Praveenkumar Hulakund <praveenkumar.hulakund@oracle.com>
    branch nick: trunk
    timestamp: Fri 2012-02-24 12:13:23 +0530
    message:
      Bug#13608112 - 64048: MYSQL_PRINT_STATUS() MISSING FINAL FFLUSH()
      
      Analysis:
      While printing debug information, memory related information and event
      related information were written to buffer after flushing it. Because of this,
      these information were getting printed when we do the next flush.
      
      Fix:
      Instead of calling fflush() before writing memory and event
      information, calling it after memory and event information.
    ------------------------------------------------------------
    revno: 3402.50.248 [merge]
    committer: Chaithra Gopalareddy <chaithra.gopalareddy@oracle.com>
    branch nick: mysql-5.6
    timestamp: Fri 2012-02-24 12:01:44 +0530
    message:
      Null merge from 5.5 to 5.6
        ------------------------------------------------------------
        revno: 2875.341.20 [merge]
        committer: Chaithra Gopalareddy <chaithra.gopalareddy@oracle.com>
        branch nick: mysql-5.5
        timestamp: Fri 2012-02-24 11:55:28 +0530
        message:
          Merge from 5.1 to 5.5
            ------------------------------------------------------------
            revno: 2661.830.5
            committer: Chaithra Gopalareddy <chaithra.gopalareddy@oracle.com>
            branch nick: mysql-5.1
            timestamp: Fri 2012-02-24 11:53:36 +0530
            message:
              Bug#13012483:EXPLAIN EXTENDED, PREPARED STATEMENT, CRASH IN
              CHECK_SIMPLE_EQUALITY
              
              PROBLEM:
              Crash in "check_simple_equality" when using a subquery with "IN" and
              "ALL" in prepare.
              
              ANALYSIS:
              Crash can be reproduced using a simplified query like this one:
              prepare s from "select 1 from g1 where 1 < all (
                              select @:=(1 in (select 1 from g1)) from g1)";
              
              This bug is currently present only on 5.5.and 5.1. Its fixed as part
              of work log(#1110) in 5.6. We are taking one change to fix this
              in 5.5 and 5.1.
              
              Problem seems to be present because we are trying to evaluate "is_null"
              on an argument which is part of a subquery
              (In Item_is_not_null_test::update_used_tables()).
              But the condition to evaluate is only when we do not have a sub query
              present, which means to say that "with_subselect" is not set.
              With respect to the above query, we create an object of type
              "Item_in_optimizer" which by definition is always associated with a
              subquery. While in 5.6 we set "with_subselect" to true for
              "Item_in_optimizer" object, we do not do the same in 5.5. This results in
              the evaluation for "is_null" resulting in a coredump.
              So, we are now setting "with_subselect" to true for "Item_in_optimizer"
              in 5.1 and 5.5.
    ------------------------------------------------------------
    revno: 3402.50.247
    committer: Dmitry Shulga <Dmitry.Shulga@oracle.com>
    branch nick: mysql-trunk-bug11748899
    timestamp: Fri 2012-02-24 12:32:57 +0600
    message:
      Follow-up for patch for bug#1174899.
      
      Event_queue::create_event() deletes an Event_queue_element object as its
      side effect. Subsequently, the attribute 'Event_queue_element::dropped'
      is used to check whether event should be deleted from table. An access
      to attribute of already deleted object could incur a fault. To protect
      against such failure we save the value of Event_queue_element::dropped
      attribute into a temporary variable to use it subsequently after
      return from Event_queue::create_event.
      
      events_restart.test re-enabled.
------------------------------------------------------------
revno: 3668
committer: Alfranio Correia <alfranio.correia@oracle.com>
branch nick: mysql-trunk-wl3584.merge
timestamp: Thu 2012-02-23 23:42:46 +0000
message:
  BUG#13738296 - INSUFFICIENT SIZE OF MAX_ALLOWED_PACKET ON MASTER CAUSING SLAVE TO FAILED ON WIN
  
  Transactions' changes are gathered in caches which upon commit are
  written to the binary log. This cache however does not support seek
  operations and an attempt to issue a seek operation against it may
  corrupt the binary log.
  
  This happens when the content of the cache does not fit in-memory
  and a swap are is used. In this case, when a seek is issued the
  content of the swap are is not read back to memory so that any
  attempt to write the in-memory part back to the swap are will
  write garbage into it.
  
  In the WL#3584, we used a seek to reposition the cursor on the file
  and rewrite the GTID thus leading to a corrupted binary log.
  
  To fix the problem, we flush the in-memory part of the cache to the
  swap area, call reinit_io_cache to reposition the cursor and read
  the correct content back to memory, update the gtid and flush the
  memory back to disk. This solution though has a performance drawback
  as a flush to the swap area is required even when there is enough
  memory to accommodate all transaction's changes.
------------------------------------------------------------
revno: 3667 [merge]
committer: Luis Soares <luis.soares@oracle.com>
branch nick: mysql-trunk-wl3584
timestamp: Thu 2012-02-23 23:28:29 +0000
message:
  Automerge mysql-trunk --> mysql-trunk-wl3584.
    ------------------------------------------------------------
    revno: 3402.50.246
    committer: Alexander Barkov <alexander.barkov@oracle.com>
    branch nick: mysql-trunk.b13596893
    timestamp: Thu 2012-02-23 20:32:32 +0400
    message:
           Bug#13596893 - "ERROR 1690 (22003): BIGINT UNSIGNED VALUE IS OUT OF RANGE" ON DATE OPERATION
            
            Problem:
            
            Prior to WL#946 expressions like "timestamp_column1-timestamp_column2"
            had REAL type. WL#946 changed behaviour  of temporal data types in numeric
            context started to work as DECIMAL numbers, or as INT number in case of
            no fractional digits. This change in combination with the fact that
            TIMESTAMP fields had UNSIGNED_FLAG made the expression
            "timestamp_column1-timestamp_column2" create a "BINGINT UNSIGNED"
            result and therefore fail with the error 
            "BIGINT UNSIGNED value is out of range".
            
            Fix:
            
            - Removing UNSIGNED_FLAG from Field_timestampf.
            - For consistency, removing "unsigned_flag" from
              all DATETIME and DATE items. Note, we want to have
              negative years in the future anyway.
            - Additionally, adjusting Item::decimal_precision() to
              return more precise result, so smaller numeric types
              are created when temporal types appear in numeric context.
            - Additionally, removing ZEROFILL_FLAG from Field_timestampf,
              as it's a remainder from MySQL-4.0 times.
            
            
            Per file comments:
            
            
              @ sql/field.cc
                Removing ZEROFILL_FLAG and UNSIGNED_FLAG from Field_timestampf.
                Note, not removing these flags from the old Field_timestamp,
                for better compatibility purposes. InnoDB might need these
                flags in the old tables.
                Also, removing redundant setting of BINARY_FLAG.
                It's set by Field_temporal::Field_temporal().
            
              @ sql/item.cc
                Adding better decimal precision calculation for the  temporal data types,
                to create smaller data types in numeric context.
            
              @ sql/item_func.cc
              @ sql/item_timefunc.cc
              @ sql/item_timefunc.h
                Removing unsigned flag from date and datetime items.
            
              @ sql/sql_const.h
                Introducing new constants representing number of integer 
                digits in the temporal data types.
            
              @ mysql-test/r/ctype_binary.result
              @ mysql-test/r/ctype_cp1251.result
              @ mysql-test/r/ctype_latin1.result
              @ mysql-test/r/ctype_ucs.result
              @ mysql-test/r/ctype_utf8.result
              @ mysql-test/r/func_time.result
              @ mysql-test/r/metadata.result
              @ mysql-test/r/ps_2myisam.result
              @ mysql-test/r/ps_3innodb.result
              @ mysql-test/r/ps_4heap.result
              @ mysql-test/r/ps_5merge.result
              @ mysql-test/r/type_temporal_fractional.result
                Recording test results
    ------------------------------------------------------------
    revno: 3402.50.245
    committer: Tor Didriksen <tor.didriksen@oracle.com>
    branch nick: trunk
    timestamp: Thu 2012-02-23 14:54:03 +0100
    message:
      WL#6158 post-push fix: correct size specifier for shift constant.
    ------------------------------------------------------------
    revno: 3402.50.244
    committer: Norvald H. Ryeng <norvald.ryeng@oracle.com>
    branch nick: mysql-trunk-13571700
    timestamp: Thu 2012-02-23 14:27:28 +0100
    message:
      Bug#13571700 TINYBLOB NOT NULL, CRASH IN PROTOCOL::NET_STORE_DATA
      
      Problem: Crash or wrong result for NOT NULL columns if the query
      contains an impossible WHERE clause.
      
      If a query contains an impossible WHERE clause, JOIN::optimize()
      recognizes that this query will not produce any rows (except maybe a
      NULL row) and exits early, without constructing join_tab.
      
      JOIN::exec() recognizes the optimizer's decision and calls
      return_zero_rows() to construct the NULL row. To construct this row,
      it first calls mark_as_null_row() on the tables and then reads the
      fields. However, the tables are found by following pointers from
      join_tab, which is a null pointer because of the impossible WHERE
      clause. The result is that the tables' null_row are not set, which
      again leads to Field::is_null() returning false and an attempt to read
      the field's value. The value is undefined, so the result may be an
      arbitrary value (e.g., in the case of an INT) or a crash if it is an
      undefined pointer, as in the case of TINYBLOB.
      
      This bug is a regression introduced by
      revid:jorgen.loland@oracle.com-20111220120431-pxmaax8e3effzhj0.
      
      Fix: Revert to accessing tables through join->select_lex->leaf_tables
      instead of join->join_tab.
------------------------------------------------------------
revno: 3666 [merge]
committer: Luis Soares <luis.soares@oracle.com>
branch nick: mysql-trunk-wl3584
timestamp: Thu 2012-02-23 13:10:18 +0000
message:
  Automerge from mysql-trunk --> mysql-trunk-wl3584.
    ------------------------------------------------------------
    revno: 3402.50.243
    committer: Mattias Jonsson <mattias.jonsson@oracle.com>
    branch nick: b13769819-t
    timestamp: Thu 2012-02-23 12:51:35 +0100
    message:
      Bug#13769819: TIMEOUT ON PARTS.PARTITION_ALTER4_MYISAM
      TEST ON GCOV
      
      Fixed by only run the test if --big-test flag is given
      (will run on weekly tests)
    ------------------------------------------------------------
    revno: 3402.50.242
    committer: Jorgen Loland <jorgen.loland@oracle.com>
    branch nick: mysql-trunk-jorgen-6158
    timestamp: Thu 2012-02-23 12:22:34 +0100
    message:
      WL#6158: SORTING OF TABLES BEFORE GREEDY_SEARCH DOES NOT TAKE KEY 
               DEPENDENCY INTO ACCOUNT
      
      Earlier, the following algorithm was used to order tables 
      before doing greedy search: 
       1) Outer tables before inner tables 
          (as in "outer LEFT JOIN inner")
       2) Increasing number of expected rows 
      
      By taking key dependency into account when doing this 
      pre-sorting, greedy search will be able to considerably 
      reduce the number of plans because pruning is more likely
      to happen.
      
      In addition, merge and insert sort is implemented because
      the std::stable_sort implementation differs between platforms.
      This results in different QEPs which in turn is a problem for 
      mtr testing.
    ------------------------------------------------------------
    revno: 3402.50.241
    committer: Mattias Jonsson <mjonsson@pan04.se.oracle.com>
    branch nick: test-trunk-debug
    timestamp: Thu 2012-02-23 11:39:15 +0100
    message:
      post push fix for testcase under valgrind, Bug#12750920
    ------------------------------------------------------------
    revno: 3402.50.240
    committer: Chaithra Gopalareddy <chaithra.gopalareddy@oracle.com>
    branch nick: mysql-5.6
    timestamp: Thu 2012-02-23 15:38:33 +0530
    message:
      Bug#11829861 - SUBSTRING_INDEX() RESULTS "OMIT" CHARACTER WHEN USED
            INSIDE LOWER()
            
      PROBLEM
      Output of the function substring_index would have missing characters
      when used with string conversion functions like lower().
      Ex:
        SET @user_at_host = 'root@mytinyhost-PC.local';
        SELECT LOWER(SUBSTRING_INDEX(@user_at_host, '@', -1));
        mytinyhost-pc. ocal
            
      ANALYSIS:
      In the function Item_func_substr_index::val_str(), the final 
      evaluated string(Item_func_substr_index::tmp_value) is marked
       as constant after the first evaluation. (The reason for the 
      same is mentioned in Bug#14676).
           
      Once evaluated, we try to convert this string to lower case. 
      While doing so, we call the function "copy_if_not_alloced". 
      This function does a copy or allocation, based on the 
      "alloced length"s of the strings passed. Since, "tmp_value" is 
      marked as constant, "Alloced length" for that string becomes 
      zero, thereby forcing allocation and then a subsequent
      copy which results in the missing space.
      
      What we need to note here is that, the source string(tmp_value) 
      for the function "copy_if_not_alloced" would be pointing to an 
      address inside the destination string, which is the original 
      string. Hence the missing letters.
      
      Code Snippets:
      Item_str_conv::val_str(str)//conversion to lower case
      {
        res=Item_func_substr_index::val_str(str) 
        (res is actully pointing to an address inside str)
        res= copy_if_not_alloced(str,res,res->length());
      }
      copy_if_not_alloced(to,from,from_length)
      {
       if (to->realloc(from_length))
         return from;                         // Actually an error
       if ((to->str_length=min(from->str_length,from_length)))
         memcpy(to->Ptr,from->Ptr,to->str_length);
      }
            
      If we do not, mark the "tmp_value" as const, we would have 
      returned from "copy_if_not_alloced" much earlier, avoiding 
      the overwriting.
      
      So the fix is to "not mark tmp_value as const", as there is 
      no need for it.As for the fix for the bug#14676, we fix it by 
      allocating a temporary buffer to get the delimiter. As, we were 
      using "tmp_value" to get the delimiter and also to return the 
      evaluated string, we were seeing the problem.
      
      Also, there is one more bug present in this function associated 
      with bug#42404.substring_index function returns inconsistent 
      results when delimiter is present at offset "0" while the count 
      is negative and greater than the number of times the delimiter 
      is present in the string.
      
      Currently, if the delimiter is present at offset "0", we skip 
      setting of "tmp_value"(this contains final evaluated string), 
      instead return the previously set "tmp_value". This was reason 
      for the inconsistent results stated in the problem description. 
      With this fix, we return the original string if the count is 
      non-zero at the end of the loop.
    ------------------------------------------------------------
    revno: 3402.50.239
    committer: Hemant Kumar <hemant.hk.kumar@oracle.com>
    branch nick: mysql-trunk
    timestamp: Thu 2012-02-23 11:27:45 +0530
    message:
      Disabling events_restart @windows  as The test started failing on windows after the fix for bug#11748899 and followup patch didnot work.
    ------------------------------------------------------------
    revno: 3402.50.238
    committer: Luis Soares <luis.soares@oracle.com>
    branch nick: mysql-trunk
    timestamp: Wed 2012-02-22 21:27:15 +0000
    message:
      Fixing a race in the test case which could lead to sporadic
      failures. The slave might not yet have replicated the CREATE
      by the time the test case issues the DROP.
      
      We synchronize both master and slave after the create table and
      then proceed with the rest of the test case.
------------------------------------------------------------
revno: 3665 [merge]
committer: Luis Soares <luis.soares@oracle.com>
branch nick: mysql-trunk-wl3584
timestamp: Wed 2012-02-22 19:00:19 +0000
message:
  Manual merge : mysql-trunk --> mysql-trunk-wl3584
  
  Conflicts resolved manually
  ===========================
  Text conflict in sql/item_strfunc.h
    ------------------------------------------------------------
    revno: 3402.50.237
    committer: Dmitry Shulga <Dmitry.Shulga@oracle.com>
    branch nick: mysql-trunk
    timestamp: Wed 2012-02-22 22:21:18 +0600
    message:
      Reenabled the test events_restart after that follow-up patch
      for bug#11748899 had been pushed.
    ------------------------------------------------------------
    revno: 3402.50.236
    committer: Tor Didriksen <tor.didriksen@oracle.com>
    branch nick: trunk-stable-sort
    timestamp: Wed 2012-02-22 15:30:56 +0100
    message:
      fix memory leak in unit test
    ------------------------------------------------------------
    revno: 3402.50.235
    committer: Tor Didriksen <tor.didriksen@oracle.com>
    branch nick: trunk-bug13724099memleak
    timestamp: Wed 2012-02-22 10:26:19 +0100
    message:
      Bug#13724099 1032 BYTE MEMORY LEAK NEW_CACHED_ITEM IN SUBQUERY WITH GROUPING OF OUTER COLUMN
      
      JOIN::cleanup didn't run delete_elements on the group_fileds list.
    ------------------------------------------------------------
    revno: 3402.50.234
    committer: Tor Didriksen <tor.didriksen@oracle.com>
    branch nick: trunk-bug12677197emptystring
    timestamp: Wed 2012-02-22 09:57:27 +0100
    message:
      Bug#12677197 MAKE_SET() AND MY_EMPTY_STRING BUGS CAUSE CRASHING
      
      The patch for:
      Bug#11765225 58165: "MY_EMPTY_STRING" GETS MODIFIED AND CAUSES LOAD DATA TO FAIL AND OTHER CR
      removed most uses of my_empty_string.
      
      This patch removes it as a global variable, and makes it (and a few others) const,
      so that it cannot be modified.
    ------------------------------------------------------------
    revno: 3402.50.233 [merge]
    committer: Vasil Dimov <vasil.dimov@oracle.com>
    branch nick: mysql-trunk
    timestamp: Tue 2012-02-21 18:23:52 +0200
    message:
      Merge mysql-5.5 -> mysql-trunk
        ------------------------------------------------------------
        revno: 2875.341.19 [merge]
        committer: Vasil Dimov <vasil.dimov@oracle.com>
        branch nick: mysql-5.5
        timestamp: Tue 2012-02-21 18:20:12 +0200
        message:
          Merge mysql-5.1 -> mysql-5.5
            ------------------------------------------------------------
            revno: 2661.830.4
            committer: Vasil Dimov <vasil.dimov@oracle.com>
            branch nick: mysql-5.1
            timestamp: Tue 2012-02-21 17:57:07 +0200
            message:
              Fix Bug#13639142 64128: INNODB ERROR IN SERVER LOG OF INNODB_BUG34300
              
              Suppress innodb_bug34300 from failing if InnoDB prints:
              
                120221 11:05:03  InnoDB: ERROR: the age of the last checkpoint is 9439048,
                InnoDB: which exceeds the log group capacity 9433498.
              
              by default the log capacity is 2 log files, 5 MB each.
    ------------------------------------------------------------
    revno: 3402.50.232 [merge]
    committer: Mattias Jonsson <mattias.jonsson@oracle.com>
    branch nick: topush-trunk
    timestamp: Tue 2012-02-21 15:51:02 +0100
    message:
      Merge of bug#12750920 into mysql-trunk
        ------------------------------------------------------------
        revno: 3402.71.1
        committer: Mattias Jonsson <mattias.jonsson@oracle.com>
        branch nick: b12750920-trunk
        timestamp: Mon 2011-12-05 11:11:58 +0100
        message:
          Bug#12750920: EMBEDDED SERVER START/STOP
          
          The main problem was pthread_key's was never deleted.
          
          Solved by deleting them when stopping the embedded library.
          
          Also fixed a couple of mem leaks found when running the test under
          valgrind.
          
          Some global sys_var was incompatible with restarts of the embedded
          library. They where preallocated and released at the end of the
          embedded library, but it then set its allocated flag to zero, resulting
          in it would not be released on successive ends of the embedded
          library. Solved by adding static buffers to use instead.
          
          The test now restarts the embedded library > 1024 times.
    ------------------------------------------------------------
    revno: 3402.50.231 [merge]
    committer: Georgi Kodinov <Georgi.Kodinov@Oracle.com>
    branch nick: mysql-trunk
    timestamp: Tue 2012-02-21 14:18:13 +0200
    message:
      merge mysql-5.5->mysql-trunk
        ------------------------------------------------------------
        revno: 2875.341.18 [merge]
        committer: Georgi Kodinov <Georgi.Kodinov@Oracle.com>
        branch nick: mysql-5.5
        timestamp: Tue 2012-02-21 14:17:01 +0200
        message:
          null-merge of the version bump to mysql-5.5
            ------------------------------------------------------------
            revno: 2661.830.3 [merge]
            committer: Georgi Kodinov <Georgi.Kodinov@Oracle.com>
            branch nick: mysql-5.1
            timestamp: Tue 2012-02-21 14:14:52 +0200
            message:
              merged and updated the version in mysql-5.1
                ------------------------------------------------------------
                revno: 1810.4004.11
                committer: Georgi Kodinov <Georgi.Kodinov@Oracle.com>
                branch nick: mysql-5.0
                timestamp: Tue 2012-02-21 14:13:31 +0200
                message:
                  bumped up the version of the main tree to match the security tree
    ------------------------------------------------------------
    revno: 3402.50.230 [merge]
    committer: Tatjana Azundris Nuernberg <tatjana.nuernberg@oracle.com>
    branch nick: 56-13454045
    timestamp: Tue 2012-02-21 12:40:44 +0100
    message:
      auto-merge
        ------------------------------------------------------------
        revno: 3402.70.1
        committer: Ole John Aske <ole.john.aske@oracle.com>
        branch nick: mysql-trunk
        timestamp: Tue 2012-02-21 12:38:19 +0100
        message:
          Followup fix for WL#5558 in order to remove compiler warning on some platforms.
    ------------------------------------------------------------
    revno: 3402.50.229 [merge]
    committer: Tatjana Azundris Nuernberg <tatjana.nuernberg@oracle.com>
    branch nick: 56-13454045
    timestamp: Tue 2012-02-21 12:35:31 +0100
    message:
      auto-merge
        ------------------------------------------------------------
        revno: 2875.341.17 [merge]
        committer: Tatjana Azundris Nuernberg <tatjana.nuernberg@oracle.com>
        branch nick: 55-13454045
        timestamp: Tue 2012-02-21 12:30:29 +0100
        message:
          auto-merge
    ------------------------------------------------------------
    revno: 3402.50.228
    committer: Ole John Aske <ole.john.aske@oracle.com>
    branch nick: mysql-trunk
    timestamp: Tue 2012-02-21 11:31:44 +0100
    message:
      Fix for WL#5558: Resolve ORDER BY execution method at the optimization stage
      
      Recommit, including review comments, and some new tests after
      trunk-backporting was merged into trunk.
      
      The decision whether to sort result dataset or use ordered index scan to get 
      sorted result was partly made in JOIN::optimize, and partly in JOIN::execute().
      Furthermore the logic for EXPLAIN'ing the sort was different/incorrect compared
      to the logic used for determine filesort or not during execution. This sometimes
      caused EXPLAIN to be incorrect.
            
      This refactoring WL moves the decision on how to handle ORDER BY to the 
      optimization stage. It is a pure refactoring in the sense that it
      does not change the current filesort cost model. However, several 
      test results has changed as the EXPLAIN of those used to be incorrect.
      During the refactoring task several other bugs has also been 
      reported and fixed as standalone bugs, these are: 
            
       - bug 13514959: query plan fails to 'using index' where it should
       - bug 13528826: test_if_cheaper_ordering(): calculates incorrect 'select_limit'
       - bug 13529048: test_if_skip_sort_order() don't have to filesort a single row.
       - bug 13531865: test_if_skip_sort_order() incorrectly skip filesort if 'type' is ref_or_null
      
      As of today these fixes has already been reviewed and pushed into mysql-trrunk.
            
      As an extension of the refactoring in this commit, one should considder
      to move test_if_skip_sort_order() w/ family from sql_select.cc 
      into sql_optimize.cc as this is new the only place it is used.
      (make it 'static' also)
            
      There is likely also some code in JOIN::execute() related to
      maintaining 'pre_idx_push_cond' which now is obsolete and
      should be considdered for removal. (later)
    ------------------------------------------------------------
    revno: 3402.50.227 [merge]
    committer: Georgi Kodinov <Georgi.Kodinov@Oracle.com>
    branch nick: mysql-trunk
    timestamp: Tue 2012-02-21 11:14:32 +0200
    message:
      merge mysql-5.5->mysql-trunk
        ------------------------------------------------------------
        revno: 2875.345.2
        committer: Hery Ramilison <hery.ramilison@oracle.com>
        branch nick: mysql-5.5
        timestamp: Mon 2012-02-20 16:56:59 +0100
        message:
          cloning 5.5.22
------------------------------------------------------------
revno: 3664
committer: Sven Sandberg <sven.sandberg@oracle.com>
branch nick: trunk-wl3584-1
timestamp: Wed 2012-02-22 12:15:34 +0100
message:
  WL#3584 test
  add sanity check for the test case
------------------------------------------------------------
revno: 3663
committer: Sven Sandberg <sven.sandberg@oracle.com>
branch nick: trunk-wl3584-1
timestamp: Wed 2012-02-22 11:48:31 +0100
message:
  WL#3584 tests
  add one more case to rpl_gtid_execution
------------------------------------------------------------
revno: 3662
committer: Sven Sandberg <sven.sandberg@oracle.com>
branch nick: trunk-wl3584-1
timestamp: Wed 2012-02-22 11:10:54 +0100
message:
  WL#3584 debug
  undo previous addition of debug printout
------------------------------------------------------------
revno: 3661
committer: Sven Sandberg <sven.sandberg@oracle.com>
branch nick: trunk-wl3584-1
timestamp: Tue 2012-02-21 19:31:08 +0100
message:
  WL#3584 debug
  rectified previous debug changeset
------------------------------------------------------------
revno: 3660
committer: Sven Sandberg <sven.sandberg@oracle.com>
branch nick: trunk-wl3584-1
timestamp: Tue 2012-02-21 18:02:53 +0100
message:
  WL#3584 debug
  print out debug info to track strange bug
------------------------------------------------------------
revno: 3659 [merge]
committer: Luis Soares <luis.soares@oracle.com>
branch nick: mysql-trunk-wl3584
timestamp: Tue 2012-02-21 01:08:50 +0000
message:
  Automerged from mysql-trunk --> mysql-trunk-wl3584.
    ------------------------------------------------------------
    revno: 3402.50.226
    committer: Vasil Dimov <vasil.dimov@oracle.com>
    branch nick: mysql-trunk
    timestamp: Mon 2012-02-20 16:18:42 +0200
    message:
      Followup to the merge from mysql-5.5
      (vasil.dimov@oracle.com-20120220113532-7v6j14nj1p3o57u3)
      
      The help text for --ignore-builtin-innodb is different in mysql-trunk.
    ------------------------------------------------------------
    revno: 3402.50.225
    committer: Tor Didriksen <tor.didriksen@oracle.com>
    branch nick: trunk
    timestamp: Mon 2012-02-20 14:27:26 +0100
    message:
      WL#6008 : Replace custom encryption code with approved
      
      Post-push fix for link failure:
      /usr/bin/ld: ../extra/yassl/libyassl.a(ssl.cpp.o): 
      relocation R_X86_64_PC32 against 
      `vtable for TaoCrypt::HASH' can not be used when making a shared object; 
      recompile with -fPIC
      
      We *do* compile with -fPIC.
      The problem was different visibility of symbols.
    ------------------------------------------------------------
    revno: 3402.50.224
    committer: Vasil Dimov <vasil.dimov@oracle.com>
    branch nick: mysql-trunk
    timestamp: Mon 2012-02-20 13:54:49 +0200
    message:
      Adjust main.innodb_ignore_builtin test after we started to ignore that
      option in vasil.dimov@oracle.com-20120217130947-03319op732dsf4m2
    ------------------------------------------------------------
    revno: 3402.50.223 [merge]
    committer: Vasil Dimov <vasil.dimov@oracle.com>
    branch nick: mysql-trunk
    timestamp: Mon 2012-02-20 13:35:32 +0200
    message:
      Merge mysql-5.5 -> mysql-trunk
        ------------------------------------------------------------
        revno: 2875.345.1
        committer: Vasil Dimov <vasil.dimov@oracle.com>
        branch nick: mysql-5.5
        timestamp: Mon 2012-02-20 13:25:37 +0200
        message:
          Adjust .result files of mysqld--help-notwin and mysqld--help-win
          mtr tests.
          
          This is a followup to vasil.dimov@oracle.com-20120217130947-03319op732dsf4m2
          which added a deprecation notice to ignore-builtin-innodb
    ------------------------------------------------------------
    revno: 3402.50.222 [merge]
    committer: Tatjana Azundris Nuernberg <tatjana.nuernberg@oracle.com>
    branch nick: 56-13454045
    timestamp: Sun 2012-02-19 04:15:09 +0000
    message:
      NULL merge
        ------------------------------------------------------------
        revno: 2875.341.16 [merge]
        committer: Tatjana Azundris Nuernberg <tatjana.nuernberg@oracle.com>
        branch nick: 55-13454045
        timestamp: Sun 2012-02-19 04:11:08 +0000
        message:
          NULL merge
            ------------------------------------------------------------
            revno: 2661.830.2
            committer: Tatjana Azundris Nuernberg <tatjana.nuernberg@oracle.com>
            branch nick: 51-13454045
            timestamp: Sun 2012-02-19 03:18:49 +0000
            message:
              BUG 13454045 - 63524: BUG #35396 "ABNORMAL/IMPOSSIBLE/LARGE QUERY_TIME AND LOCK_TIME" HAPPENS A
              
              If a query's end time is before before its start time, the system clock has been turn back
              (daylight savings time etc.). When the system clock is changed, we can't tell for certain a
              given query was actually slow. We did not protect against logging such a query with a bogus
              execution time (resulting from end_time - start_time being negative), and possibly logging it
              even though it did not really take long to run.
              
              We now have a sanity check in place.
------------------------------------------------------------
revno: 3658
committer: Andrei Elkin <andrei.elkin@oracle.com>
branch nick: mysql-trunk-wl3584
timestamp: Tue 2012-02-21 02:34:41 +0200
message:
  wl#3584 GTID
  
  relaxing conditions for HB info validation.
  Master can skip transactions that slave already got and this
  fact is never reported so the vanilla GTID-less logics
  fail because implicitly MI.pos should include the size of the
  skipped transactions.
  
  Until HB does not carry the skipped size validation only 
  condiders monotonicity, i.e
  HB.pos >= MI.pos when gtid_mode is ON.
------------------------------------------------------------
revno: 3657 [merge]
committer: Luis Soares <luis.soares@oracle.com>
branch nick: mysql-trunk-wl3584
timestamp: Sat 2012-02-18 22:51:38 +0000
message:
  Merging mysql-trunk --> mysql-trunk-wl3584.
  
  Manually resolved conflicts
  ===========================
  Text conflict in sql/sql_class.cc
    ------------------------------------------------------------
    revno: 3402.50.221 [merge]
    committer: Georgi Kodinov <Georgi.Kodinov@Oracle.com>
    branch nick: merge-trunk
    timestamp: Sat 2012-02-18 10:55:12 +0200
    message:
      merge
        ------------------------------------------------------------
        revno: 2875.341.15 [merge]
        committer: kevin.lewis@oracle.com
        branch nick: mysql-5.5
        timestamp: Fri 2012-02-17 08:28:28 -0600
        message:
          Merge with mysql-5.5
    ------------------------------------------------------------
    revno: 3402.50.220
    committer: Alfranio Correia <alfranio.correia@oracle.com>
    branch nick: mysql-trunk
    timestamp: Fri 2012-02-17 18:30:34 +0000
    message:
      Post-push fix for BUG#13728026.
      
      After pushing the patch for BUG#13728026, some tests started failing
      on valgrind because the repository was not being registered in the
      Relay_log_info object. So when the thread and the Relay_log_info were
      destroyed the memory allocated for the repository was not freed
      causing a memory leak.
      
      The Relay_log_info object is responsible for destroying the repository.
      
      In this patch, we correctly register the repository in Relay_log_info
      object.
    ------------------------------------------------------------
    revno: 3402.50.219
    committer: Guilhem Bichot <guilhem.bichot@oracle.com>
    branch nick: trunk-revert
    timestamp: Fri 2012-02-17 15:51:29 +0100
    message:
      revert Inaam's push, he'll push it again later.
    ------------------------------------------------------------
    revno: 3402.50.218 [merge]
    committer: Inaam Rana <inaam.rana@oracle.com>
    branch nick: dblwr
    timestamp: Fri 2012-02-17 09:07:33 -0500
    message:
      merge from parent
        ------------------------------------------------------------
        revno: 3402.69.1
        committer: Alexander Barkov <alexander.barkov@oracle.com>
        branch nick: mysql-trunk.b13375823
        timestamp: Fri 2012-02-17 17:55:18 +0400
        message:
                Bug#13375823 - FSP(DECIMAL) RESULT DIFFERENCE WITH QUERY USING UNION ALL
                
                
                1. Introducing Item::temporal_with_date_as_number_result_type()
                and fixing Item_func_min_max::fix_length_and_dec() to
                use the new method so DATE, DATETIME, TIME data type arguments
                passed to GREATEST/LEAST now report themself as DECIMAL_RESULT
                rather than STRING_RESULT.
                
                In the previous code they reported themself as STRING_RESULT,
                so while mixing a DATETIME argument with a INT/DECIMAL argument,
                item_cmp_type() chose REAL_RESULT for cmp_type and therefore
                some precision got lost:
                
                CREATE TABLE t1 (a DATETIME(6));
                INSERT INTO t1 VALUES ('2001-01-01 01:01:01.123456');
                SELECT GREATEST(a,10) FROM t1; --> 20010101010101.125000
                
                Now item_cmp_type() sets cmp_type to DECIMAL_RESULT
                (or INT_RESULT in case of no fractional digits)
                and preserves the full precision.
                
                This change also makes Item_func_min_max::save_in_field()
                go through Field_longstr::store(my_decimal *dec) rather
                than Field_longstr::store(double nr) when processing the
                UNION query from the bug report.
                Decimal routine (unlike double routine) gives control
                over the amount of fractional digits stored into the
                temporary UNION field.
                
                2. Fixing Item_func_min_max::result_type() to return STRING_RESULT
                when we compare as dates, because a lot of the code assumes that
                temporal types have STRING_RESULT.
                For example, in create_table_from_items() we need to use
                item->tmp_table_field_from_field_type() rather than
                item->tmp_table_field() to make
                "CREATE TABLE t1 AS SELECT LEAST(datetime_expr1,datetime_expr2)"
                create a DATETIME field.
                
                3. Changing Item_func_min_max::val_decimal() to set the number
                of fractional digits according to "decimals",
                so Field_longstr::store(my_decimal *dec) writes fixed amount
                of fractional digits, independingly from which argument the value
                came from.
    ------------------------------------------------------------
    revno: 3402.50.217
    committer: Inaam Rana <inaam.rana@oracle.com>
    branch nick: dblwr
    timestamp: Fri 2012-02-17 08:55:24 -0500
    message:
      [part 2 of WL5655] Add vectored IO support to innodb
      
      rb://895
      approved by: Marko Makela
      
      Currently we memcpy data pages to a buffer and issue a single IO from
      there. This patch eliminates that memcpy stuff and instead use vio
      support where present. Note that I have not tried to tidy up the dblwr
      interface with vio as we are going to revisit this in next part of the
      patch.
      
      The Implementation:
      ===================
      * On windows use scatter/gather routines. For now disabled.
      * On non-windows platforms use one of the following in that order:
        * preadv/pwritev where available. Need newer kernel version.
        * readv/writev: should be available on all platforms.
          Need to do an lseek() and then lock the pointer before issuing
          a readv/writev.
        * pread/pread: In rare cases where readv/writev is not available we
          fall back to copying to a buffer and using pread/pwrite
        * read/write: In some ancient platform which doesn't even support
          pread/pwrite we fall back to read/write.
      
      Limitations:
      ============
      Some arbitrary limitations in the current implementation:
      * A given vio struct will support 1000 * UNIV_PAGE_SIZE batch maximum.
      * IO requests are to be multiple of UNIV_PAGE_SIZE
      * Windows scatter/gather routines are complicated in that they don't
        take length as parameter. The code for scatter/gather is in place but
        is disabled for now.
      
      Callers:
      ========
      Current caller of vio routine is just dblwr. The support for read is
      also present but is not currently used. For all batch flushing vio is
      used to write to the doublewrite buffer. For single page flushes when
      writing uncompressed page it is written to the dblwr directly using
      fil_io. When writing compressed page vio is used with two IO requests,
      first request is the page itself and the second request is the zero
      padding.
    ------------------------------------------------------------
    revno: 3402.50.216 [merge]
    committer: Vasil Dimov <vasil.dimov@oracle.com>
    branch nick: mysql-trunk
    timestamp: Fri 2012-02-17 15:18:29 +0200
    message:
      Merge mysql-5.5 -> mysql-trunk
      
      In addition to emitting a warning when ignore-builtin-innodb is used, in
      5.6 we ignore that option and start with InnoDB even when it is specified.
        ------------------------------------------------------------
        revno: 2875.344.3
        committer: Vasil Dimov <vasil.dimov@oracle.com>
        branch nick: mysql-5.5
        timestamp: Fri 2012-02-17 15:09:47 +0200
        message:
          Print a deprecation warning when ignore-builtin-innodb is used
          
          This is part of
          Bug#13586262 INNODB - HIBISCUS: ISSUE DEPRECATION WARNINGS FOR VARIABLES
          
          Reviewed by:	Mark Alff
    ------------------------------------------------------------
    revno: 3402.50.215
    committer: Nirbhay Choubey <nirbhay.choubey@oracle.com>
    branch nick: mysql-trunk
    timestamp: Fri 2012-02-17 16:00:31 +0530
    message:
      WL#6008 : Replace custom encryption code with approved
                encryption packages
    ------------------------------------------------------------
    revno: 3402.50.214 [merge]
    committer: Marko M?kel? <marko.makela@oracle.com>
    branch nick: mysql-trunk
    timestamp: Fri 2012-02-17 11:58:18 +0200
    message:
      Merge mysql-5.5 to mysql-trunk.
        ------------------------------------------------------------
        revno: 2875.344.2 [merge]
        committer: Marko M?kel? <marko.makela@oracle.com>
        branch nick: mysql-5.5
        timestamp: Fri 2012-02-17 11:52:51 +0200
        message:
          Merge mysql-5.1 to mysql-5.5.
            ------------------------------------------------------------
            revno: 2661.830.1
            committer: Marko M?kel? <marko.makela@oracle.com>
            branch nick: mysql-5.1
            timestamp: Fri 2012-02-17 11:42:04 +0200
            message:
              Bug#13721257 RACE CONDITION IN UPDATES OR INSERTS OF WIDE RECORDS
              
              This bug was originally filed and fixed as Bug#12612184. The original
              fix was buggy, and it was patched by Bug#12704861. Also that patch was
              buggy (potentially breaking crash recovery), and both fixes were
              reverted.
              
              This fix was not ported to the built-in InnoDB of MySQL 5.1, because
              the function signatures of many core functions are different from
              InnoDB Plugin and later versions. The block allocation routines and
              their callers would have to changed so that they handle block
              descriptors instead of page frames.
              
              When a record is updated so that its size grows, non-updated columns
              can be selected for external (off-page) storage. The bug is that the
              initially inserted updated record contains an all-zero BLOB pointer to
              the field that was not updated. Only after the BLOB pages have been
              allocated and written, the valid pointer can be written to the record.
              
              Between the release of the page latch in mtr_commit(mtr) after
              btr_cur_pessimistic_update() and the re-latching of the page in
              btr_pcur_restore_position(), other threads can see the invalid BLOB
              pointer consisting of 20 zero bytes. Moreover, if the system crashes
              at this point, the situation could persist after crash recovery, and
              the contents of the non-updated column would be permanently lost.
              
              The problem is amplified by the ROW_FORMAT=DYNAMIC and
              ROW_FORMAT=COMPRESSED that were introduced in
              innodb_file_format=barracuda in InnoDB Plugin, but the bug does exist
              in all InnoDB versions.
              
              The fix is as follows. After a pessimistic B-tree operation that needs
              to write out off-page columns, allocate the pages for these columns in
              the mini-transaction that performed the B-tree operation (btr_mtr),
              but write the pages in a separate mini-transaction (blob_mtr). Do
              mtr_commit(blob_mtr) before mtr_commit(btr_mtr). A quirk: Do not reuse
              pages that were previously freed in btr_mtr. Only write the off-page
              columns to 'fresh' pages.
              
              In this way, crash recovery will see redo log entries for blob_mtr
              before any redo log entry for btr_mtr. It will apply the BLOB page
              writes to pages that were marked free at that point. If crash recovery
              fails to see all of the btr_mtr redo log, there will be some
              unreachable BLOB data in free pages, but the B-tree will be in a
              consistent state.
              
              btr_page_alloc_low(): Renamed from btr_page_alloc(). Add the parameter
              init_mtr. Return an allocated block, or NULL. If init_mtr!=mtr but
              the page was already X-latched in mtr, do not initialize the page.
              
              btr_page_alloc(): Wrapper for btr_page_alloc_for_ibuf() and
              btr_page_alloc_low().
              
              btr_page_free(): Add a debug assertion that the page was a B-tree page.
              
              btr_lift_page_up(): Return the father block.
              
              btr_compress(), btr_cur_compress_if_useful(): Add the parameter ibool
              adjust, for adjusting the cursor position.
              
              btr_cur_pessimistic_update(): Preserve the cursor position when
              big_rec will be written and the new flag BTR_KEEP_POS_FLAG is defined.
              Remove a duplicate rec_get_offsets() call. Keep the X-latch on
              index->lock when big_rec is needed.
              
              btr_store_big_rec_extern_fields(): Replace update_inplace with
              an operation code, and local_mtr with btr_mtr. When not doing a
              fresh insert and btr_mtr has freed pages, put aside any pages that
              were previously X-latched in btr_mtr, and free the pages after
              writing out all data. The data must be written to 'fresh' pages,
              because btr_mtr will be committed and written to the redo log after
              the BLOB writes have been written to the redo log.
              
              btr_blob_op_is_update(): Check if an operation passed to
              btr_store_big_rec_extern_fields() is an update or insert-by-update.
              
              fseg_alloc_free_page_low(), fsp_alloc_free_page(),
              fseg_alloc_free_extent(), fseg_alloc_free_page_general(): Add the
              parameter init_mtr. Return an allocated block, or NULL. If
              init_mtr!=mtr but the page was already X-latched in mtr, do not
              initialize the page.
              
              xdes_get_descriptor_with_space_hdr(): Assert that the file space
              header is being X-latched.
              
              fsp_alloc_from_free_frag(): Refactored from fsp_alloc_free_page().
              
              fsp_page_create(): New function, for allocating, X-latching and
              potentially initializing a page. If init_mtr!=mtr but the page was
              already X-latched in mtr, do not initialize the page.
              
              fsp_free_page(): Add ut_ad(0) to the error outcomes.
              
              fsp_free_page(), fseg_free_page_low(): Increment mtr->n_freed_pages.
              
              fsp_alloc_seg_inode_page(), fseg_create_general(): Assert that the
              page was not previously X-latched in the mini-transaction. A file
              segment or inode page should never be allocated in the middle of an
              mini-transaction that frees pages, such as btr_cur_pessimistic_delete().
              
              fseg_alloc_free_page_low(): If the hinted page was allocated, skip the
              check if the tablespace should be extended. Return NULL instead of
              FIL_NULL on failure. Remove the flag frag_page_allocated. Instead,
              return directly, because the page would already have been initialized.
              
              fseg_find_free_frag_page_slot() would return ULINT_UNDEFINED on error,
              not FIL_NULL. Correct a bogus assertion.
              
              fseg_alloc_free_page(): Redefine as a wrapper macro around
              fseg_alloc_free_page_general().
              
              buf_block_buf_fix_inc(): Move the definition from the buf0buf.ic to
              buf0buf.h, so that it can be called from other modules.
              
              mtr_t: Add n_freed_pages (number of pages that have been freed).
              
              page_rec_get_nth_const(), page_rec_get_nth(): The inverse function of
              page_rec_get_n_recs_before(), get the nth record of the record
              list. This is faster than iterating the linked list. Refactored from
              page_get_middle_rec().
              
              trx_undo_rec_copy(): Add a debug assertion for the length.
              
              trx_undo_add_page(): Return a block descriptor or NULL instead of a
              page number or FIL_NULL.
              
              trx_undo_report_row_operation(): Add debug assertions.
              
              trx_sys_create_doublewrite_buf(): Assert that each page was not
              previously X-latched.
              
              page_cur_insert_rec_zip_reorg(): Make use of page_rec_get_nth().
              
              row_ins_clust_index_entry_by_modify(): Pass BTR_KEEP_POS_FLAG, so that
              the repositioning of the cursor can be avoided.
              
              row_ins_index_entry_low(): Add DEBUG_SYNC points before and after
              writing off-page columns. If inserting by updating a delete-marked
              record, do not reposition the cursor or commit the mini-transaction
              before writing the off-page columns.
              
              row_build(): Tighten a debug assertion about null BLOB pointers.
              
              row_upd_clust_rec(): Add DEBUG_SYNC points before and after writing
              off-page columns. Do not reposition the cursor or commit the
              mini-transaction before writing the off-page columns.
              
              rb:939 approved by Jimmy Yang
    ------------------------------------------------------------
    revno: 3402.50.213
    committer: Jorgen Loland <jorgen.loland@oracle.com>
    branch nick: mysql-trunk
    timestamp: Fri 2012-02-17 09:50:19 +0100
    message:
      Temporarily disable asserts
    ------------------------------------------------------------
    revno: 3402.50.212 [merge]
    committer: Marko M?kel? <marko.makela@oracle.com>
    branch nick: mysql-trunk
    timestamp: Fri 2012-02-17 09:33:49 +0200
    message:
      Null merge from mysql-5.5.
        ------------------------------------------------------------
        revno: 2875.344.1
        committer: Marko M?kel? <marko.makela@oracle.com>
        branch nick: mysql-5.5
        timestamp: Fri 2012-02-17 09:18:53 +0200
        message:
          Put back a fix that was reverted when reverting the buggy Bug#12612184 fix in
          revision-id inaam.rana@oracle.com-20110930110219-vnpaqghj9hm0grds
          (revno 3559).
    ------------------------------------------------------------
    revno: 3402.50.211 [merge]
    committer: Chaithra Gopalareddy <chaithra.gopalareddy@oracle.com>
    branch nick: mysql-5.6
    timestamp: Fri 2012-02-17 12:37:44 +0530
    message:
      Null merge from 5.5 to 5.6
        ------------------------------------------------------------
        revno: 2875.343.1 [merge]
        committer: Chaithra Gopalareddy <chaithra.gopalareddy@oracle.com>
        branch nick: mysql-5.5
        timestamp: Fri 2012-02-17 12:26:41 +0530
        message:
          Merge from 5.1 to 5.5
            ------------------------------------------------------------
            revno: 2661.827.21
            committer: Chaithra Gopalareddy <chaithra.gopalareddy@oracle.com>
            branch nick: mysql-5.1
            timestamp: Fri 2012-02-17 11:42:30 +0530
            message:
              Bug#13012483:EXPLAIN EXTENDED, PREPARED STATEMENT, CRASH IN
              CHECK_SIMPLE_EQUALITY
              
              PROBLEM:
              Crash in "check_simple_equality" when using a subquery with "IN" and
              "ALL" in prepare.
              
              ANALYSIS:
              Crash can be reproduced using a simplified query like this one:
              prepare s from "select 1 from g1 where 1 < all (
                              select @:=(1 in (select 1 from g1)) from g1)";
              
              This bug is currently present only on 5.5.and 5.1. Its fixed as part
              of work log(#1110) in 5.6. We are taking one change to fix this
              in 5.5 and 5.1.
              
              Problem seems to be present because we are trying to evaluate "is_null"
              on an argument which is part of a subquery
              (In Item_is_not_null_test::update_used_tables()).
              But the condition to evaluate is only when we do not have a sub query
              present, which means to say that "with_subselect" is not set.
              With respect to the above query, we create an object of type
              "Item_in_optimizer" which by definition is always associated with a
              subquery. While in 5.6 we set "with_subselect" to true for
              "Item_in_optimizer" object, we do not do the same in 5.5. This results in
              the evaluation for "is_null" resulting in a coredump.
              So, we are now setting "with_subselect" to true for "Item_in_optimizer"
              in 5.1 and 5.5.
    ------------------------------------------------------------
    revno: 3402.50.210
    committer: Rohit Kalhans <rohit.kalhans@oracle.com>
    branch nick: mysql-trunk_bug11766817
    timestamp: Fri 2012-02-17 12:04:47 +0530
    message:
      BUG#11766817: CRASH ON MYSQLD STARTUP WHEN USING LOG-BIN (STRMAKE ISSUE?)
      BUG#12929941: SEGFAULT IN STRMAKE/CONVERT_DIRNAME WHEN USING --RELAY-LOG=SLAVE-RELAY-BIN
            
      Problem Description: 
            The global variable 'char *mysql_real_data_home_ptr'
            is declared and initialized to the address of the
            global buffer char mysql_real_data_home[] in mysqld.cc.
            Then, the constructor for Sys_datadir overwrites
            mysql_real_data_home_ptr with NULL. In the case when value
            datadir is not given in both command-line as well as in
            cnf file and the default path (<basedir>/data) needs to be
            used, the mysql_real_data_home_ptr is not made to point to
            mysql_real_data_home and still has NULL value. 
            After WL#5465, we use mysql_real_data_home_ptr when it still
            holds NULL as no cli or cnf file arguments were given. In
            particular, rpl_make_log_name passes mysql_real_data_home_ptr
            to fn_format. This caused a coredump because fn_format did not
            expect NULL.
            The following combinations caused the core dump
            1.unspecified but existing empty default data dir and
              --log-bin 
            2.unspecified but existing empty default data dir and
              --relay-log=<some name for relay log>
            
                   
      Solution: 
            We solve this problem by making mysql_real_data_home_ptr to
            point to the mysql_real_data_home if it is null before passing
            it to fn_format function because by this time we know that
            mysql_real_data_home is correctly initialized and holds the 
            final value of datadir path. We have also added asserts in
            fn_format() to check if the dir is null.
    ------------------------------------------------------------
    revno: 3402.50.209
    committer: Sunny Bains <Sunny.Bains@Oracle.Com>
    branch nick: trunk
    timestamp: Fri 2012-02-17 11:56:47 +1100
    message:
      Bug #13628249 - ASSERT MAX_UNDO_LOGS == ULINT_UNDEFINED WHEN INNODB-FORCE-RECOVERY >= 5
      
      Introduce ULONG_UNDEFINED, on 64 bit Windows sizeof(ulong) < sizeof(ulint). When
      --innodb-force-recovery >= 3 we set srv_undo_logs to ULINT_UNDEFINED and then
      later when we go to start a transaction and attach a rollback segment in the
      function trx_assign_rseg(), only the lower 32 bits are copied because the
      type of the function parameter is a ulint. This causes the assertion to
      fail because it is comparing it with ULINT_UNDEFINED which is 64 bits. The fix
      is to change the type of the parameter to ulong and introduce ULONG_UNDEFINED
      and additionally check against that instead of ULINT_UNDEFINED in the assert.
      
      Approved by Jimmy Yang over IM.
------------------------------------------------------------
revno: 3656
committer: Luis Soares <luis.soares@oracle.com>
branch nick: mysql-trunk-wl3584
timestamp: Sat 2012-02-18 22:37:27 +0000
message:
  WL#3584
  
  The rpl_gtid_stress_failover fails in MTS mode with messages:
  
  "1201: Could not initialize master info structure; more error 
  messages can be found in the MySQL error log"
  
  and 
  
  "Error looking for file after ./mysqld-relay-bin.000004."
  
  These are the symptoms of BUG#12995174 in mysql-trunk. Disabling 
  the test case in MTS mode until this is fixed in mysql-trunk.
------------------------------------------------------------
revno: 3655
committer: Luis Soares <luis.soares@oracle.com>
branch nick: mysql-trunk-wl3584
timestamp: Sat 2012-02-18 22:34:03 +0000
message:
  WL#3584
  
  rpl_gtid_parallel still runs too close to 900 seconds on some PB2
  hosts, occasionally timing out. Deacresing the max_seconds and n_forks
  to make the test case duration shorter.
------------------------------------------------------------
revno: 3654
committer: Sven Sandberg <sven.sandberg@oracle.com>
branch nick: trunk-wl3584
timestamp: Sat 2012-02-18 09:58:03 +0100
message:
  WL#3584 test fixes
  revert last changeset because i pushed it before i 
  realized luis had done the same thing already :-)
------------------------------------------------------------
revno: 3653
committer: Sven Sandberg <sven.sandberg@oracle.com>
branch nick: trunk-wl3584
timestamp: Sat 2012-02-18 09:56:19 +0100
message:
  WL#3584 test fixes
  rpl_gtid_stress_failover failed on windows because
  windows does something in a different way. disable
  the test under windows for now
------------------------------------------------------------
revno: 3652
committer: Luis Soares <luis.soares@oracle.com>
branch nick: mysql-trunk-wl3584
timestamp: Sat 2012-02-18 00:27:11 +0000
message:
  WL#3584
  
  Removed rpl_fail_to_connect, which was a test case pushed to help
  diagnose BUG 13727933 (it is a bug in mysql-trunk). There is no 
  point in keeping this test case in the feature tree.
------------------------------------------------------------
revno: 3651
committer: Luis Soares <luis.soares@oracle.com>
branch nick: mysql-trunk-wl3584
timestamp: Sat 2012-02-18 00:24:32 +0000
message:
  WL#3584
  
  rpl_gtid_stress_failover has path issues when running on windows.
  There's not much point in running this test on every platform, since
  what it tests is platform independent. Thence, we stop running it
  on windows.
------------------------------------------------------------
revno: 3650
committer: Sven Sandberg <sven.sandberg@oracle.com>
branch nick: trunk-wl3584-2
timestamp: Fri 2012-02-17 23:03:31 +0100
message:
  WL#3585 test fixes
  made rpl_gtid_parallel less slow, hopefully, so that it won't timeout as often
------------------------------------------------------------
revno: 3649
committer: Sven Sandberg <sven.sandberg@oracle.com>
branch nick: trunk-wl3584-2
timestamp: Fri 2012-02-17 22:59:16 +0100
message:
  WL#3584 test fixes
  two partition tests were using include/rpl_end.inc with
  the connection log on. since the order it executes things
  changed slightly, this caused result mismatch. fixed
  by turning off connection log before sourcing include/rpl_end.inc
  and updating result files
------------------------------------------------------------
revno: 3648
committer: Sven Sandberg <sven.sandberg@oracle.com>
branch nick: trunk-wl3584-2
timestamp: Fri 2012-02-17 22:45:58 +0100
message:
  WL#3584 tests
  updated result file after bugfix
------------------------------------------------------------
revno: 3647
committer: Sven Sandberg <sven.sandberg@oracle.com>
branch nick: trunk-wl3584-2
timestamp: Fri 2012-02-17 21:48:01 +0100
message:
  WL#3584 tests
  Fixed bug in test framework introduced by the changeset before the last one.
------------------------------------------------------------
revno: 3646
committer: Sven Sandberg <sven.sandberg@oracle.com>
branch nick: trunk-wl3584-2
timestamp: Fri 2012-02-17 21:34:10 +0100
message:
  WL#3584 bugfix
  Fixed crash introduced by previous changeset.
------------------------------------------------------------
revno: 3645
committer: Sven Sandberg <sven.sandberg@oracle.com>
branch nick: trunk-wl3584-2
timestamp: Fri 2012-02-17 20:46:49 +0100
message:
  WL#3584 tests + bugfixes
   - Added test to check that failover works.
   - Fixed bug in SQL_THREAD_WAIT_AFTER_GTIDS.
   - Fixed bug where the dump thread used the wrong
     sid_map to skip events
   - Fixed bug where the io thread did not hold the
     wrlock when it needed
------------------------------------------------------------
revno: 3644
committer: Luis Soares <luis.soares@oracle.com>
branch nick: mysql-trunk-wl3584
timestamp: Fri 2012-02-17 18:32:24 +0000
message:
  WL#3584
  
  Decreasing the number of seconds the load generator actually 
  generates load, as with the current value it can cause timeouts.
------------------------------------------------------------
revno: 3643 [merge]
committer: Alfranio Correia <alfranio.correia@oracle.com>
branch nick: mysql-trunk-wl3584.merge
timestamp: Fri 2012-02-17 14:16:17 +0000
message:
  merge mysql-trunk-wl3584 --> mysql-trunk-wl3584 (local)
    ------------------------------------------------------------
    revno: 3640.1.1
    committer: Luis Soares <luis.soares@oracle.com>
    branch nick: mysql-trunk-wl3584
    timestamp: Fri 2012-02-17 09:27:56 +0000
    message:
      WL#3584
      
      Updated collections so that tests that usually run on daily-trunk run
      on the release build branch.
------------------------------------------------------------
revno: 3642
committer: Alfranio Correia <alfranio.correia@oracle.com>
branch nick: mysql-trunk-wl3584.merge
timestamp: Fri 2012-02-17 14:14:09 +0000
message:
  Disabled rpl_gtid_parallel on windows due to an environment problem.
  
  The test case requires perl and are skipped several times because
  perl is not found on some windows machines. However, in some cases,
  it is executed and fails with the following message: "perl not found
  in path or did not start".
------------------------------------------------------------
revno: 3641
committer: Alfranio Correia <alfranio.correia@oracle.com>
branch nick: mysql-trunk-wl3584.merge
timestamp: Fri 2012-02-17 13:50:06 +0000
message:
  BUG#13729084 - COMBINATION OF RESET MASTER AND ROW FORMAT LEADS TO EVENT APPLY RATHER THAN SKIP
  
  The function gtid_pre_statement_checks() checks if a transaction
  was already processed and thus has to be skipped or otherwise has
  to be processed.
  
  In row mode, this routine was returning that already processed DML
  changes should be processed. This happened because the sql_command
  was not being reset and when a row event was procossed the function
  gtid_pre_statement_checks() got sql_command set to SQLCOM_BEGIN.
  
  To fix the problem, we reset sql_command to SQLCOM_END, as soon as
  a Query event is processed.
------------------------------------------------------------
revno: 3640
committer: Alfranio Correia <alfranio.correia@oracle.com>
branch nick: mysql-trunk-wl3584.merge
timestamp: Fri 2012-02-17 01:29:36 +0000
message:
  Fixed serialization of auto_position.
------------------------------------------------------------
revno: 3639 [merge]
committer: Alfranio Correia <alfranio.correia@oracle.com>
branch nick: mysql-trunk-wl3584.merge
timestamp: Thu 2012-02-16 23:25:47 +0000
message:
  merge mysql-trunk --> mysql-trunk-wl3584
    ------------------------------------------------------------
    revno: 3402.50.208 [merge]
    committer: Alfranio Correia <alfranio.correia@oracle.com>
    branch nick: mysql-trunk
    timestamp: Thu 2012-02-16 22:54:45 +0000
    message:
      merge mysql-trunk --> mysql-trunk (local)
        ------------------------------------------------------------
        revno: 3402.68.1 [merge]
        committer: kevin.lewis@oracle.com
        branch nick: mysql-trunk
        timestamp: Thu 2012-02-16 12:16:36 -0600
        message:
          Upmerge from mysql-5.5
            ------------------------------------------------------------
            revno: 2875.341.14
            committer: kevin.lewis@oracle.com
            branch nick: mysql-5.5
            timestamp: Thu 2012-02-16 12:13:08 -0600
            message:
              Bug#64160, Oracle Bug#13698765
              
              The problem was introduced in 5.5.20 by Bug 13116225.  It tried to
              protect against downgrading from a version 5.6.4 database that was
              created with a page size other than 16k.  Version 5.6.4 supports
              page sizes 4k and 8k and stamps that page size into the header page
              of each tablespace file.  Version 5.5.20 attempts to read that page
              size in the file header.
              
              But it turns out that only the first system tablespace file has a
              reliable flags field in the header. So only ibdata1 can be or needs
              to be tested for another page size. Extra system tablespace files
              like ibdata2, ibdata3, etc do not and should not be tested since the
              flags field is unreliable.
    ------------------------------------------------------------
    revno: 3402.50.207
    committer: Alfranio Correia <alfranio.correia@oracle.com>
    branch nick: mysql-trunk
    timestamp: Thu 2012-02-16 17:52:05 +0000
    message:
      BUG#13728026 - BINLOG MAY CAUSES CRASHES WHEN THE SLAVE'S REPOSITORY IS A TABLE.
      
      The command BINLOG requires a Relay_log_info object to execute events.
            
      Such object was being created with INFO_REPOSITORY_FILE causing issues
      when the main Relay_log_info object used INFO_REPOSITORY_TABLE. Among
      a variety of issues, this led to the existence of two different types
      of repositories thus making new threads to fail when they tried to
      create a new Relay_log_info.
            
      The following message was usually printed out: 
            
      "Error creating relay log info: Multiple replication metadata repository
      instances found with data in them. Unable to decide which is the correct
      one to choose."
            
      To fix the problem we create this particular Relay_log_info object with
      a INFO_REPOSITORY_DUMMY as in fact a repository is not necessary. We
      also improved the code for the case rli is NULL. 
      In the future, we need to improve the code around the BINLOG command as
      only a small part of the object is required to execute it.
    ------------------------------------------------------------
    revno: 3402.50.206
    committer: kevin.lewis@oracle.com
    branch nick: mysql-trunk
    timestamp: Thu 2012-02-16 10:33:49 -0600
    message:
      Refactor fil_space_t::name so that instead of holding a path, it holds
      a table name in the form database/tablename.  This is required in order
      for fil_space_t and fil_node_t to be able to track independently assigned
      tablespace names.
      
      This patch also contains some whitespace and comment cleanup.
      
      Approved by Inaam in rb:906
    ------------------------------------------------------------
    revno: 3402.50.205
    committer: kevin.lewis@oracle.com
    branch nick: mysql-trunk
    timestamp: Thu 2012-02-16 09:47:26 -0600
    message:
      Refactor the use of srv_file_per_table.  It is a global variable that
      can change at any time during a CREATE table process, but it is refered
      to several time during that process.  Save the value of that setting at
      the start of the CREATE and use the same boolean value during the whole
      CREATE.  This patch saves it in dict_table_t:flags2 which is not tested
      for backward compatibility in older engines.  It means that the table
      is/was created in its own tablespace or ibd file.
      
      Approved by Sunny in rb:908
    ------------------------------------------------------------
    revno: 3402.50.204
    committer: Jorgen Loland <jorgen.loland@oracle.com>
    branch nick: mysql-trunk-13354910
    timestamp: Thu 2012-02-16 16:15:41 +0100
    message:
      BUG#13354910 followup: add assertion that records_in_range()
      is not called for open ranges.
    ------------------------------------------------------------
    revno: 3402.50.203 [merge]
    committer: Marko M?kel? <marko.makela@oracle.com>
    branch nick: mysql-trunk
    timestamp: Thu 2012-02-16 15:59:09 +0200
    message:
      Merge mysql-5.5 to mysql-trunk.
        ------------------------------------------------------------
        revno: 2875.341.13 [merge]
        committer: Marko M?kel? <marko.makela@oracle.com>
        branch nick: mysql-5.5
        timestamp: Thu 2012-02-16 15:56:10 +0200
        message:
          Null merge a fix from mysql-5.1.
            ------------------------------------------------------------
            revno: 2661.827.20
            committer: Marko M?kel? <marko.makela@oracle.com>
            branch nick: mysql-5.1
            timestamp: Thu 2012-02-16 15:54:16 +0200
            message:
              Fix link error on Windows.
              error LNK2001: unresolved external symbol _debug_sync_C_callback_ptr
        ------------------------------------------------------------
        revno: 2875.341.12 [merge]
        committer: Kent Boortz <kent.boortz@oracle.com>
        branch nick: mysql-5.5
        timestamp: Thu 2012-02-16 12:06:34 +0100
        message:
          Merge
            ------------------------------------------------------------
            revno: 2661.827.19 [merge]
            committer: Kent Boortz <kent.boortz@oracle.com>
            branch nick: mysql-5.1
            timestamp: Thu 2012-02-16 12:02:53 +0100
            message:
              Merge
        ------------------------------------------------------------
        revno: 2875.341.11 [merge]
        committer: Kent Boortz <kent.boortz@oracle.com>
        branch nick: mysql-5.5
        timestamp: Thu 2012-02-16 12:04:44 +0100
        message:
          Merge
    ------------------------------------------------------------
    revno: 3402.50.202
    committer: Guilhem Bichot <guilhem.bichot@oracle.com>
    branch nick: trunk4
    timestamp: Thu 2012-02-16 14:09:08 +0100
    message:
      fix of previous push: "table" is a variable left by earlier code;
      s->table should be used. Gives more correct trace.
    ------------------------------------------------------------
    revno: 3402.50.201
    committer: Guilhem Bichot <guilhem.bichot@oracle.com>
    branch nick: trunk4
    timestamp: Thu 2012-02-16 12:36:03 +0100
    message:
      comment
    ------------------------------------------------------------
    revno: 3402.50.200 [merge]
    committer: Guilhem Bichot <guilhem.bichot@oracle.com>
    branch nick: trunk4
    timestamp: Thu 2012-02-16 12:31:37 +0100
    message:
      Merge with trunk
        ------------------------------------------------------------
        revno: 3402.67.1
        committer: Guilhem Bichot <guilhem.bichot@oracle.com>
        branch nick: only_full_new
        timestamp: Thu 2012-02-02 14:44:26 +0100
        message:
          Fix for BUG#12626418 "only_full_group_by wrongly allows column in order by".
          Inspired by a patch from Evgeny.
          The design of how only_full_group_by works is not changed; the patch
          merely makes ORDER BY expressions be included into the set of
          to-be-validated expressions.
          In detail:
          - instead of scanning JOIN::fields_list (= SELECT list) we scan
          JOIN::all_fields (contains ORDER BY expressions and SELECT list
          expressions)
          - cur_pos_in_select_list becomes cur_pos_in_all_fields; it used to be
          an index in fields_list, it is now an index in all_fields, with the
          convention that 0 is the first expression of the SELECT list (so for the
          SELECT list cur_pos_in_all_fields has same value as
          cur_pos_in_select_list had); ORDER BY expressions have a negative index.
          - pushing to st_select_lex::non_agg_fields() used to be to-the-back;
          still true for SELECT list expressions, but for ORDER BY expressions
          it has to be to-the-front.
          
          Plus a wealth of comments for those not familiar with how
          only_full_group_by works (which was my case when I started on this
          bug).
    ------------------------------------------------------------
    revno: 3402.50.199 [merge]
    committer: Guilhem Bichot <guilhem.bichot@oracle.com>
    branch nick: trunk4
    timestamp: Thu 2012-02-16 12:30:26 +0100
    message:
      merge with trunk
        ------------------------------------------------------------
        revno: 3402.66.1
        committer: Guilhem Bichot <guilhem.bichot@oracle.com>
        branch nick: trunk3
        timestamp: Tue 2012-02-14 16:18:33 +0100
        message:
          Adding to the optimizer trace some bits of information about const tables:
          a) a mention of whether the constant table was found empty (zero row) or not
          (one single row)
          b) the condition which depends only on constant tables and is thus evaluated early
          and can lead to execution shortcutting.
    ------------------------------------------------------------
    revno: 3402.50.198 [merge]
    committer: Kent Boortz <kent.boortz@oracle.com>
    branch nick: mysql-trunk
    timestamp: Thu 2012-02-16 12:13:58 +0100
    message:
      Merge
        ------------------------------------------------------------
        revno: 3402.60.12 [merge]
        committer: Marko M?kel? <marko.makela@oracle.com>
        branch nick: mysql-trunk
        timestamp: Thu 2012-02-16 12:52:14 +0200
        message:
          Merge mysql-5.5 to mysql-trunk.
            ------------------------------------------------------------
            revno: 2875.342.3 [merge]
            committer: Marko M?kel? <marko.makela@oracle.com>
            branch nick: mysql-5.5
            timestamp: Thu 2012-02-16 12:28:49 +0200
            message:
              Merge mysql-5.1 to mysql-5.5.
                ------------------------------------------------------------
                revno: 2661.829.4
                committer: Marko M?kel? <marko.makela@oracle.com>
                branch nick: mysql-5.1
                timestamp: Thu 2012-02-16 12:24:11 +0200
                message:
                  Add instrumentation for Bug#13721257 RACE CONDITION IN UPDATES OR INSERTS
                  OF WIDE RECORDS
                  
                  row_ins_index_entry_low(), row_upd_clust_rec(): Make a redo log
                  checkpoint if a DEBUG flag is set. Add DEBUG_SYNC around
                  btr_store_big_rec_extern_fields().
                  
                  rb:946 approved by Jimmy Yang
                ------------------------------------------------------------
                revno: 2661.829.3
                committer: Marko M?kel? <marko.makela@oracle.com>
                branch nick: mysql-5.1
                timestamp: Thu 2012-02-16 12:20:41 +0200
                message:
                  Correct a few copyright messages.
    ------------------------------------------------------------
    revno: 3402.50.197 [merge]
    committer: MySQL Build Team<mysql-build@oss.oracle.com>
    branch nick: mysql-trunk
    timestamp: Thu 2012-02-16 11:57:29 +0100
    message:
      Updated/added copyright headers
        ------------------------------------------------------------
        revno: 2875.341.10 [merge]
        committer: MySQL Build Team<mysql-build@oss.oracle.com>
        branch nick: mysql-5.5
        timestamp: Thu 2012-02-16 11:44:10 +0100
        message:
          Updated/added copyright headers
            ------------------------------------------------------------
            revno: 2661.827.18
            committer: MySQL Build Team<mysql-build@oss.oracle.com>
            branch nick: mysql-5.1
            timestamp: Thu 2012-02-16 11:35:30 +0100
            message:
              Updated/added copyright headers
        ------------------------------------------------------------
        revno: 2875.341.9 [merge]
        committer: Kent Boortz <kent.boortz@oracle.com>
        branch nick: mysql-5.5
        timestamp: Thu 2012-02-16 11:43:05 +0100
        message:
          Merge
            ------------------------------------------------------------
            revno: 2661.827.17 [merge]
            committer: Kent Boortz <kent.boortz@oracle.com>
            branch nick: mysql-5.1
            timestamp: Thu 2012-02-16 11:17:04 +0100
            message:
              Merge
        ------------------------------------------------------------
        revno: 2875.341.8 [merge]
        committer: Kent Boortz <kent.boortz@oracle.com>
        branch nick: mysql-5.5
        timestamp: Thu 2012-02-16 11:19:19 +0100
        message:
          Merge
    ------------------------------------------------------------
    revno: 3402.50.196 [merge]
    committer: MySQL Build Team<mysql-build@oss.oracle.com>
    branch nick: mysql-trunk
    timestamp: Thu 2012-02-16 11:52:45 +0100
    message:
      Updated/added copyright headers
        ------------------------------------------------------------
        revno: 3402.60.11
        committer: Tor Didriksen <tor.didriksen@oracle.com>
        branch nick: trunk
        timestamp: Thu 2012-02-16 09:51:53 +0100
        message:
          Move test for BUG#33509 to a separate file,
          to avoid tagging all the subquery_sj_xxx tests as experimental.
        ------------------------------------------------------------
        revno: 3402.60.10
        committer: Nirbhay Choubey <nirbhay.choubey@oracle.com>
        branch nick: mysql-trunk
        timestamp: Thu 2012-02-16 00:24:54 +0530
        message:
          WL#5605 : Assert that MySQL uses an approved random
                    number generator
          
          Added support for OpenSSL/yaSSL supplied PRNG to
          create_random_string method, which generates a
          random string to be used in MySQL authentication
          protocol.
        ------------------------------------------------------------
        revno: 3402.60.9
        committer: Inaam Rana <inaam.rana@oracle.com>
        branch nick: mysql-trunk
        timestamp: Wed 2012-02-15 12:40:20 -0500
        message:
          Extra info about purge in innodb_monitor output was mistakenly
          directed towards stderr. Should have been file where innodb
          status is being printed.
        ------------------------------------------------------------
        revno: 3402.60.8
        committer: Marko M?kel? <marko.makela@oracle.com>
        branch nick: mysql-trunk
        timestamp: Wed 2012-02-15 16:50:33 +0200
        message:
          Fix a race condition in innodb.innodb_bug-13628249, and add a restart.
        ------------------------------------------------------------
        revno: 3402.60.7 [merge]
        committer: Marko M?kel? <marko.makela@oracle.com>
        branch nick: mysql-trunk
        timestamp: Wed 2012-02-15 16:40:21 +0200
        message:
          Merge mysql-5.5 to mysql-trunk.
            ------------------------------------------------------------
            revno: 2875.342.2 [merge]
            committer: Marko M?kel? <marko.makela@oracle.com>
            branch nick: mysql-5.5
            timestamp: Wed 2012-02-15 16:37:06 +0200
            message:
              Merge mysql-5.1 to mysql-5.5.
                ------------------------------------------------------------
                revno: 2661.829.2
                committer: Marko M?kel? <marko.makela@oracle.com>
                branch nick: mysql-5.1
                timestamp: Wed 2012-02-15 16:28:00 +0200
                message:
                  Remove a race condition in innodb_bug53756.test.
                  Before killing the server, tell mysql-test-run that it is to be expected.
                  
                  Discussed with Bjorn Munch on IM.
        ------------------------------------------------------------
        revno: 3402.60.6 [merge]
        committer: Marko M?kel? <marko.makela@oracle.com>
        branch nick: mysql-trunk
        timestamp: Wed 2012-02-15 16:01:06 +0200
        message:
          Merge mysql-5.5 to mysql-trunk (null merge).
            ------------------------------------------------------------
            revno: 2875.342.1 [merge]
            committer: Marko M?kel? <marko.makela@oracle.com>
            branch nick: mysql-5.5
            timestamp: Wed 2012-02-15 15:55:31 +0200
            message:
              Merge mysql-5.1 to mysql-5.5.
                ------------------------------------------------------------
                revno: 2661.829.1
                committer: Marko M?kel? <marko.makela@oracle.com>
                branch nick: mysql-5.1
                timestamp: Wed 2012-02-15 15:53:29 +0200
                message:
                  store_create_info(): Fix a compiler warning about unused variable.
        ------------------------------------------------------------
        revno: 3402.60.5
        committer: Tor Didriksen <tor.didriksen@oracle.com>
        branch nick: trunk
        timestamp: Wed 2012-02-15 14:57:17 +0100
        message:
          Bug#13645095 SEVERAL TESTS ON DAILY TRUNK ARE FAILING BECAUSE OF MYSQLTEST GOT SIGNAL 11.
          
          Classes ilink, base_ilist and base_ilist_iterator were not type-safe,
          so at high optimization levels, the ilink inheritance corrupted the THD objects.
          Templatizing these classed with typed pointers solved the problem.
        ------------------------------------------------------------
        revno: 3402.60.4
        committer: Anitha Gopi <agopi@vitro82>
        branch nick: mysql-trunk
        timestamp: Wed 2012-02-15 12:09:43 +0100
        message:
          Bug#11748899 : Di
          sabled failing test on windows
        ------------------------------------------------------------
        revno: 3402.60.3 [merge]
        committer: Evgeny Potemkin <evgeny.potemkin@oracle.com>
        branch nick: mysql-trunk
        timestamp: Wed 2012-02-15 14:47:01 +0400
        message:
          Auto-merged.
            ------------------------------------------------------------
            revno: 3402.65.9
            committer: Praveenkumar Hulakund <praveenkumar.hulakund@oracle.com>
            branch nick: new-trunk
            timestamp: Wed 2012-02-15 12:50:32 +0530
            message:
              Bug#12951586 - 62285: DON'T INITIALIZE VIO STRING DESCRIPTION, CREATE IT ON 
                                    DEMAND
              
              Fix:
              Moved VIO DESCRIPTION STRING initialization to function vio_description.
            ------------------------------------------------------------
            revno: 3402.65.8
            committer: Sunny Bains <Sunny.Bains@Oracle.Com>
            branch nick: trunk
            timestamp: Wed 2012-02-15 15:58:01 +1100
            message:
              Bug#12407434	60776: INNODB MAX PURGE LAG SETTING IS WRONGLY DESIGNED
              
              Add a test for the new variable introduced by this fix.
            ------------------------------------------------------------
            revno: 3402.65.7
            committer: Sunny Bains <Sunny.Bains@Oracle.Com>
            branch nick: trunk
            timestamp: Wed 2012-02-15 13:28:36 +1100
            message:
              Bug #12407434	60776: INNODB MAX PURGE LAG SETTING IS WRONGLY DESIGNED
                    
              The max value for --innodb-max-purge-lag-delay should be 10secs not 100secs.
            ------------------------------------------------------------
            revno: 3402.65.6
            committer: Sunny Bains <Sunny.Bains@Oracle.Com>
            branch nick: trunk
            timestamp: Wed 2012-02-15 13:19:04 +1100
            message:
              Bug#13615873 - REMOVE CODE THAT DOES A PURGE VIA THE MASTER THREAD
              
              Update test that was missed in the original commit.
              
              Purge now requires a separate background thread even for the default
              setting. Update the test to reflect that.
            ------------------------------------------------------------
            revno: 3402.65.5
            committer: Sunny Bains <Sunny.Bains@Oracle.Com>
            branch nick: trunk
            timestamp: Wed 2012-02-15 12:51:32 +1100
            message:
              Bug#12407434	60776: INNODB MAX PURGE LAG SETTING IS WRONGLY DESIGNED
              
              Add new configuration variable:
                --innodb-max-purge-lag-delay := 0...100000000 in micro-seconds
              
               1. The check for oldest view would cause the DML delay from not being set,
                  if there was a purge lag. Removing the check will now force all
                  transactions to be delayed if there is a purge lag.
              
               2. The maxmum possible delay value of ~0UL makes it open ended, the delay can
                  keep increasing to a point where it brings everything to a halt. Introduce
                  a configuration variable that can cap the max delay. The maximum value for
                  now is 10seconds default is 0 which should cause a context switch.
              
              Approved by Jimmy Yang over IM.
            ------------------------------------------------------------
            revno: 3402.65.4
            committer: Sunny Bains <Sunny.Bains@Oracle.Com>
            branch nick: trunk
            timestamp: Wed 2012-02-15 12:12:54 +1100
            message:
              Bug#13615873 - REMOVE CODE THAT DOES A PURGE VIA THE MASTER THREAD
                    
              InnoDB now has background threads to do purge. They were introduced because 
              the master thread was doing too many things already and purge was being 
              delayed due to insert buffer merge, flushing etc. 
              
              It is also cumbersome to control purge behaviour if purge is done via the
              master thread. We need to stop and resume purge for WL#5522.
                    
              The default setting of innodb_purge_threads will change from 0 to 1.
                    
              rb://905 Approved by Inaam Rana.
            ------------------------------------------------------------
            revno: 3402.65.3
            committer: Alexander Barkov <alexander.barkov@oracle.com>
            branch nick: mysql-trunk
            timestamp: Wed 2012-02-15 00:35:05 +0400
            message:
              Bug#13704152 - TIME RELATED COMPILER ERRORS DURING OPTIMZED BUILD (./BUILD/COMPILE-PENTIUM64)
              
              The time_type, neg and second_part members were not initialized.
            ------------------------------------------------------------
            revno: 3402.65.2
            committer: Dmitry Shulga <Dmitry.Shulga@oracle.com>
            branch nick: mysql-trunk
            timestamp: Tue 2012-02-14 23:23:39 +0600
            message:
              This is a prerequisite patch for bug#11753919 - fixed PB failures that
              were fired after a subquery optimization feature had been enabled.
            ------------------------------------------------------------
            revno: 3402.65.1
            committer: Tor Didriksen <tor.didriksen@oracle.com>
            branch nick: trunk-qsort
            timestamp: Tue 2012-02-14 16:07:11 +0100
            message:
              Make result files json compliant.
        ------------------------------------------------------------
        revno: 3402.60.2
        committer: Evgeny Potemkin <evgeny.potemkin@oracle.com>
        branch nick: mysql-trunk
        timestamp: Mon 2012-02-13 14:42:27 +0400
        message:
          Bug#13457552: Crash on instantiating a derived table in a query with empty result.
          When optimizer finds that several keys could be used for a derived table but
          later it finds that there will be empty result it returns without picking
          the best key and pruning others. Executor, in its turn, tries to instantiate
          the result tmp table for such derived table, but the create_myisam_tmp_table
          isn't designed for creating several keys. This led to a memory corruption
          and sometimes to a crash.
          
          Now create_myisam_tmp_table creates only the first key in production build and
          throws failed assertion in debug build when caller gives description of
          several keys.
          JOIN::prepare_result now doesn't instantiate result tables for derived
          tables for query's empty result (zero_result_cause is non-null) as they aren't
          needed.
    ------------------------------------------------------------
    revno: 3402.50.195 [merge]
    committer: MySQL Build Team<mysql-build@oss.oracle.com>
    branch nick: mysql-trunk
    timestamp: Thu 2012-02-16 10:51:14 +0100
    message:
      Updated/added copyright headers
        ------------------------------------------------------------
        revno: 2875.341.7 [merge]
        committer: MySQL Build Team<mysql-build@oss.oracle.com>
        branch nick: mysql-5.5
        timestamp: Thu 2012-02-16 10:48:16 +0100
        message:
          Updated/added copyright headers
            ------------------------------------------------------------
            revno: 2661.827.16 [merge]
            committer: Kent Boortz <kent.boortz@oracle.com>
            branch nick: mysql-5.1
            timestamp: Wed 2012-02-15 17:21:38 +0100
            message:
              Updated/added copyright headers
                ------------------------------------------------------------
                revno: 1810.4004.10
                committer: MySQL Build Team<mysql-build@oss.oracle.com>
                branch nick: mysql-5.0
                timestamp: Wed 2012-02-15 17:13:47 +0100
                message:
                  Updated/added copyright headers
    ------------------------------------------------------------
    revno: 3402.50.194
    committer: Olav Sandstaa <olav.sandstaa@oracle.com>
    branch nick: icp-bug
    timestamp: Tue 2012-02-14 15:42:12 +0100
    message:
      Fix for Bug#13655397 CRASH IN SYNC_THREAD_LEVELS_NONEMPTY_TRX
      
      This crash occured due to pushing an index condition down to InnoDB
      that contained a call to a stored function. When the index condition
      was executed from within InnoDB, the stored function caused a second
      call from the server into InnoDB. Since InnoDB does not handle that
      the same session executes more than one operation against InnoDB
      at a given time this triggered an assert in InnoDB.
      
      The fix is to prevent that we push down index conditions to the
      storage engine that contain calls to stored functions.
    ------------------------------------------------------------
    revno: 3402.50.193
    committer: Sunny Bains <Sunny.Bains@Oracle.Com>
    branch nick: trunk
    timestamp: Tue 2012-02-14 21:27:14 +1100
    message:
      Bug #13628249 - ASSERT MAX_UNDO_LOGS == ULINT_UNDEFINED WHEN INNODB-FORCE-RECOVERY >= 5
      
      Disable innodb_bug-13628249.test for embedded builds.
    ------------------------------------------------------------
    revno: 3402.50.192
    committer: Sunny Bains <Sunny.Bains@Oracle.Com>
    branch nick: trunk
    timestamp: Tue 2012-02-14 18:58:25 +1100
    message:
      Bug#11765863 58868: SHUTDOWN HANG WAITING FOR PURGE THREAD TO BE SUSPENDED, OR ASSERT
       
      Fix a bogus compiler warning by initialising slot to 0.
    ------------------------------------------------------------
    revno: 3402.50.191
    committer: Alexander Barkov <alexander.barkov@oracle.com>
    branch nick: mysql-trunk.guilhem
    timestamp: Tue 2012-02-14 11:44:23 +0400
    message:
      Fixing test results for the previous commit for "Post-fix for WL#946".
    ------------------------------------------------------------
    revno: 3402.50.190
    committer: Sunny Bains <Sunny.Bains@Oracle.Com>
    branch nick: trunk
    timestamp: Tue 2012-02-14 18:44:56 +1100
    message:
      Bug#11765863 58868: SHUTDOWN HANG WAITING FOR PURGE THREAD TO BE SUSPENDED, OR ASSERT
      
       1. Fix tests related to the monitor variables that were added.
      
       2. Read the purge_sys_t::state without the latch, otherwise this violates
          the latching order.
    ------------------------------------------------------------
    revno: 3402.50.189
    committer: Sunny Bains <Sunny.Bains@Oracle.Com>
    branch nick: trunk
    timestamp: Tue 2012-02-14 18:32:57 +1100
    message:
      Bug#11765863 58868: SHUTDOWN HANG WAITING FOR PURGE THREAD TO BE SUSPENDED, OR ASSERT
            
       1. Fix a test that was missed, change due to two additional monitor variables.
      
       2. Fix a bogus warning by the compiler.
      
       3. Purge state can be PURGE_STATE_EXIT when shutting down because the
          purge threads can exit when the state changes to SRV_SHUTDOWN_CLEANUP
          if there aren't any records to purge.
    ------------------------------------------------------------
    revno: 3402.50.188
    committer: Rohit Kalhans <rohit.kalhans@oracle.com>
    branch nick: mysql_trunk_b11758263
    timestamp: Tue 2012-02-14 12:23:45 +0530
    message:
      Bug#11758263: Fixing failure in rpl.pl_parallel_temp_query on PB2
    ------------------------------------------------------------
    revno: 3402.50.187
    committer: Sunny Bains <Sunny.Bains@Oracle.Com>
    branch nick: trunk
    timestamp: Tue 2012-02-14 17:30:44 +1100
    message:
      Bug #13628249 - ASSERT MAX_UNDO_LOGS == ULINT_UNDEFINED WHEN INNODB-FORCE-RECOVERY >= 5
      Bug #13628420	NORML SHUTDOWN HANGS WHEN INNODB-FORCE-RECOVERY=3 AND THERE ARE TXNS TO ROLLBACK
      
      There are two parts to this fix, the first was introduced by the fix for
      bug#13255225. The srv_undo_logs should be set to ULINT_UNDEFINED if force
      recovery >= 3.
      
      The second fix is to prevent data dictionary temp tables and indexes drop,
      if force recovery >= 3. This is the same level at which we prevent rollback
      of recovered user transactions.
      
      rb://944 Approved by Jimmy Yang.
    ------------------------------------------------------------
    revno: 3402.50.186
    committer: Sunny Bains <Sunny.Bains@Oracle.Com>
    branch nick: trunk
    timestamp: Tue 2012-02-14 17:27:03 +1100
    message:
      Bug#11765863 58868: SHUTDOWN HANG WAITING FOR PURGE THREAD TO BE SUSPENDED, OR ASSERT
      
      Update test that was missed in the first commit.
    ------------------------------------------------------------
    revno: 3402.50.185
    committer: Sunny Bains <Sunny.Bains@Oracle.Com>
    branch nick: trunk
    timestamp: Tue 2012-02-14 16:30:35 +1100
    message:
      Bug#11765863 58868: SHUTDOWN HANG WAITING FOR PURGE THREAD TO BE SUSPENDED, OR ASSERT
      
      This patch fixes several issues with purge:
      
       1. When a worker thread or the purge coordinator had to exit there was a
          race between the time it suspended itself and then freed the slot. The
          fix is to acquire the srv_sys->mutex and do the suspend and free together.
      
       2. Worker threads could exit before the purge coordinator because they
          were checking the global server status. The fix is to make them check the
          purge_sys_t::status. This status is set to exit by the purge coordinator
          thread on exit.
      
       3. We could not reliably stop or restart purge, this is required for WL#5522
          and also for testing. Fix is to use states that control purge.
      
       4. If the last purge batch resulted in 0 purge, then the purge coordinator
          thread would suspend itself even if the history list length was long.
          This was a problem because it would not be woken up until new RW
          transactions were committed. The fix is to use a timed wait and check
          the history list length before suspending.
      
      SHOW ENGINE INNODB STATUS - will now print the purge state.
      
      Added two new counters:
       1. purge_stop_count - number of times trx_purge_stop() was called
      
       2. purge_resume_count - number of times trx_purge_run() was called
      
      rb://943 Approved by Jimmy Yang.
    ------------------------------------------------------------
    revno: 3402.50.184
    committer: Jon Olav Hauglid <jon.hauglid@oracle.com>
    branch nick: mysql-trunk-wl5185
    timestamp: Mon 2012-02-13 16:23:37 +0100
    message:
      WL#5185 Remove deprecated 5.1 features
      
      Follow-up patch to remove features scheduled for deletion,
      but which, by mistake, were not deleted in the original patch.
      
      This patch removes:
      - SET OPTION ... (use SET ... instead)
      - ONE_SHOT keyword (usage removed by original patch)
      
      Also updates test cases and mysqldump which used the
      old SET OPTION syntax.
    ------------------------------------------------------------
    revno: 3402.50.183
    committer: Tor Didriksen <tor.didriksen@oracle.com>
    branch nick: trunk-qsort
    timestamp: Mon 2012-02-13 12:59:41 +0100
    message:
      WL#6160 filesort optimization: use std::stable_sort rather than quicksort
      Post-push fix: change sort result.
    ------------------------------------------------------------
    revno: 3402.50.182
    committer: Jon Olav Hauglid <jon.hauglid@oracle.com>
    branch nick: mysql-trunk-test
    timestamp: Mon 2012-02-13 11:45:46 +0100
    message:
      Bug#13417754 ASSERT IN ROW_DROP_DATABASE_FOR_MYSQL DURING DROP SCHEMA
      
      Follow-up patch to fix test failure in create-big.test.
      
      The original patch changed the behavior for ALTER TABLE ... RENAME
      so that it now blocks if it can't acquire metadata lock on the
      target table (matching behavior of RENAME TABLE). Create-big.test
      tested for the old behavior where ALTER TABLE ... RENAME in such
      cases did not block but reported an error immediately instead.
      
      This patch fixes updates the create-big.test to match the new
      behavior.
    ------------------------------------------------------------
    revno: 3402.50.181 [merge]
    committer: Rohit Kalhans <rohit.kalhans@oracle.com>
    branch nick: mysql-trunk_b11758263_test
    timestamp: Mon 2012-02-13 15:42:55 +0530
    message:
      merge from mysql-5.5->mysql-trunk
        ------------------------------------------------------------
        revno: 2875.341.6
        committer: Rohit Kalhans <rohit.kalhans@oracle.com>
        branch nick: mysql-5.5_bug11758263
        timestamp: Mon 2012-02-13 15:37:50 +0530
        message:
          fixing test failure on pb2.
    ------------------------------------------------------------
    revno: 3402.50.180
    committer: Gopal Shankar <gopal.shankar@oracle.com>
    branch nick: mysql-depre
    timestamp: Mon 2012-02-13 15:15:43 +0530
    message:
      Bug#13586314 - RUNTIME - HIBISCUS: ISSUE DEPRECATION
                     WARNING FOR LOW_PRIORITY MODIFIER
      
      As of 5.5.3, the LOW_PRIORITY modifier for
      'LOCK TABLES tbl_name LOW_PRIORITY WRITE' command has no
      effect. This patch adds deprecation warning for above command,
      based on a decision made as part of WL#6101.
    ------------------------------------------------------------
    revno: 3402.50.179 [merge]
    committer: Rohit Kalhans <rohit.kalhans@oracle.com>
    branch nick: mysql-trunk_b11758263
    timestamp: Mon 2012-02-13 14:20:03 +0530
    message:
      merge from mysql 5.5->mysql-trunk
        ------------------------------------------------------------
        revno: 2875.341.5
        committer: Rohit Kalhans <rohit.kalhans@oracle.com>
        branch nick: mysql-5.5_bug11758263
        timestamp: Mon 2012-02-13 14:12:13 +0530
        message:
          BUG#11758263: Modification of indentation in the added code.
                        Fixed a typo in the comment.
                        Fixing test cases which were previouslyno throwing  due
                        disable warnings macro. 
    ------------------------------------------------------------
    revno: 3402.50.178
    committer: Sunny Bains <Sunny.Bains@Oracle.Com>
    branch nick: trunk
    timestamp: Mon 2012-02-13 19:22:20 +1100
    message:
      Bug#13614037 - CRASH IN LOCK_TABLE_CREATE DURING KILL_CONNECTION
            
      DDL transactions must be tagged with trx_t::will_lock. This was missing for:
            
       1. DROP TABLE
       2. DROP DATABASE
       3. RENAME TABLE
            
      Otherwise our check for non-locking-autocommit-read-only transactions will
      mistakenly tag them as true.
            
      rb://930 Approved by Jimmy Yang.
    ------------------------------------------------------------
    revno: 3402.50.177
    committer: Alexander Barkov <alexander.barkov@oracle.com>
    branch nick: mysql-trunk.guilhem
    timestamp: Mon 2012-02-13 10:26:52 +0400
    message:
      Post-fix for WL#946 "Fractional seconds..."
      
      - Field_temporal::store()
      
        Fixing the code merging two error codes in Field_temporal::store()
        1 + 3 should give 1, i.e. "error + note = error".
        Previously the code returned "error + note = note".
        Also, the old code depended on the order of "|" operand execution,
        which is not guaranteed by the C standard.
        Production build on Windows appeared to execute the operands
        in backward order.
      
      - Field_timef::store_internal()
        Adding a note on storing a DATETIME value with a non-zero date part
        into a TIME column,
        for symmetry with Field_newdate::store_internal().
      
      - convert_constant_item()
        Allow constant conversion in case of a note.
    ------------------------------------------------------------
    revno: 3402.50.176
    committer: Sunny Bains <Sunny.Bains@Oracle.Com>
    branch nick: trunk
    timestamp: Mon 2012-02-13 17:15:14 +1100
    message:
      UNDO fix for bug#13628249.
    ------------------------------------------------------------
    revno: 3402.50.175
    committer: Sunny Bains <Sunny.Bains@Oracle.Com>
    branch nick: trunk
    timestamp: Mon 2012-02-13 17:01:54 +1100
    message:
      Bug# 13628249 - ASSERT MAX_UNDO_LOGS == ULINT_UNDEFINED WHEN INNODB-FORCE-RECOVERY >= 5
      
      Fix a bug introduced by the fix for Bug#13255225. Use the available number of
      UNDO logs not the total number of known UNDO logs.
      
      Approved by Jimmy over IM.
    ------------------------------------------------------------
    revno: 3402.50.174
    committer: kevin.lewis@oracle.com
    branch nick: mysql-trunk
    timestamp: Fri 2012-02-10 16:43:46 -0600
    message:
      Enhanced test for WL6145 to show that DATA DIRECTORY is
      displayed by SHOW CREATE TABLE.
    ------------------------------------------------------------
    revno: 3402.50.173
    committer: kevin.lewis@oracle.com
    branch nick: mysql-trunk
    timestamp: Fri 2012-02-10 15:18:47 -0600
    message:
      Testcases for WL#6145
    ------------------------------------------------------------
    revno: 3402.50.172
    committer: Jorgen Loland <jorgen.loland@oracle.com>
    branch nick: mysql-trunk-13627632
    timestamp: Fri 2012-02-10 10:06:59 +0100
    message:
      Bug#13627632 - INFORMATION SCHEMA TABLES DO NOT PACK LONG 
                     VARCHAR COLUMNS
      
      db_create_option needs HA_OPTION_PACK_RECORD to be set in 
      order to create MyISAM tables with packed record format.
      
      When processing queries that access "normal" tables, temporary
      table fields are created in create_tmp_field_from_field(). On
      the other hand, queries against information_schema tables
      create fields for the temporary table in
      create_tmp_field_for_schema(). This patch aligns the two 
      functions by setting db_create_options-flag 
      HA_OPTION_PACK_RECORD when a VARCHAR column is added for 
      schema temp tables just as is done for "normal" temp tables.
      
      The result is that temp tables for information schema queries 
      use the packed MyISAM format if they contain sufficiently 
      large VARCHAR columns.
    ------------------------------------------------------------
    revno: 3402.50.171
    committer: Sunny Bains <Sunny.Bains@Oracle.Com>
    branch nick: trunk
    timestamp: Fri 2012-02-10 15:40:19 +1100
    message:
      BUG#12739098 - 62401: ASSERTION TRX->ERROR_STATE == DB_SUCCESS, QUE0QUE.C LINE 1264 ON TRUNCATE 
      
      Move a test in innodb-index.test, that was added as part of this bug fix, to
      innodb-index-debug.test. This test uses a debug feature to simulate errors.
    ------------------------------------------------------------
    revno: 3402.50.170 [merge]
    committer: Sunny Bains <Sunny.Bains@Oracle.Com>
    branch nick: trunk
    timestamp: Fri 2012-02-10 14:13:44 +1100
    message:
      Merge from mysql-5.5.
        ------------------------------------------------------------
        revno: 2875.341.4 [merge]
        committer: Sunny Bains <Sunny.Bains@Oracle.Com>
        branch nick: 5.5
        timestamp: Fri 2012-02-10 14:11:49 +1100
        message:
          Merge from mysql-5.1.
            ------------------------------------------------------------
            revno: 2661.827.15
            committer: Sunny Bains <Sunny.Bains@Oracle.Com>
            branch nick: 5.1
            timestamp: Fri 2012-02-10 14:09:12 +1100
            message:
              BUG#12739098 - 62401: ASSERTION TRX->ERROR_STATE == DB_SUCCESS, QUE0QUE.C LINE 1264 ON TRUNCATE 
                          
              During FIC error handling the trx->error_state was not being set to DB_SUCCESS
              after failure, before attempting the next DDL SQL operation. This reset to
              DB_SUCCESS is somewhat of a requirement though not explicitly stated anywhere.
              The fix is to reset it to DB_SUCCESS in row0merge.cc if row_merge_rename_indexes
              or row_merge_drop_index functions fail, also reset to DB_SUCCESS at trx commit.
              				          
              rb://935 Approved by Jimmy Yang.
    ------------------------------------------------------------
    revno: 3402.50.169 [merge]
    committer: Sunny Bains <Sunny.Bains@Oracle.Com>
    branch nick: trunk
    timestamp: Fri 2012-02-10 13:20:47 +1100
    message:
      Merge from mysql-5.5.
      
      Additionally fix merge conflicts and update the patch with the following
      changes:
      
      1. Set trx_t::error_state=DB_SUCCESS in dict0stats.cc
      
      2. Add an error injection test that simulates a DB_TOO_MANY_CONCURRENT_TRXS
         error during FIC.
      
      Both changes part of the the original approval on rb://935.
        ------------------------------------------------------------
        revno: 2875.341.3 [merge]
        committer: Sunny Bains <Sunny.Bains@Oracle.Com>
        branch nick: 5.5
        timestamp: Fri 2012-02-10 13:04:10 +1100
        message:
          Merge from mysql-5.1-innodb.
            ------------------------------------------------------------
            revno: 2661.728.82
            committer: Sunny Bains <Sunny.Bains@Oracle.Com>
            branch nick: 5.1
            timestamp: Fri 2012-02-10 12:47:42 +1100
            message:
              BUG#12739098 - 62401: ASSERTION TRX->ERROR_STATE == DB_SUCCESS, QUE0QUE.C LINE 1264 ON TRUNCATE 
              
              During FIC error handling the trx->error_state was not being set to DB_SUCCESS
              after failure, before attempting the next DDL SQL operation. This reset to
              DB_SUCCESS is somewhat of a requirement though not explicitly stated anywhere.
              The fix is to reset it to DB_SUCCESS in row0merge.cc if row_merge_rename_indexes
              or row_merge_drop_index functions fail, also reset to DB_SUCCESS at trx commit.
              
              rb://935 Approved by Jimmy Yang.
    ------------------------------------------------------------
    revno: 3402.50.168 [merge]
    committer: Rohit Kalhans <rohit.kalhans@oracle.com>
    branch nick: mysql-trunk
    timestamp: Fri 2012-02-10 01:56:08 +0530
    message:
      merge from 5.5->trunk
        ------------------------------------------------------------
        revno: 2875.341.2
        committer: Rohit Kalhans <rohit.kalhans@oracle.com>
        branch nick: mysql-5.5_b11758263
        timestamp: Fri 2012-02-10 01:43:47 +0530
        message:
          Followup  patch for bug#11758263.
        ------------------------------------------------------------
        revno: 2875.341.1
        committer: Rohit Kalhans <rohit.kalhans@oracle.com>
        branch nick: mysql-5.5_b11758263
        timestamp: Thu 2012-02-09 23:28:33 +0530
        message:
          BUG#11758263 50440: MARK UNORDERED UPDATE WITH AUTOINC UNSAFE
                 
          Problem: Statements that write to tables with auto_increment columns
                   based on the selection from another table, may lead to master
                   and slave going out of sync, as the order in which the rows
                   are retrieved from the table may differ on master and slave.
                      
          Solution: We mark writing to a table with auto_increment table
                    based on the rows selected from another table as unsafe. This
                    will cause the execution of such statements to throw a warning
                    and forces the statement to be logged in ROW if the logging
                    format is mixed. 
                      
          Changes:
                 1. All the statements that writes to a table with auto_increment 
                    column(s) based on the rows fetched from another table, will now
                    be unsafe.
                 2. CREATE TABLE with SELECT will now be unsafe.
    ------------------------------------------------------------
    revno: 3402.50.167 [merge]
    committer: Rohit Kalhans <rohit.kalhans@oracle.com>
    branch nick: mysql-trunk
    timestamp: Thu 2012-02-09 23:34:14 +0530
    message:
      Merge from mysql-5.5-->mysql-trunk
        ------------------------------------------------------------
        revno: 2875.340.3
        committer: Rohit Kalhans <rohit.kalhans@oracle.com>
        branch nick: mysql-5.5_b11758263
        timestamp: Thu 2012-02-09 14:39:36 +0530
        message:
          BUG#11758263 50440: MARK UNORDERED UPDATE WITH AUTOINC UNSAFE
                 
          Problem: Statements that write to tables with auto_increment columns
                   based on the selection from another table, may lead to master
                   and slave going out of sync, as the order in which the rows
                   are retrived from the table may differ on master and slave.
                      
          Solution: We mark writing to a table with auto_increment table
                    based on the rows selected from another table as unsafe. This
                    will cause the execution of such statements to throw a warning
                    and forces the statement to be logged in ROW if the logging
                    format is mixed. 
                      
          Changes:
                 1. All the statements that writes to a table with auto_increment 
                    column(s) based on the rows fetched from another table, will now
                    be unsafe.
                 2. CREATE TABLE with SELECT will now be unsafe.
    ------------------------------------------------------------
    revno: 3402.50.166
    committer: Guilhem Bichot <guilhem.bichot@oracle.com>
    branch nick: trunk3
    timestamp: Thu 2012-02-09 18:07:12 +0100
    message:
      Bug #13623473 	MISSING ROWS ON SELECT AND JOIN WITH TIME/DATETIME COMPARE
      Cannot use index for indexed_time=datetime.
    ------------------------------------------------------------
    revno: 3402.50.165
    committer: Vasil Dimov <vasil.dimov@oracle.com>
    branch nick: mysql-trunk
    timestamp: Thu 2012-02-09 18:24:17 +0200
    message:
      Fix Bug#13513676 INNODB_BUFFER_POOL_DUMP_STATUS IS NOT POPULATED WITHIN EXPECTED TIME
      
      There is a tiny interval of time during startup when the status variable
      'innodb_buffer_pool_dump_status' can be '' before it becomes 'not started'.
      
      This patch makes the bug 100% reproducable:
      
      --- cut ---
        --- storage/innobase/buf/buf0dump.cc
        +++ storage/innobase/buf/buf0dump.cc
        @@ -577,12 +577,13 @@ DECLARE_THREAD(buf_dump_thread)(
         /*============================*/
         	void*	arg __attribute__((unused)))	/*!< in: a dummy parameter
         						required by os_thread_create */
         {
         	srv_buf_dump_thread_active = TRUE;
         
        +	sleep(5);
         	buf_dump_status(STATUS_INFO, "not started");
         	buf_load_status(STATUS_INFO, "not started");
      --- cut ---
      
      It is not easy to assign a default value to this variable which to be
      available before buf_dump_thread() starts, thus:
      
      The solution is to use include/wait_for_status_var.inc to wait for the
      variable to become 'not started'.
    ------------------------------------------------------------
    revno: 3402.50.164 [merge]
    committer: Guilhem Bichot <guilhem.bichot@oracle.com>
    branch nick: wl6094_6095_new
    timestamp: Thu 2012-02-09 15:16:43 +0100
    message:
      merge from trunk
        ------------------------------------------------------------
        revno: 3402.64.1
        committer: Dmitry Shulga <Dmitry.Shulga@oracle.com>
        branch nick: mysql-trunk-bug11748899
        timestamp: Thu 2012-02-09 20:56:44 +0600
        message:
          Fixed bug#11748899 (formerly known as 37666): Event set to DISABLED status
          and ON COMPLETION NOT PRESERVE is deleted at server restart.
          
          From user's point of view when user creates event with default on
          completion behaviour and its status is DISABLE,
          then after restart of server this event is deleted from schema.
          
          The problem was that during loading of events from mysql.event table
          server was used incorrect implementation for 'on completion' behaviour, i.e.
          if event loaded from table had status value DISABLE and ON COMPLETION flag
          was equal to true, then server deleted event from table without regarding 
          status value. The root of cause was at the method Events::load_events_from_db()
          (this method called by Events::init() during server startup initialization).
          This method reads every event from table and creates event object from 
          loaded data. When event that was disabled and had the default ON COMPLETION
          NOT PRESERVE behaviour was loaded from mysql.event table into
          object of class Event_queue_element then it had attribute
          on_completion=Event_parse_data::ON_COMPLETION_DROP and
          status = Event_parse_data::DISABLED. After loading completed it tries to
          put event into queue but this failed because status == DISABLE.
          Then this event dropped since the condition 
          'else if (drop_on_completion)' is true.
          
          The solution is to change wrong condition. The right condition is
          to check for value of attribute Event_queue_element::dropped that is set
          to true when event really should dropped because it expired
          (this check is implemented at
          Event_queue_element::compute_next_execution_time).
          
          This patch also fix a bug related to deleting of expired events from 
          mysql.event table after server restart.
          
          The problem was that if there was an event that expired at time T
          and before that time came server was down and started again after 
          time T was elapsed then expired event will never be removed.
          
          The reason for this bug is that when the server initializes scheduler
          structures at Events::init() it's never calls set_time() 
          for new THD object and so THD::start_time attribute has value 0.
          Afterwards when events is loaded from mysql.event table into memory
          server checks end_time of event against value of 
          current_thd->query_start() that returns value 0. As a result expired
          events is considered as expired.
          
          The solution is to call THD::set_time() for new created THD at Events::init.
    ------------------------------------------------------------
    revno: 3402.50.163 [merge]
    committer: Guilhem Bichot <guilhem.bichot@oracle.com>
    branch nick: wl6094_6095_new
    timestamp: Thu 2012-02-09 15:13:46 +0100
    message:
      merge with trunk
        ------------------------------------------------------------
        revno: 3402.63.1
        committer: Guilhem Bichot <guilhem.bichot@oracle.com>
        branch nick: wl6094_6095_final
        timestamp: Wed 2012-02-08 16:25:17 +0100
        message:
          WL#6094 Allow subquery materialization in NOT IN if all columns are not nullable
          WL#6095 Allow subquery materialization in NOT IN if single-column subquery.
          And related refactorings: uniquesubquery_engine is deleted, it's just a particular
          case of indexsubquery_engine.
          Bug#13495157 - SUBQUERY MATERIALIZATION NOT USED FOR CERTAIN STATEMENTS.
          
          Subquery materialization has problems identifying partial matches
          (if an outer or inner expression is NULL, IN(materialized-subq) may return
          FALSE when UNKNOWN would be the correct answer).
          Due to this, subq-mat was so far confined to use cases where FALSE
          and UNKNOWN are equivalent answers, for example
            WHERE x IN (subq)
          but not
            WHERE x NOT IN (subq).
          This restriction is here lifted in some cases:
          - if all columns are nullable (WL#6094), in which case NULLs can't happen
          so problem can't happen
          - if there is a single outer expression (WL#6095), in which case it's easy
          to know what the correct answer is (see comment of item_subselect.cc
          for the logic)
          
          Subquery materialization is now usable by multi-table UPDATE and DELETE.
    ------------------------------------------------------------
    revno: 3402.50.162
    committer: Venkata Sidagam <venkata.sidagam@oracle.com>
    branch nick: mysql-trunk-bug-47704
    timestamp: Thu 2012-02-09 17:47:37 +0530
    message:
      Bug #11755870-47704: HASH INDEX ON VARCHAR PREFIX NOT WORKING CORRECTLY.
      
      Brief description: Insert some rows to MEMORY table with HASH key on varchar field.
      A select on specific existing tuple is showing empty set.
      
      Problem Analysis/solution: In hp_key_cmp() when the seg->type == HA_KEYTYPE_VARTEXT1
      the char_length_rec is the length of pos string and it is compared with key string for
      char_length_key bytes. Here both char_length_rec and char_length_key will be of different
      values when we have hash index on column prefix. So the comparition is failing and 
      the result set is empty.
      
      So the fix is, if char_length_rec has more value than the char_length_key make 
      char_length_rec as same as char_length_key
    ------------------------------------------------------------
    revno: 3402.50.161
    committer: Dmitry Shulga <Dmitry.Shulga@oracle.com>
    branch nick: mysql-trunk-bug11764747
    timestamp: Thu 2012-02-09 18:57:42 +0600
    message:
      Patch for bug#11764747 (formerly known as 57612): SET GLOBAL READ_ONLY=1 cannot
      progress when a table is locked with LOCK TABLES.
      
      The reason for the bug was that mysql server makes a flush of all open tables
      during handling of statement 'SET GLOBAL READ_ONLY=1'. Therefore if some of
      these tables were locked by "LOCK TABLE ... READ" from a different connection,
      then execution of statement 'SET GLOBAL READ_ONLY=1' would be waiting for
      the lock for such table even if the table was locked in a compatible read mode.
      
      Flushing of all open tables before setting of read_only system variable
      is inherited from 5.1 implementation since this was the only possible approach
      to ensure that there isn't any pending write operations on open tables.
      
      Start from version 5.5 and above such behaviour is guaranteed by the fact
      that we acquire global_read_lock before setting read_only flag. Since
      acquiring of global_read_lock is successful only when there isn't any 
      active write operation then we can remove flushing of open tables from
      processing of SET GLOBAL READ_ONLY=1.
      
      This modification changes the server behavior so that read locks held
      by other connections (LOCK TABLE ... READ) no longer will block attempts
      to enable read_only.
    ------------------------------------------------------------
    revno: 3402.50.160
    committer: Jorgen Loland <jorgen.loland@oracle.com>
    branch nick: mysql-trunk-13354910
    timestamp: Thu 2012-02-09 12:22:17 +0100
    message:
      Bug#13354910 - MAKE_JOIN_STATISTICS() INVOKES 
                     RECORDS_IN_RANGE(MIN_KEY=0X0, MAX_KEY=0X0)
      
      Some range predicates that by them selves make up partial 
      ranges are merged into a full range by the range optimizer. 
      An example is the query for this bug:
      
        "WHERE col IN (1,2,6) OR col NOT IN (1)"
      
      This predicate is always true and is correctly merged into
      the range [-inf <= col <= +inf]. However, although the range
      optimizer did make a full range, it did not realize that it's
      meaningless to use this as a range predicate since that will 
      be the same as doing an index scan.
      
      For the query in the bug the problem was that 
      SEL_ARG::copy_max() had a bug: When checking if the range was
      a full range, it was checked if max_flag was set to 
      (NO_MAX_RANGE | NO_MIN_RANGE). But the NO_MIN_FLAG is stored
      in min_flag, so the test is changed to 
      (max_flag & NO_MAX_FLAG) and (min_flag & NO_MIN_FLAG).
      
      Enabling the DBUG_ASSERT(max_key || min_key) in 
      ha_innobase::records_in_range() then showed another related 
      bug: innodb_icp started failing because SEL_ARG::copy_min()
      had the very same bug as copy_max(). This was fixed as well.
      
      In an attempt at unittesting SEL_ARG, copy_min() and copy_max()
      have now been added to the opt_range-t gunit test.
      
      To see the assert, add "DBUG_ASSERT(min_key || max_key);"
      to the beginning of ha_innobase::records_in_range().
    ------------------------------------------------------------
    revno: 3402.50.159
    committer: Guilhem Bichot <guilhem.bichot@oracle.com>
    branch nick: trunk3
    timestamp: Wed 2012-02-08 21:52:22 +0100
    message:
      Fix for
      Bug #13688248 	CRASH IN DIAGNOSTICS_AREA::SET_OK_STATUS WHEN USING DEBUG_SYNC.
      And, to test the above, I had to fix
      Bug #13688015 	THE OPTION --LOOSE-DEBUG-SYNC-TIMEOUT IS PLACED WRONG
    ------------------------------------------------------------
    revno: 3402.50.158
    committer: Jorgen Loland <jorgen.loland@oracle.com>
    branch nick: mysql-trunk-13354910
    timestamp: Thu 2012-02-09 10:09:58 +0100
    message:
      BUG#13354910 - MAKE_JOIN_STATISTICS() INVOKES 
                     RECORDS_IN_RANGE(MIN_KEY=0X0, MAX_KEY=0X0)
      
      Preparation patch: improve readability of key_or() by using more
      descriptive variable names.
    ------------------------------------------------------------
    revno: 3402.50.157 [merge]
    committer: Nuno Carvalho <nuno.carvalho@oracle.com>
    branch nick: mysql-trunk
    timestamp: Wed 2012-02-08 14:31:05 +0000
    message:
      BUG#13680651 - RPL_CORRUPTION TEST FAILS WITH SLAVE STOPPED WITH WRONG ERROR CODE ON VALGRIND
      
      rpl.rpl_corruption test fails with slave stopped with wrong error code:
      1721 (expected 1595,1722) on rhel5-x86-64bit-valgrind on daily trunk.
      
      Changed error code to the correct one, 1721 SQLSTATE: HY000
      (ER_NETWORK_READ_EVENT_CHECKSUM_FAILURE).
        ------------------------------------------------------------
        revno: 3402.62.1
        committer: Nuno Carvalho <nuno.carvalho@oracle.com>
        branch nick: mysql-trunk
        timestamp: Mon 2012-02-06 11:55:44 +0000
        message:
          BUG#13680651 - RPL_CORRUPTION TEST FAILS WITH SLAVE STOPPED WITH WRONG ERROR CODE ON VALGRIND
          
          rpl.rpl_corruption test fails with slave stopped with wrong error code:
          1721 (expected 1595,1722) on rhel5-x86-64bit-valgrind on daily trunk.
          
          Changed error code to the correct one, 1721 SQLSTATE: HY000
          (ER_NETWORK_READ_EVENT_CHECKSUM_FAILURE).
    ------------------------------------------------------------
    revno: 3402.50.156
    committer: Jon Olav Hauglid <jon.hauglid@oracle.com>
    branch nick: mysql-trunk-test
    timestamp: Wed 2012-02-08 14:10:23 +0100
    message:
      Bug#13417754 ASSERT IN ROW_DROP_DATABASE_FOR_MYSQL DURING DROP SCHEMA
      
      This assert could be triggered if an InnoDB table was being moved
      to a different database using ALTER TABLE ... RENAME, while this
      database concurrently was being dropped by DROP DATABASE.
      
      The reason for the problem was that no metadata lock was taken
      on the target database by ALTER TABLE ... RENAME.
      DROP DATABASE was therefore not blocked and could remove
      the database while ALTER TABLE ... RENAME was executing. This
      could cause the assert in InnoDB to be triggered.
      
      This patch fixes the problem by taking a IX metadata lock on
      the target database before ALTER TABLE ... RENAME starts
      moving a table to a different database.
      
      Note that this problem did not occur with RENAME TABLE which
      already takes the correct metadata locks.
      
      Also note that this patch slightly changes the behavior of
      ALTER TABLE ... RENAME. Before, the statement would abort and
      return an error if a lock on the target table name could not
      be taken immediately. With this patch, ALTER TABLE ... RENAME
      will instead block and wait until the lock can be taken 
      (or until we get a lock timeout). This also means that it is
      possible to get ER_LOCK_DEADLOCK errors in this situation
      since we allow ALTER TABLE ... RENAME to wait and not just
      abort immediately.
      
      Test case added to innodb_mysql_sync.test.
    ------------------------------------------------------------
    revno: 3402.50.155
    committer: Vasil Dimov <vasil.dimov@oracle.com>
    branch nick: mysql-trunk-wl6024
    timestamp: Wed 2012-02-08 14:49:33 +0200
    message:
      Fix compilation warning with GCC 4.6:
      
      sql_show.cc: In function 'int store_create_info(THD*, TABLE_LIST*, String*, HA_CREATE_INFO*, bool)':
      sql_show.cc:1429:8: error: variable 'show_table_options' set but not used [-Werror=unused-but-set-variable]
    ------------------------------------------------------------
    revno: 3402.50.154
    committer: Roy Lyseng <roy.lyseng@oracle.com>
    branch nick: mysql-review
    timestamp: Wed 2012-02-08 11:33:37 +0100
    message:
      Refactoring: Remove member and_tables_cache of Item_cond.
      
      The Item_cond class maintains both not_null_tables_cache
      and and_tables_cache to implement the not_null_tables()
      interface. and_tables_cache is only used for conditions of
      type AND, but it is simple to replace its use with
      not_null_tables_cache.
      
      sql/item.h:
        Deleted Item_name_const::const_item() and
        Item_sp_variable::const_item(), as they are the same as for the
        base class.
      
      sql/item_cmpfunc.cc:
        Maintain not_null_tables_cache instead of and_tables_cache.
      
      sql/item_cmpfunc.h:
        Remove member and_tables_cache, remove function not_null_tables()
        for class Item_cond.
------------------------------------------------------------
revno: 3638
committer: Luis Soares <luis.soares@oracle.com>
branch nick: mysql-trunk-wl3584
timestamp: Thu 2012-02-16 22:05:03 +0000
message:
  WL#3584
  
  Fixing result file for mysqld--help-win.test .
------------------------------------------------------------
revno: 3637
committer: Andrei Elkin <andrei.elkin@oracle.com>
branch nick: mysql-trunk-wl3584
timestamp: Thu 2012-02-16 23:25:06 +0200
message:
  Bug#13727933 - PURGE BINARY LOGS TO MIGHT BE INEFFECTIVE AND NOT VERBOSE ABOUT THAT
  
  This is a workaround patch as PURGE can't be used so RESET MASTER is attempted as a tool 
  to remove binlog files and thereby to desynchronize master and slave wrt GTID data.
  
  I had to change the test in three more parts: two are the local slave side
  INSERT and DROP as parts of the workaround, and
  yet another 
  --source include/have_binlog_format_mixed_or_statement.inc
  due to a new being reported Bug 13729084.
------------------------------------------------------------
revno: 3636
committer: Luis Soares <luis.soares@oracle.com>
branch nick: mysql-trunk-wl3584
timestamp: Thu 2012-02-16 19:54:11 +0000
message:
  WL#3584
  
  Renaming back the collection.
------------------------------------------------------------
revno: 3635
committer: Luis Soares <luis.soares@oracle.com>
branch nick: mysql-trunk-wl3584
timestamp: Thu 2012-02-16 18:57:29 +0000
message:
  WL#3584
  
  Moved some tests to the newly created release build branch.
------------------------------------------------------------
revno: 3634
committer: Luis Soares <luis.soares@oracle.com>
branch nick: mysql-trunk-wl3584
timestamp: Thu 2012-02-16 18:19:43 +0000
message:
  WL#3584
  
  Fixed result file for test case: mysqld--help-notwin .
------------------------------------------------------------
revno: 3633
committer: Andrei Elkin <andrei.elkin@oracle.com>
branch nick: mysql-trunk-wl3584
timestamp: Thu 2012-02-16 17:11:03 +0200
message:
  wl#3584 
  
  Couple of asserts seem to have survived cleanup done at empty group patch time;
  a new test is added in order to exprore circumstances of rpl.rpl_gtid_lost_fail_to_connect
  failure.
------------------------------------------------------------
revno: 3632
committer: Sven Sandberg <sven.sandberg@oracle.com>
branch nick: trunk-wl3584-1
timestamp: Thu 2012-02-16 12:55:03 +0100
message:
  WL#3584 cleanup
  Put Gtid_log_event on the dump thread's stack
  to avoid allocation
------------------------------------------------------------
revno: 3631
committer: Sven Sandberg <sven.sandberg@oracle.com>
branch nick: trunk-wl3584-1
timestamp: Thu 2012-02-16 12:54:03 +0100
message:
  WL#3584 cleanup
  document the currently possible values of gtid_mode
------------------------------------------------------------
revno: 3630
committer: Sven Sandberg <sven.sandberg@oracle.com>
branch nick: trunk-wl3584-2
timestamp: Thu 2012-02-16 12:53:35 +0100
message:
  WL#3584 tests
  made rpl_gtid_parallel work more as intended.
------------------------------------------------------------
revno: 3629
committer: Andrei Elkin <andrei.elkin@oracle.com>
branch nick: mysql-trunk-wl3584
timestamp: Thu 2012-02-16 12:44:49 +0200
message:
  wl#3584
  
  restoring few tests to run in GTID-ON mode.
------------------------------------------------------------
revno: 3628
committer: Sven Sandberg <sven.sandberg@oracle.com>
branch nick: trunk-wl3584-2
timestamp: Thu 2012-02-16 11:36:58 +0100
message:
  WL#3584 tests
  improve rpl_gtid_parallel:
   - use correct quoting in perl script to avoid interpolation
   - make workload bounded by 5 minutes
------------------------------------------------------------
revno: 3627
committer: Alfranio Correia <alfranio.correia@oracle.com>
branch nick: mysql-trunk-wl3584.merge
timestamp: Wed 2012-02-15 11:38:54 +0000
message:
  Fixed rpl_check_gtid what was sporadically failing on PB.
------------------------------------------------------------
revno: 3626 [merge]
committer: Sven Sandberg <sven.sandberg@oracle.com>
branch nick: trunk-wl3584-1
timestamp: Tue 2012-02-14 23:36:55 +0100
message:
  WL#3584 merge
  merged [sven's changes] with [alfranio's changes]
  no conflicts
    ------------------------------------------------------------
    revno: 3624.1.1
    committer: Alfranio Correia <alfranio.correia@oracle.com>
    branch nick: mysql-trunk-wl3584.merge
    timestamp: Tue 2012-02-14 15:31:09 +0000
    message:
      Increased coverage.
------------------------------------------------------------
revno: 3625
committer: Sven Sandberg <sven.sandberg@oracle.com>
branch nick: trunk-wl3584-1
timestamp: Tue 2012-02-14 23:25:30 +0100
message:
  WL#3584 test fixes
  Fix the rpl_crash_safe, rpl_mixing_engines, and rpl_mts_crash_safe
  files in extra/rpl_tests. They were broken by a previous patch.
  Now, they all use $mtr_variables instead of @server_variables,
  which improves speed since we can do string comparison without making
  a round trip to the server. Moreover, the files do not rely as much
  on undocumented side-effects of other include files as they used to
  (in particular, rpl_mts_crash_safe and rpl_crash_safe don't rely on
  rpl_mixing_engines setting $commands to the empty string).
------------------------------------------------------------
revno: 3624
committer: Alfranio Correia <alfranio.correia@oracle.com>
branch nick: mysql-trunk-wl3584.merge
timestamp: Tue 2012-02-14 07:55:14 +0000
message:
  Improved coverage.
------------------------------------------------------------
revno: 3623
committer: Andrei Elkin <andrei.elkin@oracle.com>
branch nick: mysql-trunk-wl3584
timestamp: Mon 2012-02-13 17:31:42 +0200
message:
  wl#3584
  
  adding GTID-ON modes to run per push on a new alias tree just created.
------------------------------------------------------------
revno: 3622
committer: Sven Sandberg <sven.sandberg@oracle.com>
branch nick: trunk-wl3584-1
timestamp: Mon 2012-02-13 14:33:32 +0100
message:
  WL#3584 tests
  make filter_file.inc filter windows newlines better
------------------------------------------------------------
revno: 3621
committer: Sven Sandberg <sven.sandberg@oracle.com>
branch nick: trunk-wl3584-1
timestamp: Mon 2012-02-13 14:08:50 +0100
message:
  WL#3584 tests
  Optimize tests using extra/rpl_tests/rpl_mixing_engines.test
  These tests became slower because of a previous test patch as
  part of WL#3584. The tests are slow for many reasons. This
  changeset fixes one other reason, so that the probability of
  timeout in pushbuild is reduced.
------------------------------------------------------------
revno: 3620
committer: Alfranio Correia <alfranio.correia@oracle.com>
branch nick: mysql-trunk-wl3584.merge
timestamp: Fri 2012-02-10 18:40:40 +0000
message:
  Improved coverage numbers.
------------------------------------------------------------
revno: 3619
committer: Andrei Elkin <andrei.elkin@oracle.com>
branch nick: mysql-trunk-wl3584
timestamp: Fri 2012-02-10 17:39:29 +0200
message:
  wl#3584 GTID
  
  A failover demo test is added.
------------------------------------------------------------
revno: 3618
committer: Sven Sandberg <sven.sandberg@oracle.com>
branch nick: trunk-wl3584-1
timestamp: Fri 2012-02-10 14:11:55 +0100
message:
  WL#3584 test fixes
  Make rpl_gtid_parallel more portable:
   - avoid long command line
   - don't redirect to /dev/null
------------------------------------------------------------
revno: 3617
committer: Sven Sandberg <sven.sandberg@oracle.com>
branch nick: trunk-wl3584-1
timestamp: Fri 2012-02-10 12:51:23 +0100
message:
  WL#3584 tests
  another try at normalizing the line terminators in filter_file.inc
------------------------------------------------------------
revno: 3616
committer: Sven Sandberg <sven.sandberg@oracle.com>
branch nick: trunk-wl3584-1
timestamp: Fri 2012-02-10 12:17:50 +0100
message:
  WL#3584 tests
  updated some result files
------------------------------------------------------------
revno: 3615
committer: Sven Sandberg <sven.sandberg@oracle.com>
branch nick: trunk-wl3584-1
timestamp: Thu 2012-02-09 16:48:53 +0100
message:
  WL#3584 test
  Added test running many concurrent clients
------------------------------------------------------------
revno: 3614
committer: Sven Sandberg <sven.sandberg@oracle.com>
branch nick: trunk-wl3584-1
timestamp: Thu 2012-02-09 16:27:30 +0100
message:
  WL#3584 tests
  updated result files
------------------------------------------------------------
revno: 3613
committer: Sven Sandberg <sven.sandberg@oracle.com>
branch nick: trunk-wl3584-1
timestamp: Thu 2012-02-09 14:14:33 +0100
message:
  WL#3584 fix tests
  update a few tests/result files after previous push
------------------------------------------------------------
revno: 3612
committer: Sven Sandberg <sven.sandberg@oracle.com>
branch nick: trunk-wl3584-2
timestamp: Wed 2012-02-08 21:01:18 +0100
message:
  WL#3584 test fix
  Fixed race in rpl_gtid_execution.
  It is not guaranteed that the server has started to execute the query
  after we executed 'sent'; we have to wait until the query shows up in
  SHOW PROCESSLIST.
  Also fixed include/wait_condition.inc so that it doesn't change the
  status of enable_query_log/disable_query_log. And make it die on error
  instead of print message to the query log.
------------------------------------------------------------
revno: 3611
committer: Alfranio Correia <alfranio.correia@oracle.com>
branch nick: mysql-trunk-wl3584.merge
timestamp: Wed 2012-02-08 19:09:09 +0000
message:
  Previous_gtids_log_event was wrongly setting group_relay_log_pos making
  the relay log coordinates going back in time.
------------------------------------------------------------
revno: 3610
committer: Sven Sandberg <sven.sandberg@oracle.com>
branch nick: trunk-wl3584
timestamp: Wed 2012-02-08 19:20:21 +0100
message:
  WL#3584
  take correct lock after UNTIL SQL_BEFORE_GTIDS stops
------------------------------------------------------------
revno: 3609 [merge]
committer: Alfranio Correia <alfranio.correia@oracle.com>
branch nick: mysql-trunk-wl3584.merge
timestamp: Wed 2012-02-08 15:49:24 +0000
message:
  merge mysql-trunk --> mysql-trunk-wl3584
    ------------------------------------------------------------
    revno: 3402.50.153
    committer: Vasil Dimov <vasil.dimov@oracle.com>
    branch nick: mysql-trunk-wl6024
    timestamp: Wed 2012-02-08 11:44:42 +0200
    message:
      Fix compilation failure when compiling with partitioning disabled.
      partition_names is not defined in this case.
      
      Reviewed by:	mattiasj (via IM)
    ------------------------------------------------------------
    revno: 3402.50.152 [merge]
    committer: Rohit Kalhans <rohit.kalhans@oracle.com>
    branch nick: mysql_trunk_rollback
    timestamp: Wed 2012-02-08 12:15:31 +0530
    message:
      null merge from mysql-5.5 -> mysql-trunk
        ------------------------------------------------------------
        revno: 2875.340.2
        committer: Rohit Kalhans <rohit.kalhans@oracle.com>
        branch nick: mysql_5.5_rollback
        timestamp: Wed 2012-02-08 12:10:55 +0530
        message:
          Backout the patch for bug#11758263.
        ------------------------------------------------------------
        revno: 2875.340.1
        committer: Rohit Kalhans <rohit.kalhans@oracle.com>
        branch nick: mysql-5.5_bug11758263
        timestamp: Wed 2012-02-08 00:33:08 +0530
        message:
          BUG#11758263 50440: MARK UNORDERED UPDATE WITH AUTOINC UNSAFE
                
                Problem: Statements that write to tables with auto_increment columns
                based on the selection from another table, may lead to master
                and slave going out of sync, as the order in which the rows
                are retrived from the table may differ on master and slave.
                
                Solution: We mark writing to a table with auto_increment table
                as unsafe. This will cause the execution of such statements to
                throw a warning and forces the statement to be logged in ROW if
                the logging format is mixed. 
                
                Changes: 
                1. All the statements that writes to a table with auto_increment 
                column(s) based on the rows fetched from another table, will now
                be unsafe.
                2. CREATE TABLE with SELECT will now be unsafe.
    ------------------------------------------------------------
    revno: 3402.50.151
    committer: Rohit Kalhans <rohit.kalhans@oracle.com>
    branch nick: mysql_trunk_rollback
    timestamp: Wed 2012-02-08 12:02:46 +0530
    message:
      reverting changes for the last push for bug#11758263 and the followup patch for the same.
    ------------------------------------------------------------
    revno: 3402.50.150
    committer: kevin.lewis@oracle.com
    branch nick: mysql-trunk
    timestamp: Tue 2012-02-07 17:33:54 -0600
    message:
      WL#6145 - This patch moves to the storage engine the code that
      determines whether DATA DIRECTORY and INDEX DIRECTORY on a
      CREATE TABLE command is ignored.  It affects Archive and MyISAM
      storage engines where these clauses are used, and it affects the
      Partition engine where these clauses are passed through to the
      lower engine.  In the future, WL5980, InnoDB will also use these
      clauses.
    ------------------------------------------------------------
    revno: 3402.50.149 [merge]
    committer: Guilhem Bichot <guilhem.bichot@oracle.com>
    branch nick: semijoin_ls
    timestamp: Tue 2012-02-07 22:08:21 +0100
    message:
      merge from trunk
        ------------------------------------------------------------
        revno: 3402.61.1
        committer: Rohit Kalhans <rohit.kalhans@oracle.com>
        branch nick: mysql-trunk_bug11758263_final
        timestamp: Wed 2012-02-08 02:28:20 +0530
        message:
          follow-up patch for the last push for BUG#11758263
    ------------------------------------------------------------
    revno: 3402.50.148
    committer: Guilhem Bichot <guilhem.bichot@oracle.com>
    branch nick: semijoin_ls
    timestamp: Tue 2012-02-07 21:32:47 +0100
    message:
      Temporarily revert fix for
      Bug#13623473 MISSING ROWS ON SELECT AND JOIN WITH TIME/DATETIME COMPARE
      until the failure of ps_2myisam on Windows non-debug builds
      in pb2 is fixed.
    ------------------------------------------------------------
    revno: 3402.50.147 [merge]
    committer: Rohit Kalhans <rohit.kalhans@oracle.com>
    branch nick: mysql-trunk_bug11758263_final
    timestamp: Wed 2012-02-08 00:36:57 +0530
    message:
      merge from mysql-5.5 to trunk after the patch for bug#11758263.
        ------------------------------------------------------------
        revno: 2875.337.18
        committer: Rohit Kalhans <rohit.kalhans@oracle.com>
        branch nick: mysql-5.5_bug11758263
        timestamp: Tue 2012-02-07 18:59:56 +0530
        message:
          BUG#11758263 50440: MARK UNORDERED UPDATE WITH AUTOINC UNSAFE
                
                Problem: Statements that write to tables with auto_increment columns
                based on the selection from another table, may lead to master
                and slave going out of sync, as the order in which the rows
                are retrived from the table may differ on master and slave.
                
                Solution: We mark writing to a table with auto_increment table
                as unsafe. This will cause the execution of such statements to
                throw a warning and forces the statement to be logged in ROW if
                the logging format is mixed. 
                
                Changes: 
                1. All the statements that writes to a table with auto_increment 
                column(s) based on the rows fetched from another table, will now
                be unsafe.
                2. CREATE TABLE with SELECT will now be unsafe.
    ------------------------------------------------------------
    revno: 3402.50.146
    committer: Guilhem Bichot <guilhem.bichot@oracle.com>
    branch nick: trunk3
    timestamp: Tue 2012-02-07 15:50:31 +0100
    message:
      Fix for Bug#13651009 WRONG RESULT FROM DERIVED TABLE IF THE SUBQUERY HAS AN EMPTY RESULT
      Empty const table didn't cause the query to have an empty result set.
    ------------------------------------------------------------
    revno: 3402.50.145 [merge]
    committer: Guilhem Bichot <guilhem.bichot@oracle.com>
    branch nick: trunk3
    timestamp: Tue 2012-02-07 15:24:22 +0100
    message:
      merge from trunk
        ------------------------------------------------------------
        revno: 3402.60.1
        committer: Jorgen Loland <jorgen.loland@oracle.com>
        branch nick: mysql-trunk-wl5957
        timestamp: Tue 2012-02-07 14:06:27 +0100
        message:
          Bug#13686970 - _MI_PRINT_KEY ITERATES ONE TIME TOO MUCH 
                         WHEN THERE IS A NULL BIT
          
          The for() loop in _mi_print_key() iterates one time to many 
          when there is a NULL bit because each iteration only 
          increases the key pointer with keyseg->length (size of the key
          NOT including NULL bits) when it should have been increased with
          (keyseg->length + #NULL-bits) instead.
    ------------------------------------------------------------
    revno: 3402.50.144
    committer: Guilhem Bichot <guilhem.bichot@oracle.com>
    branch nick: trunk3
    timestamp: Tue 2012-02-07 14:09:03 +0100
    message:
      Bug #13623473 	MISSING ROWS ON SELECT AND JOIN WITH TIME/DATETIME COMPARE
      Cannot use index for indexed_time=datetime.
    ------------------------------------------------------------
    revno: 3402.50.143
    committer: Guilhem Bichot <guilhem.bichot@oracle.com>
    branch nick: semijoin_ls
    timestamp: Tue 2012-02-07 13:02:00 +0100
    message:
      fix for pb2 failure: use lowercase table names and aliases, or EXPLAIN output differs per platform.
    ------------------------------------------------------------
    revno: 3402.50.142
    committer: Tor Didriksen <tor.didriksen@oracle.com>
    branch nick: trunk-stable-sort
    timestamp: Tue 2012-02-07 12:56:30 +0100
    message:
      WL#6160 filesort optimization: use std::stable_sort rather than quicksort
      
      Filesort currently uses either radixsort or quicksort when sorting records.
      Radixsort is very fast, but only for certain data sets (short keys).
      For *most* cases when my_qsort2() is used, it turns out that std::stable_sort()
      is faster.
      
      This worklog will extend the choice of sorting algorithms, preferring
      std::stable_sort() when that is assumed to be better than the other two.
    ------------------------------------------------------------
    revno: 3402.50.141
    committer: Ashish Agarwal<ashish.y.agarwal@oracle.com>
    branch nick: mysql-trunk
    timestamp: Tue 2012-02-07 16:33:11 +0530
    message:
      BUG#11748748: Failing testcase on mysql-trunk. Patch to correct it.
    ------------------------------------------------------------
    revno: 3402.50.140
    committer: Guilhem Bichot <guilhem.bichot@oracle.com>
    branch nick: semijoin_ls
    timestamp: Tue 2012-02-07 11:30:39 +0100
    message:
      Fix for Bug #13595212 	EXTRA ROWS RETURNED ON RIGHT JOIN WITH VIEW AND IN-SUBQUERY IN WHERE:
      LEFT JOIN was wrongly converted to inner join because table maps were
      used incorrectly.
    ------------------------------------------------------------
    revno: 3402.50.139
    committer: Roy Lyseng <roy.lyseng@oracle.com>
    branch nick: mysql-trunk
    timestamp: Tue 2012-02-07 08:07:38 +0100
    message:
      Bug #11829691: Pure virtual method called in Item_bool_func2::fix...()
      
      Added a test that used to crash the server.
      
      mysql-test/include/subquery.inc
        New test case for bug#11829691.
      
      mysql-test/r/subquery_all.result
      mysql-test/r/subquery_all_bka.result
      mysql-test/r/subquery_all_bka_nixbnl.result
      mysql-test/r/subquery_nomat_nosj.result
      mysql-test/r/subquery_nomat_nosj_bka.result
      mysql-test/r/subquery_nomat_nosj_bka_nixbnl.result
      mysql-test/r/subquery_none.result
      mysql-test/r/subquery_none_bka.result
      mysql-test/r/subquery_none_bka_nixbnl.result
        New test case results for bug#11829691.
    ------------------------------------------------------------
    revno: 3402.50.138
    committer: Norvald H. Ryeng <norvald.ryeng@oracle.com>
    branch nick: mysql-trunk-13464334
    timestamp: Mon 2012-02-06 13:47:30 +0100
    message:
      Bug#13464334 SAME QUERY PRODUCES DIFFERENT RESULTS WHEN USED WITH AND
      WITHOUT UNION ALL
      
      Problem: Some outer join queries using views as inner tables do not
      evaluate conditions correctly.
      
      Inner tables of outer joins are tagged by setting the outer_join flag
      in the TABLE_LIST structure for the table. However, if the inner table
      is a view, the tables of the view are not tagged unless they are inner
      tables of a view defined as an outer join query. This means that
      tables referenced by views should some times be treated as inner
      tables of an outer join even if they are not tagged as such.
      
      In JOIN::optimize(), calls to list_contains_unique_index(), are used
      to check if GROUP BY or DISTINCT can be skipped. The function checks
      that enough columns to make it a unique key are mentioned and that
      none of the columns can return NULL. The check for NULL fails since it
      only checks the outer_join flag, which may not be set because of view
      usage. The result is the erroneous conclusion that GROUP BY or
      DISTINCT can be skipped, which in the end causes the query to return
      too many or too few rows.
      
      Fix: In list_contains_unique_index(), check if the table in question
      is in the inner part of an outer join (directly or nested) and
      therefore may return NULL values.
      
      This patch also adds checks for nested outer joins in
      Item_field::is_outer_field() and internal_remove_eq_conds().
    ------------------------------------------------------------
    revno: 3402.50.137 [merge]
    committer: Vasil Dimov <vasil.dimov@oracle.com>
    branch nick: mysql-trunk
    timestamp: Mon 2012-02-06 13:04:33 +0200
    message:
      Merge mysql-5.5 -> mysql-trunk
        ------------------------------------------------------------
        revno: 2875.337.17 [merge]
        committer: Vasil Dimov <vasil.dimov@oracle.com>
        branch nick: mysql-5.5
        timestamp: Mon 2012-02-06 13:00:41 +0200
        message:
          Merge mysql-5.1 -> mysql-5.5
          
          The actual Bug#11754376 does not exist in MySQL 5.5 because at startup
          we drop entries for temporary tables from InnoDB dictionary cache (only
          if ROW_FORMAT is not REDUNDANT). But nevertheless the bug in
          normalize_table_name_low() is present so we fix it.
            ------------------------------------------------------------
            revno: 2661.827.14
            committer: Vasil Dimov <vasil.dimov@oracle.com>
            branch nick: mysql-5.1
            timestamp: Mon 2012-02-06 12:44:59 +0200
            message:
              Fix Bug#11754376 45976: INNODB LOST FILES FOR TEMPORARY TABLES ON
              GRACEFUL SHUTDOWN
              
              During startup mysql picks up .frm files from the tmpdir directory and
              tries to drop those tables in the storage engine.
              
              The problem is that when tmpdir ends in / then ha_innobase::delete_table()
              is passed a string like "/var/tmp//#sql123", then it wrongly normalizes it
              to "/#sql123" and calls row_drop_table_for_mysql() which of course fails
              to delete the table entry from the InnoDB dictionary cache.
              ha_innobase::delete_table() returns an error but nevertheless mysql wipes
              away the .frm file and the entry in the InnoDB dictionary cache remains
              orphaned with no easy way to remove it.
              
              The "no easy" way to remove it is to create a similar temporary table again,
              copy its .frm file to tmpdir under "#sql123.frm" and restart mysqld with
              tmpdir=/var/tmp (no trailing slash) - this way mysql will pick the .frm file
              after restart and will try to issue drop table for "/var/tmp/#sql123"
              (notice do double slash), ha_innobase::delete_table() will normalize it to
              "tmp/#sql123" and row_drop_table_for_mysql() will successfully remove the
              table entry from the dictionary cache.
              
              The solution is to fix normalize_table_name_low() to normalize things like
              "/var/tmp//table" correctly to "tmp/table".
              
              This patch also adds a test function which invokes
              normalize_table_name_low() with various inputs to make sure it works
              correctly and a mtr test that calls this test function.
              
              Reviewed by:	Marko (http://bur03.no.oracle.com/rb/r/929/)
    ------------------------------------------------------------
    revno: 3402.50.136 [merge]
    committer: Ashish Agarwal<ashish.y.agarwal@oracle.com>
    branch nick: mysql-trunk
    timestamp: Sun 2012-02-05 14:13:12 +0530
    message:
      BUG#11754145: Merge from mysql-5.5 to mysql-trunk
        ------------------------------------------------------------
        revno: 2875.337.16
        committer: Ashish Agarwal<ashish.y.agarwal@oracle.com>
        branch nick: mysql-5.5
        timestamp: Sun 2012-02-05 14:10:50 +0530
        message:
          BUG#11754145: Failing test cases. Patch to correct the test case.
    ------------------------------------------------------------
    revno: 3402.50.135
    committer: Nuno Carvalho <nuno.carvalho@oracle.com>
    branch nick: mysql-trunk
    timestamp: Fri 2012-02-03 23:52:29 +0000
    message:
      BUG#11758581 - 50801: CHANGE MASTER ACCEPTS BOGUS VARIABLES
            
      CHANGE MASTER command did not check invalid characters on its
      parameters. Also on server restart, invalid values were trimmed causing
      the loss of part of the variables value.
      
      Ensure that servers have a clean state before bogus variables tests.
    ------------------------------------------------------------
    revno: 3402.50.134
    committer: Nuno Carvalho <nuno.carvalho@oracle.com>
    branch nick: mysql-trunk
    timestamp: Fri 2012-02-03 18:09:00 +0000
    message:
      BUG#11758581 - 50801: CHANGE MASTER ACCEPTS BOGUS VARIABLES
      
      CHANGE MASTER command did not check invalid characters on its
      parameters. Also on server restart, invalid values were trimmed causing
      the loss of part of the variables value.
      
      SQL parser was improved to prohibit the use of new line characters on 
      CHANGE MASTER variables, throwing a ER_WRONG_VALUE error when such 
      character is used.
    ------------------------------------------------------------
    revno: 3402.50.133
    committer: Tor Didriksen <tor.didriksen@oracle.com>
    branch nick: trunk
    timestamp: Fri 2012-02-03 16:16:35 +0100
    message:
      All the subquery_sj_xxx tests can get thread stack overrun on solaris
    ------------------------------------------------------------
    revno: 3402.50.132
    committer: Ashish Agarwal<ashish.y.agarwal@oracle.com>
    branch nick: bug_784_tk
    timestamp: Fri 2012-02-03 20:07:46 +0530
    message:
      BUG#11748748 - 37280: CHECK AND REPAIR TABLE REPORT TABLE
                            CORRUPTED WHEN RUN CONCURRENTLY WITH
      
      ISSUE: Concurrent queries in archive causes table
             corruption. Running repair and check query
             concurrently with insert query causes table
             corruption. Improper locking.
      
      SOLUTION: Locks are properly aquired.
                Initial lock is aquired and number of
                rows are remembered. Inserting
                remembered rows to new file. Locks
                are again aquired to process the
                remaining rows. Concurrent optimization
                on a same table not allowed.
    ------------------------------------------------------------
    revno: 3402.50.131 [merge]
    committer: Nuno Carvalho <nuno.carvalho@oracle.com>
    branch nick: mysql-trunk
    timestamp: Fri 2012-02-03 14:30:11 +0000
    message:
      Merge from mysql-5.5 to mysql-trunk.
      
      Conflicts:
       mysql-test/collections/default.experimental
        ------------------------------------------------------------
        revno: 2875.337.15
        committer: Nuno Carvalho <nuno.carvalho@oracle.com>
        branch nick: mysql-5.5
        timestamp: Fri 2012-02-03 14:23:33 +0000
        message:
          BUG#12403008 RPL_HEARTBEAT_BASIC FAILS SPORADICALLY ON PUSHBUILD
                
          rpl_heartbeat_basic test fails sporadically on pushbuild because did
          not received all heartbeats from slave in circular replication.
          
          Removed from experimental collection.
    ------------------------------------------------------------
    revno: 3402.50.130 [merge]
    committer: Ashish Agarwal<ashish.y.agarwal@oracle.com>
    branch nick: mysql-trunk
    timestamp: Fri 2012-02-03 19:43:57 +0530
    message:
      BUG#11748748: Null merge from mysql-5.5 to mysql-trunk
        ------------------------------------------------------------
        revno: 2875.337.14 [merge]
        committer: Ashish Agarwal<ashish.y.agarwal@oracle.com>
        branch nick: mysql-5.5
        timestamp: Fri 2012-02-03 19:41:03 +0530
        message:
          BUG#11748748: Merge from mysql-5.1 to mysql-5.5
            ------------------------------------------------------------
            revno: 2661.827.13
            committer: Ashish Agarwal<ashish.y.agarwal@oracle.com>
            branch nick: bug_93_5.1
            timestamp: Fri 2012-02-03 19:37:00 +0530
            message:
              BUG#11748748 - 37280: CHECK AND REPAIR TABLE REPORT TABLE
                                    CORRUPTED WHEN RUN CONCURRENTLY WITH
              
              ISSUE: Table corruption due to concurrent queries.
                     Different threads running check, repair query
                     along with insert. Locks not properly acquired
                     in repair query. Rows are inserted inbetween
                     repair query.
              
              SOLUTION: Mutex lock is acquired before the
                        repair call. Concurrent queries wont
                        effect the call to repair.
    ------------------------------------------------------------
    revno: 3402.50.129 [merge]
    committer: Ashish Agarwal<ashish.y.agarwal@oracle.com>
    branch nick: mysql-trunk
    timestamp: Fri 2012-02-03 19:21:15 +0530
    message:
      BUG#11754145: Merge from mysql-5.5 to mysql-trunk
        ------------------------------------------------------------
        revno: 2875.337.13
        committer: Ashish Agarwal<ashish.y.agarwal@oracle.com>
        branch nick: mysql-5.5
        timestamp: Fri 2012-02-03 19:19:32 +0530
        message:
          BUG#11754145: One of the test was failing. Patch to fix the test
    ------------------------------------------------------------
    revno: 3402.50.128
    committer: Jorgen Loland <jorgen.loland@oracle.com>
    branch nick: mysql-trunk-wl5957
    timestamp: Fri 2012-02-03 08:45:19 +0100
    message:
      Assertion that selectivity does not increase by adding another 
      scan to a ROR intersect triggers. Temporarily remove it.
    ------------------------------------------------------------
    revno: 3402.50.127
    committer: Jorgen Loland <jorgen.loland@oracle.com>
    branch nick: mysql-trunk-wl5957
    timestamp: Fri 2012-02-03 08:36:30 +0100
    message:
      opt_trace.eq_range_statistics must only be run in debug builds.
    ------------------------------------------------------------
    revno: 3402.50.126
    committer: Jorgen Loland <jorgen.loland@oracle.com>
    branch nick: mysql-trunk-wl5957
    timestamp: Thu 2012-02-02 17:56:36 +0100
    message:
      WL#5957 followup: use index statistics in ror_scan_selectivity()
                        as well if the optimizer requests it.
    ------------------------------------------------------------
    revno: 3402.50.125 [merge]
    committer: Ashish Agarwal<ashish.y.agarwal@oracle.com>
    branch nick: mysql-trunk
    timestamp: Thu 2012-02-02 18:18:48 +0530
    message:
      BUG#11754145: merge from mysql-5.5 to mysql-trunk
        ------------------------------------------------------------
        revno: 2875.337.12
        committer: Ashish Agarwal<ashish.y.agarwal@oracle.com>
        branch nick: bug_4145
        timestamp: Thu 2012-02-02 18:17:14 +0530
        message:
          BUG#11754145 - 45702: IMPOSSIBE TO SPECIFY MYISAM_SORT_BUFFER > 4GB 
                                ON 64 BIT MACHINES
          
          PROBLEM: When sorting index during repair of
                   myisam tables, due to improper casting
                   of buffer size variables value of myisam_
                   sort_buffer_size is not set greater than
                   4GB.
          
          SOLUTION: Proper casting of buffer size variable.
                    myisam_buffer_size changed to unsigned
                    long long to handle size > 4GB on
                    linux as well as windows.
    ------------------------------------------------------------
    revno: 3402.50.124
    committer: Alexander Barkov <alexander.barkov@oracle.com>
    branch nick: mysql-trunk
    timestamp: Thu 2012-02-02 16:37:31 +0400
    message:
      Post-fix for BUG#13458237.
      Recording correct test results.
    ------------------------------------------------------------
    revno: 3402.50.123 [merge]
    committer: Alexander Barkov <alexander.barkov@oracle.com>
    branch nick: mysql-trunk
    timestamp: Thu 2012-02-02 16:32:13 +0400
    message:
      Merging from mysql-trunk
        ------------------------------------------------------------
        revno: 3402.59.1
        committer: Jimmy Yang <jimmy.yang@oracle.com>
        branch nick: trunk2
        timestamp: Thu 2012-02-02 20:26:05 +0800
        message:
          Address failed sys_vars tests due to a monitor name correction.
    ------------------------------------------------------------
    revno: 3402.50.122 [merge]
    committer: Alexander Barkov <alexander.barkov@oracle.com>
    branch nick: mysql-trunk
    timestamp: Thu 2012-02-02 16:29:12 +0400
    message:
      Merging from 5.5
        ------------------------------------------------------------
        revno: 2875.337.11 [merge]
        committer: Alexander Barkov <alexander.barkov@oracle.com>
        branch nick: mysql-5.5
        timestamp: Thu 2012-02-02 16:25:48 +0400
        message:
          Merging from 5.1
            ------------------------------------------------------------
            revno: 2661.827.12
            committer: Alexander Barkov <alexander.barkov@oracle.com>
            branch nick: mysql-5.1
            timestamp: Thu 2012-02-02 16:22:13 +0400
            message:
              Postfix for Bug#11752408.
              Recording correct test results.
              
              modified:
                mysql-test/suite/engines/funcs/r/db_alter_collate_ascii.result
                mysql-test/suite/engines/funcs/r/db_alter_collate_utf8.result
    ------------------------------------------------------------
    revno: 3402.50.121 [merge]
    committer: Marko M?kel? <marko.makela@oracle.com>
    branch nick: mysql-trunk
    timestamp: Thu 2012-02-02 14:00:50 +0200
    message:
      Merge mysql-5.5 to mysql-trunk.
        ------------------------------------------------------------
        revno: 2875.337.10
        committer: Marko M?kel? <marko.makela@oracle.com>
        branch nick: mysql-5.5
        timestamp: Thu 2012-02-02 13:54:27 +0200
        message:
          ha_innobase::records_in_range(): Remove a debug assertion
          that prohibits an open range (full table).
          This assertion catches unnecessary calls to this method, but such calls
          are not harming correctness.
        ------------------------------------------------------------
        revno: 2875.337.9 [merge]
        committer: Marko M?kel? <marko.makela@oracle.com>
        branch nick: mysql-5.5
        timestamp: Thu 2012-02-02 13:50:54 +0200
        message:
          Merge mysql-5.1 to mysql-5.5.
            ------------------------------------------------------------
            revno: 2661.827.11
            committer: Marko M?kel? <marko.makela@oracle.com>
            branch nick: mysql-5.1
            timestamp: Thu 2012-02-02 13:38:32 +0200
            message:
              Bug#13654923 BOGUS DEBUG ASSERTION IN INDEX CREATION FOR ZERO-LENGTH RECORD
              
              row_merge_buf_write(): Relax the bogus assertion.
    ------------------------------------------------------------
    revno: 3402.50.120
    committer: Alexander Barkov <alexander.barkov@oracle.com>
    branch nick: mysql-trunk.b13616434
    timestamp: Thu 2012-02-02 14:58:18 +0400
    message:
       Bug#13616434 ASSERTION FAILED: NANOSECONDS<  1000000000
      
       Problem:
      
       negative lldiv_t values with zero integer part and non-zero fractional part
       (e.g. -0.1111)  were not detected, so negative fractional part was
       later casted to a big unsigned number, which made the assertion crash.
      
       Fix:
      
       Return error if lld.rem is negative.
      
       modified:
        mysql-test/r/type_temporal_fractional.result
        mysql-test/t/type_temporal_fractional.test
        sql/sql_time.cc 
    ------------------------------------------------------------
    revno: 3402.50.119
    committer: Marko M?kel? <marko.makela@oracle.com>
    branch nick: mysql-trunk
    timestamp: Thu 2012-02-02 12:48:36 +0200
    message:
      Fix results after fixing typo in trx_rseg_current_size.
    ------------------------------------------------------------
    revno: 3402.50.118 [merge]
    committer: Marko M?kel? <marko.makela@oracle.com>
    branch nick: mysql-trunk
    timestamp: Thu 2012-02-02 12:44:07 +0200
    message:
      Merge mysql-5.5 to mysql-trunk.
        ------------------------------------------------------------
        revno: 2875.337.8
        committer: Marko M?kel? <marko.makela@oracle.com>
        branch nick: mysql-5.5
        timestamp: Thu 2012-02-02 12:31:57 +0200
        message:
          Bug #13651627 Move ut_ad(0) from the beginning to the end of buf_page_print(),
          print page dump
          
          buf_page_print(): Remove the ut_ad(0) from the beginning. Add two flags
          (enum buf_page_print_flags) that can be bitwise-ORed together:
          
          BUF_PAGE_PRINT_NO_CRASH:
            Do not crash debug builds at the end of buf_page_print().
          BUF_PAGE_PRINT_NO_FULL:
            Do not print the full page dump. This can be useful when adding
            diagnostic printout to flushing or to the doublewrite buffer.
          
          trx_sys_doublewrite_init_or_restore_page(): Replace exit(1) with ut_error,
          so that we can get a core dump if this extraordinary condition happens.
          
          rb:924 approved by Sunny Bains
    ------------------------------------------------------------
    revno: 3402.50.117 [merge]
    committer: Marko M?kel? <marko.makela@oracle.com>
    branch nick: mysql-trunk
    timestamp: Thu 2012-02-02 12:27:45 +0200
    message:
      Merge mysql-5.5 to mysql-trunk.
        ------------------------------------------------------------
        revno: 2875.337.7 [merge]
        committer: Marko M?kel? <marko.makela@oracle.com>
        branch nick: mysql-5.5
        timestamp: Thu 2012-02-02 12:13:35 +0200
        message:
          Merge mysql-5.1 to mysql-5.5.
            ------------------------------------------------------------
            revno: 2661.827.10
            committer: Marko M?kel? <marko.makela@oracle.com>
            branch nick: mysql-5.1
            timestamp: Thu 2012-02-02 12:07:06 +0200
            message:
              Suppress messages about long semaphore waits in innodb_bug34300.test.
    ------------------------------------------------------------
    revno: 3402.50.116
    committer: Jimmy Yang <jimmy.yang@oracle.com>
    branch nick: trunk2
    timestamp: Thu 2012-02-02 17:23:51 +0800
    message:
      Nonfunctional fix for a typo on a monitor counter name.
      
      Approved by Sunny Bains
    ------------------------------------------------------------
    revno: 3402.50.115 [merge]
    committer: Ashish Agarwal<ashish.y.agarwal@oracle.com>
    branch nick: mysql-trunk
    timestamp: Thu 2012-02-02 14:33:02 +0530
    message:
      BUG#11756869: Merge from mysql-5.5 to mysql-trunk
        ------------------------------------------------------------
        revno: 2875.337.6 [merge]
        committer: Ashish Agarwal<ashish.y.agarwal@oracle.com>
        branch nick: mysql-5.5
        timestamp: Thu 2012-02-02 14:25:43 +0530
        message:
          BUG#11756869: Merge from mysql-5.1 to mysql-5.5
            ------------------------------------------------------------
            revno: 2661.827.9 [merge]
            committer: Ashish Agarwal<ashish.y.agarwal@oracle.com>
            branch nick: mysql-5.1
            timestamp: Thu 2012-02-02 14:19:38 +0530
            message:
              BUG#11756869 - 48848: MYISAMCHK DOING SORT RECOVER IN CERTAIN
                                    CASES RESETS DATA POINTER TO SMAL
              
              ISSUE: Myisamchk doing sort recover
                     on a table reduces data_file_length.
                     Maximum size of data file decreases,
                     lesser number of rows are stored.
              
              SOLUTION: Size of data_file_length is
                        fixed to the original length.
                ------------------------------------------------------------
                revno: 2661.828.1
                committer: Ashish Agarwal<ashish.y.agarwal@oracle.com>
                branch nick: bug_869_1
                timestamp: Wed 2012-02-01 11:19:53 +0530
                message:
                  BUG#11756869 - 48848: MYISAMCHK DOING SORT RECOVER IN CERTAIN
                                        CASES RESETS DATA POINTER TO SMAL
                  
                  ISSUE: Myisamchk doing sort recover
                         on a table reduces data_file_length.
                         Maximum size of data file decreases,
                         lesser number of rows are stored.
                  
                  SOLUTION: Size of data_file_length is
                            fixed to the original length.
    ------------------------------------------------------------
    revno: 3402.50.114
    committer: Hemant Kumar <hemant.hk.kumar@oracle.com>
    branch nick: mysql-trunk
    timestamp: Thu 2012-02-02 10:08:55 +0530
    message:
      Adding remaining Engine related tests to daily-trunk run.
    ------------------------------------------------------------
    revno: 3402.50.113
    committer: Marko M?kel? <marko.makela@oracle.com>
    branch nick: mysql-trunk
    timestamp: Wed 2012-02-01 22:59:15 +0200
    message:
      Fix two compiler warnings on Windows.
    ------------------------------------------------------------
    revno: 3402.50.112
    committer: Ole John Aske <ole.john.aske@oracle.com>
    branch nick: mysql-trunk
    timestamp: Wed 2012-02-01 10:59:13 +0100
    message:
      Fix for bug#13528826  TEST_IF_CHEAPER_ORDERING(): CALCULATES INCORRECT 'SELECT_LIMIT
      
      An incorrect 'adjusted select_limit' was returned from test_if_cheaper_ordering()
      if no excplicit limit-clause was specified in the query.
      
      This fix detect when a limit-clause was not specified, and returns the
      full 'table_records' when no limit-clause was used.
      
      Furthermore, this fix caused the testcase for bug #12838420 
      to change beyond what was required as a testcase for that bug.
            
      Fixed that by forcing correct query plan for testcase by
      introducing 'USE INDEX' and 'STRAIGHT_JOIN'.
    ------------------------------------------------------------
    revno: 3402.50.111
    committer: Tor Didriksen <tor.didriksen@oracle.com>
    branch nick: trunk
    timestamp: Wed 2012-02-01 09:59:14 +0100
    message:
      All the subquery_sj_xxx tests can get thread stack overrun on solaris
    ------------------------------------------------------------
    revno: 3402.50.110
    committer: Tor Didriksen <tor.didriksen@oracle.com>
    branch nick: trunk
    timestamp: Wed 2012-02-01 09:32:05 +0100
    message:
      re-enable test for Bug#13536661, but not for embedded
    ------------------------------------------------------------
    revno: 3402.50.109
    committer: Tor Didriksen <tor.didriksen@oracle.com>
    branch nick: trunk
    timestamp: Wed 2012-02-01 09:31:03 +0100
    message:
      WL#6159 post-push fix: adding a new directory was not such a good idea
    ------------------------------------------------------------
    revno: 3402.50.108
    committer: Hemant Kumar <hemant.hk.kumar@oracle.com>
    branch nick: mysql-trunk
    timestamp: Wed 2012-02-01 11:33:43 +0530
    message:
      Added engine independent tests to default.daily collection.
    ------------------------------------------------------------
    revno: 3402.50.107
    committer: Hemant Kumar <hemant.hk.kumar@oracle.com>
    branch nick: mysql-trunk
    timestamp: Wed 2012-02-01 10:52:33 +0530
    message:
      Update collection for default.weekly.Update the vardir name for 4K page size and 8K page size.
    ------------------------------------------------------------
    revno: 3402.50.106 [merge]
    committer: Andrei Elkin <andrei.elkin@oracle.com>
    branch nick: mysql-trunk
    timestamp: Tue 2012-01-31 18:18:20 +0200
    message:
      merge from 5.5.
        ------------------------------------------------------------
        revno: 2875.337.5 [merge]
        committer: Andrei Elkin <andrei.elkin@oracle.com>
        branch nick: 5.5-bug3593869-64035-MYSQL_BINLOG_SEND-CRASH
        timestamp: Tue 2012-01-31 17:16:25 +0200
        message:
          merge from 5.5 repo.
            ------------------------------------------------------------
            revno: 2875.339.8
            committer: Inaam Rana <inaam.rana@oracle.com>
            branch nick: mysql-5.5
            timestamp: Tue 2012-01-31 09:50:17 -0500
            message:
              bug#13636122: mysql-5.1 => mysql-5.5
            ------------------------------------------------------------
            revno: 2875.339.7 [merge]
            committer: Inaam Rana <inaam.rana@oracle.com>
            branch nick: mysql-5.5
            timestamp: Tue 2012-01-31 09:36:28 -0500
            message:
              NULL merge from mysql-5.1
                ------------------------------------------------------------
                revno: 2661.827.8
                committer: Inaam Rana <inaam.rana@oracle.com>
                branch nick: mysql-5.1
                timestamp: Tue 2012-01-31 09:31:31 -0500
                message:
                  Bug#13636122 THE ORIGINAL TABLE MISSING WHILE EXECUTE THE DDL 'ALTER TABLE ADD COLUMN
                  
                  rb://914
                  approved by: Marko Makela
                  
                  Poll in fil_rename_tablespace() after setting ::stop_ios flag can
                  result in a hang because the other thread actually dispatching the IO
                  won't wake IO helper threads or flush the tablespace before starting
                  wait in fil_mutex_enter_and_prepare_for_io().
        ------------------------------------------------------------
        revno: 2875.337.4 [merge]
        committer: Andrei Elkin <andrei.elkin@oracle.com>
        branch nick: 5.5-bug3593869-64035-MYSQL_BINLOG_SEND-CRASH
        timestamp: Tue 2012-01-31 17:07:44 +0200
        message:
          merge from 5.5 repo.
            ------------------------------------------------------------
            revno: 2875.339.6 [merge]
            committer: sayantan.dutta@oracle.com
            branch nick: mysql-5.5
            timestamp: Tue 2012-01-31 17:46:45 +0530
            message:
              Undo last push
                ------------------------------------------------------------
                revno: 2661.827.7
                committer: sayantan.dutta@oracle.com
                branch nick: mysql-5.1
                timestamp: Tue 2012-01-31 17:39:40 +0530
                message:
                  (no message)
            ------------------------------------------------------------
            revno: 2875.339.5 [merge]
            committer: sayantan.dutta@oracle.com
            branch nick: mysql-5.5
            timestamp: Tue 2012-01-31 17:20:56 +0530
            message:
              merge #64127 5.1 => 5.5
                ------------------------------------------------------------
                revno: 2661.827.6
                committer: sayantan.dutta@oracle.com
                branch nick: mysql-5.1
                timestamp: Tue 2012-01-31 17:09:32 +0530
                message:
                  Bug #64127: MTR --warnings option misses some of InnoDB errors and warnings
            ------------------------------------------------------------
            revno: 2875.339.4 [merge]
            committer: Ramil Kalimullin <ramil@mysql.com>
            branch nick: mysql-5.5
            timestamp: Tue 2012-01-31 11:00:31 +0400
            message:
              Auto-merge from mysql-5.1.
                ------------------------------------------------------------
                revno: 2661.827.5 [merge]
                committer: Ramil Kalimullin <ramil@mysql.com>
                branch nick: mysql-5.1
                timestamp: Tue 2012-01-31 10:57:12 +0400
                message:
                  Null-merge from mysql-5.0.
                    ------------------------------------------------------------
                    revno: 1810.4004.9
                    committer: Ramil Kalimullin <ramil@mysql.com>
                    branch nick: mysql-5.0
                    timestamp: Mon 2012-01-30 22:52:33 +0400
                    message:
                      Fix for BUG#13596377: MYSQL CRASHES ON STARTUP ON FREEBSD IN PB2
                      
                      Fix for #36428/#38364 backported into 5.0.
            ------------------------------------------------------------
            revno: 2875.339.3
            author: hery.ramilison@oracle
            committer: Build Team <MYSQL-RE_WW@oracle.com>
            branch nick: mysql-5.5
            timestamp: Mon 2012-01-30 18:33:55 +0100
            message:
              starting 5.5.21 build
            ------------------------------------------------------------
            revno: 2875.339.2 [merge]
            tags: clone-5.5.21-build, mysql-5.5.21
            committer: chuck.bell@oracle.com
            branch nick: mysql-12969301
            timestamp: Mon 2012-01-30 10:23:21 -0500
            message:
              Merge with main for BUG#12969301
            ------------------------------------------------------------
            revno: 2875.339.1
            committer: chuck.bell@oracle.com
            branch nick: mysql-12969301
            timestamp: Tue 2012-01-24 11:08:57 -0500
            message:
              BUG#12969301 : mysql_plugin: enable is ignored if plugin exists
              
              This patch changes the mechanism by which the client enables a 
              plugin. Instead of using INSERT IGNORE to reload a plugin library,
              it now uses REPLACE INTO. This allows users to load a library
              multiple times replacing the existing values in the mysql.plugin
              table. This allows users to replace the symbol reference to a
              different dl name in the table. Thus permitting enabling of 
              multiple versions of the same library without first disabling
              the old version.
              
              A regression test was added to ensure this feature works.
    ------------------------------------------------------------
    revno: 3402.50.105
    committer: Martin Hansson <martin.hansson@oracle.com>
    branch nick: mysql-wl5874-push
    timestamp: Tue 2012-01-31 16:16:16 +0100
    message:
      WL#5874: CURRENT_TIMESTAMP as DEFAULT for DATETIME columns.
    ------------------------------------------------------------
    revno: 3402.50.104
    committer: Jorgen Loland <jorgen.loland@oracle.com>
    branch nick: mysql-trunk-review
    timestamp: Tue 2012-01-31 12:19:25 +0100
    message:
      BUG#13599013 - MAX/MIN + SUBQUERY IN WHERE CLAUSE MATCHING NO
                     ROWS + INDEX DOES NOT RETURN NULL
      
      An aggregated expression of type MIN or MAX shall return NULL
      if the query is implicitly grouped and there is no HAVING 
      clause that evaluates to FALSE.  In this bug we had a query 
      of the form
      
        SELECT MIN(indexed_column) FROM t1 WHERE (4) IN (SELECT 1)
      
      No row can satisfy the WHERE condition but there is no HAVING
      clause, so the query should have returned NULL (but did
      return an empty set).
      
      The problem was that when a query only selects aggregate
      functions that are optimized away, JOIN::exec() goes into an
      early-exit branch. This branch did not honor the requirement
      stated by the definition above. The fix is to call
      return_zero_rows() instead of send_eof() in this branch. If
      the query selects aggregates and does not have a HAVING
      clause that evaluates to false, return_zero_rows() returns
      a NULL-based row before calling send_eof().
    ------------------------------------------------------------
    revno: 3402.50.103
    committer: Georgi Kodinov <Georgi.Kodinov@Oracle.com>
    branch nick: fix-trunk
    timestamp: Tue 2012-01-31 13:00:26 +0200
    message:
      Addendum to the fix for bug #13586336
      Suppressed the warnings in the pre-existing test change_user 
      because this test is also run in embedded where the 
      authentication checks are not compiled, so no warnings are 
      emitted.
    ------------------------------------------------------------
    revno: 3402.50.102 [merge]
    committer: Tor Didriksen <tor.didriksen@oracle.com>
    branch nick: trunk-merge
    timestamp: Tue 2012-01-31 11:40:02 +0100
    message:
      merge opt-team => trunk
        ------------------------------------------------------------
        revno: 2876.249.485 [merge]
        committer: Tor Didriksen <tor.didriksen@oracle.com>
        branch nick: next-mr-opt-team
        timestamp: Tue 2012-01-31 08:45:59 +0100
        message:
          merge opt-backporting => opt-team, enabling OPTIMIZER_SWITCH_ALL
            ------------------------------------------------------------
            revno: 2876.475.52
            committer: Tor Didriksen <tor.didriksen@oracle.com>
            branch nick: next-mr-opt-backporting
            timestamp: Tue 2012-01-31 07:42:46 +0100
            message:
              Disable test for 13536661
            ------------------------------------------------------------
            revno: 2876.475.51
            committer: Tor Didriksen <tor.didriksen@oracle.com>
            branch nick: next-mr-opt-backporting
            timestamp: Mon 2012-01-30 16:47:28 +0100
            message:
              Shuffle tests around, seems like we need the --exit
            ------------------------------------------------------------
            revno: 2876.475.50
            committer: Guilhem Bichot <guilhem.bichot@oracle.com>
            branch nick: opt-back2
            timestamp: Mon 2012-01-30 14:57:08 +0100
            message:
              Fix for
              Bug #13637435 	ASSERT NAME && !IS_AUTOGENERATED_NAME ON SELECT FROM VIEW WITH OPT_TRACE ENABLED
            ------------------------------------------------------------
            revno: 2876.475.49 [merge]
            committer: Tor Didriksen <tor.didriksen@oracle.com>
            branch nick: next-mr-opt-backporting
            timestamp: Mon 2012-01-30 14:13:15 +0100
            message:
              NULL merge trunk => opt-backporting
            ------------------------------------------------------------
            revno: 2876.475.48
            committer: Tor Didriksen <tor.didriksen@oracle.com>
            branch nick: next-mr-opt-backporting
            timestamp: Mon 2012-01-30 14:08:34 +0100
            message:
              Fix failing tests after merge trunk => opt-backporting
            ------------------------------------------------------------
            revno: 2876.475.47 [merge]
            committer: Tor Didriksen <tor.didriksen@oracle.com>
            branch nick: next-mr-opt-backporting
            timestamp: Mon 2012-01-30 13:25:56 +0100
            message:
              merge trunk => opt-backporting
        ------------------------------------------------------------
        revno: 2876.249.484 [merge]
        committer: Tor Didriksen <tor.didriksen@oracle.com>
        branch nick: next-mr-opt-team
        timestamp: Mon 2012-01-30 14:12:20 +0100
        message:
          empty merge trunk => opt-team
        ------------------------------------------------------------
        revno: 2876.249.483 [merge]
        committer: Tor Didriksen <tor.didriksen@oracle.com>
        branch nick: next-mr-opt-team
        timestamp: Mon 2012-01-30 13:26:08 +0100
        message:
          merge trunk => opt-team
    ------------------------------------------------------------
    revno: 3402.50.101
    committer: Georgi Kodinov <Georgi.Kodinov@Oracle.com>
    branch nick: B13586336-trunk
    timestamp: Mon 2012-01-30 17:43:32 +0200
    message:
      Bug #13586336: SRVGEN - HIBISCUS: ISSUE DEPRECATION WARNING FOR 
      LEGACY AUTHENTICATION METHOD
      
      Added warnings as follows : 
      1) Make the server option secure_auth ON per default and issue a warning
      stating that legacy passwords are deprecated if it is ever overridden.
      2) Issue a deprecation warning if a new user account ever is created or
      otherwise configured to use the mysql_old_password plugin.
      3) When upgrading an old system, issue deprecation warnings if an old
      password hash digest is found in the password field.
      
      Added tests for the new warnings and updated existing tests to
      either set secure_auth back to FALSE or adjust the result where this is not
      possible.
    ------------------------------------------------------------
    revno: 3402.50.100
    committer: Nuno Carvalho <nuno.carvalho@oracle.com>
    branch nick: mysql-trunk
    timestamp: Mon 2012-01-30 15:01:17 +0000
    message:
      BUG#13613270 - INCLUDE/WAIT_FOR_SLAVE_IO_ERROR.INC IS NOT USING INCLUDE/SHOW_SLAVE_STATUS.INC
      
      Unlike in previous versions, include/wait_for_slave_io_error.inc is not 
      using include/show_slave_status.inc duplicating test code lines and not
      taking advantage of include/show_slave_status.inc features.
      
      Changed include/wait_for_slave_io_error.inc to use 
      include/show_slave_status.inc. 
      Updated tests results that use include/wait_for_slave_io_error.inc.
    ------------------------------------------------------------
    revno: 3402.50.99 [merge]
    committer: Inaam Rana <inaam.rana@oracle.com>
    branch nick: mysql-trunk
    timestamp: Mon 2012-01-30 09:28:21 -0500
    message:
      Merge from 5.5
        ------------------------------------------------------------
        revno: 2875.338.24
        committer: Inaam Rana <inaam.rana@oracle.com>
        branch nick: mysql-5.5
        timestamp: Mon 2012-01-30 09:24:09 -0500
        message:
          Bug#11836233 MISLEADING SUGGESTION REGARDING LINUX NATIVE AIO IN INNODB
          ERROR LOG
          
          Fixed error meesage
    ------------------------------------------------------------
    revno: 3402.50.98 [merge]
    committer: Tor Didriksen <tor.didriksen@oracle.com>
    branch nick: trunk-merge
    timestamp: Mon 2012-01-30 11:34:28 +0100
    message:
      merge opt-team => trunk
        ------------------------------------------------------------
        revno: 2876.249.482 [merge]
        committer: Tor Didriksen <tor.didriksen@oracle.com>
        branch nick: next-mr-opt-team
        timestamp: Mon 2012-01-30 10:05:57 +0100
        message:
          merge opt-backporting => opt-team
            ------------------------------------------------------------
            revno: 2876.475.46
            committer: Jorgen Loland <jorgen.loland@oracle.com>
            branch nick: mysql-next-mr-opt-backporting-review
            timestamp: Mon 2012-01-30 09:57:24 +0100
            message:
              WL5957: post-push fix: update opt-trace result files for PS
                      protocol.
        ------------------------------------------------------------
        revno: 2876.249.481 [merge]
        committer: Tor Didriksen <tor.didriksen@oracle.com>
        branch nick: next-mr-opt-team
        timestamp: Fri 2012-01-27 15:22:35 +0100
        message:
          merge opt-backporting =>opt-team
            ------------------------------------------------------------
            revno: 2876.475.45
            committer: Tor Didriksen <tor.didriksen@oracle.com>
            branch nick: next-mr-opt-backporting
            timestamp: Fri 2012-01-27 14:38:26 +0100
            message:
              WL#5957 post-push fix: always initialize RANGE_OPT_PARAM.use_index_statistics, since check_quick_select() may not always do it
            ------------------------------------------------------------
            revno: 2876.475.44 [merge]
            committer: Roy Lyseng <roy.lyseng@oracle.com>
            branch nick: mysql-review
            timestamp: Fri 2012-01-27 13:45:03 +0100
            message:
              Bug#13596176: Missing row on select with nested in clause when matr=on
                            and bnl=off + MyISAM
              
              Minor post-push fixes:
              
              Added EXPLAIN to test cases.
              
              Fixed two comment typos.
              
              Additional commit comment to update_depend_map() in sql_optimizer.cc
              
              The loop in this function that shifts depend_map had to mask out
              all pseudo bits, not only OUTER_REF_TABLE_BIT, because otherwise
              the process might crash.
                ------------------------------------------------------------
                revno: 2876.476.1
                committer: Roy Lyseng <roy.lyseng@oracle.com>
                branch nick: mysql-review
                timestamp: Fri 2012-01-27 13:28:14 +0100
                message:
                  Bug#13596176: Missing row on select with nested in clause when matr=on
                                and bnl=off + MyISAM
                  
                  Minor post-push fixes:
                  
                  Added EXPLAIN to test cases.
                  
                  Fixed two comment typos.
                  
                  Additional commit comment to update_depend_map() in sql_optimizer.cc
                  
                  The loop in this function that shifts depend_map had to mask out
                  all pseudo bits, not only OUTER_REF_TABLE_BIT, because otherwise
                  the process might crash.
            ------------------------------------------------------------
            revno: 2876.475.43
            committer: Tor Didriksen <tor.didriksen@oracle.com>
            branch nick: next-mr-opt-backporting
            timestamp: Fri 2012-01-27 12:15:59 +0100
            message:
              WL#5957 post-push fix: dont count_bits unless we are going to use them
            ------------------------------------------------------------
            revno: 2876.475.42
            committer: Guilhem Bichot <guilhem.bichot@oracle.com>
            branch nick: opt-back2
            timestamp: Thu 2012-01-26 16:42:39 +0100
            message:
              Final review comments for
              Bug#13596330 - EXTRA ROW ON SELECT WITH NESTED IN CLAUSE
              + IS NULL WHEN SEMIJOIN + BNL IS ON
            ------------------------------------------------------------
            revno: 2876.475.41
            committer: Jorgen Loland <jorgen.loland@oracle.com>
            branch nick: mysql-next-mr-opt-backporting-review
            timestamp: Thu 2012-01-26 14:09:59 +0100
            message:
              WL#5957: Range optimizer: use statistics instead of index 
                       dives if there are many ranges
              
              For queries of the type
              
              SELECT * FROM t1 WHERE a IN(<list of values>)
              
              the range optimizer will estimate the cost of reading rows 
              that qualify. There are two possibilities: 
               1) If there is a unique index on 'a', the row estimate is 1
               2) Otherwise, two dives into the index, one at range start 
                  and one at range end, are done and the number of rows in 
                  the range is used as estimate.
              
              However, when there are a great number of values in IN(), the
              time used to estimate the number of rows may easily exceed the
              time it takes to execute the query. This WL is for reducing 
              query optimization time by replacing one index inspection per 
              range with already calculated index statistics for equality 
              ranges. 
              
              Since the index statistics are faster in use but less accurate 
              than inspecting the index, different users may have different 
              criteria for when to use which. A SESSION variable 
              (eq-range-index-dive-limit) is therefore added as well: If 
              the number of equality ranges is equal to or higher than this
              value, index statistics is used for the equality ranges. The 
              default is that index statistics is used if there are 10 or 
              more equality ranges.
            ------------------------------------------------------------
            revno: 2876.475.40
            committer: Roy Lyseng <roy.lyseng@oracle.com>
            branch nick: mysql-sb5
            timestamp: Fri 2012-01-20 16:30:14 +0100
            message:
              Bug#13596176: Missing row on select with nested in clause when matr=on
                            and bnl=off + MyISAM
              
              This is a case where Materialize-scan semi-join strategy is selected,
              and ref access is used to look up a row in the outer table.
              The referenced field in the outer table belongs in a multiple equality
              together with three fields from the inner tables.
              
              setup_sj_materialization() sets up objects to copy fields from the
              materialized tables back to original field objects. For a multiple
              equality, a "best" field is picked for this, the remaining fields
              are not copied. This best field coincides with fields used by regular
              conditions, but not necessarily with fields used for ref access.
              
              The reason for this is that before fields are substituted within
              regular conditions (see substitute_for_best_equal_field()), multiple
              equality objects are sorted so that fields come in table order.
              This sorting has not been done when calling set_access_methods(),
              which sets up ref access.
              
              The solution to the problem is to execute set_access_methods() after
              the multiple equalities have been sorted, and use the same algorithm
              as setup_sj_materialization() uses to pick the proper field for
              ref access.
              
              A pleasant side effect of this fix is also that
              make_cond_for_table_from_pred() now does a better job in replacing
              equality predicates that are also covered by ref accesses.
              
              mysql-test/include/subquery_sj.inc
                Added test case for bug#13596176.
              
              mysql-test/r/derived.result
              mysql-test/r/greedy_optimizer.result
              mysql-test/r/join_cache_bka.result
              mysql-test/r/join_cache_bka_nixbnl.result
              mysql-test/r/join_cache_bkaunique.result
              mysql-test/r/join_cache_bnl.result
              mysql-test/r/join_cache_nojb.result
              mysql-test/r/join_nested.result
              mysql-test/r/join_nested_bka.result
              mysql-test/r/join_nested_bka_nixbnl.result
              mysql-test/suite/opt_trace/r/general2_no_prot.result
              mysql-test/suite/opt_trace/r/general2_ps_prot.result
                Updated plans. Mostly these are removed "Using where" and
                "Using index condition", which means that a condition has been
                correctly identified as ref access and removed.
              
              mysql-test/r/subquery_sj_all.result
              mysql-test/r/subquery_sj_all_bka.result
              mysql-test/r/subquery_sj_all_bka_nixbnl.result
              mysql-test/r/subquery_sj_all_bkaunique.result
              mysql-test/r/subquery_sj_dupsweed.result
              mysql-test/r/subquery_sj_dupsweed_bka.result
              mysql-test/r/subquery_sj_dupsweed_bka_nixbnl.result
              mysql-test/r/subquery_sj_dupsweed_bkaunique.result
              mysql-test/r/subquery_sj_firstmatch.result
              mysql-test/r/subquery_sj_firstmatch_bka.result
              mysql-test/r/subquery_sj_firstmatch_bka_nixbnl.result
              mysql-test/r/subquery_sj_firstmatch_bkaunique.result
              mysql-test/r/subquery_sj_loosescan.result
              mysql-test/r/subquery_sj_loosescan_bka.result
              mysql-test/r/subquery_sj_loosescan_bka_nixbnl.result
              mysql-test/r/subquery_sj_loosescan_bkaunique.result
              mysql-test/r/subquery_sj_mat.result
              mysql-test/r/subquery_sj_mat_bka.result
              mysql-test/r/subquery_sj_mat_bka_nixbnl.result
              mysql-test/r/subquery_sj_mat_bkaunique.result
              mysql-test/r/subquery_sj_none.result
              mysql-test/r/subquery_sj_none_bka.result
              mysql-test/r/subquery_sj_none_bka_nixbnl.result
              mysql-test/r/subquery_sj_none_bkaunique.result
                Added test case results for bug#13596176, plus some updated plans.
              
              sql/sql_optimizer.cc
                Added function get_best_field() that picks the "best" field from
                a multiple equality.
                Calls set_access_methods() after multiple equalities have been sorted.
                Calls drop_unused_derived_keys() after ref access has been set up.
                Calls update_depend_map() after ref access has been set up.
                Calls initialize_tables() after ref access has been set up.
              
              sql/sql_optimizer.h
                Added definition for function get_best_field().
              
              sql/sql_select.cc
                Calls get_best_field() in create_ref_for_key() and
                setup_sj_materialization() to get the "best" field.
                Call to set_access_methods() and update_depend_map() moved to a more
                appropriate place.
            ------------------------------------------------------------
            revno: 2876.475.39
            committer: Guilhem Bichot <guilhem.bichot@oracle.com>
            branch nick: semijoin_ls
            timestamp: Thu 2012-01-19 10:57:18 +0100
            message:
              Fix for Bug#13596330 - EXTRA ROW ON SELECT WITH NESTED IN CLAUSE
              + IS NULL WHEN SEMIJOIN + BNL IS ON :
              table->status must say "there is a record" when we process
              records from the join buffer.
            ------------------------------------------------------------
            revno: 2876.475.38
            committer: Roy Lyseng <roy.lyseng@oracle.com>
            branch nick: mysql-review
            timestamp: Fri 2012-01-20 10:07:08 +0100
            message:
              Bug#13607423: Assertion !(*tab->on_expr_ref->is_expensive()) ...
              
              This problem is similar to bug#13552968, except that this time
              the attempted const table determination was due to key dependencies.
              Apart from that, the same description applies.
              
              Without the assert added in bug#13552968, this bug would have led
              to a crash in subquery materialization, because the proper data
              structures had not been set up yet.
              
              mysql-test/include/subquery_mat.inc
                Added test case for bug#13607423.
              
              mysql-test/r/subquery_mat.result
              mysql-test/r/subquery_mat_all.result
              mysql-test/r/subquery_mat_none.result
                Added test case results for bug#13607423.
              
              sql/sql_optimizer.cc
                Prevent outer joined table from being marked as const when it has
                an expensive join condition.
            ------------------------------------------------------------
            revno: 2876.475.37
            committer: Tor Didriksen <tor.didriksen@oracle.com>
            branch nick: next-mr-opt-backporting
            timestamp: Wed 2012-01-18 15:42:16 +0100
            message:
              Bug#13580775 review comments
        ------------------------------------------------------------
        revno: 2876.249.480 [merge]
        committer: Tor Didriksen <tor.didriksen@oracle.com>
        branch nick: next-mr-opt-team
        timestamp: Fri 2012-01-27 14:58:38 +0100
        message:
          empty merge opt-backporting => opt-team
            ------------------------------------------------------------
            revno: 2876.475.36 [merge]
            committer: Tor Didriksen <tor.didriksen@oracle.com>
            branch nick: next-mr-opt-backporting
            timestamp: Wed 2012-01-18 15:29:57 +0100
            message:
              merge trunk => opt-backporting
        ------------------------------------------------------------
        revno: 2876.249.479 [merge]
        committer: Tor Didriksen <tor.didriksen@oracle.com>
        branch nick: next-mr-opt-team
        timestamp: Fri 2012-01-27 14:57:29 +0100
        message:
          NULL merge opt-backporting => opt-team
            ------------------------------------------------------------
            revno: 2876.475.35 [merge]
            committer: Tor Didriksen <tor.didriksen@oracle.com>
            branch nick: next-mr-opt-backporting
            timestamp: Wed 2012-01-18 14:53:00 +0100
            message:
              NULL merge trunk => opt-backporting
        ------------------------------------------------------------
        revno: 2876.249.478 [merge]
        committer: Tor Didriksen <tor.didriksen@oracle.com>
        branch nick: next-mr-opt-team
        timestamp: Fri 2012-01-27 14:54:01 +0100
        message:
          empty merge opt-backporting => opt-team
            ------------------------------------------------------------
            revno: 2876.475.34 [merge]
            committer: Tor Didriksen <tor.didriksen@oracle.com>
            branch nick: next-mr-opt-backporting
            timestamp: Wed 2012-01-18 14:49:24 +0100
            message:
              merge trunk => opt-backporting
        ------------------------------------------------------------
        revno: 2876.249.477 [merge]
        committer: Tor Didriksen <tor.didriksen@oracle.com>
        branch nick: next-mr-opt-team
        timestamp: Wed 2012-01-18 15:30:09 +0100
        message:
          merge trunk => opt-team
        ------------------------------------------------------------
        revno: 2876.249.476 [merge]
        committer: Tor Didriksen <tor.didriksen@oracle.com>
        branch nick: next-mr-opt-team
        timestamp: Wed 2012-01-18 14:53:47 +0100
        message:
          empty merge trunk => opt-team
        ------------------------------------------------------------
        revno: 2876.249.475 [merge]
        committer: Tor Didriksen <tor.didriksen@oracle.com>
        branch nick: next-mr-opt-team
        timestamp: Wed 2012-01-18 14:49:34 +0100
        message:
          merge trunk => opt-team
    ------------------------------------------------------------
    revno: 3402.50.97 [merge]
    committer: Tor Didriksen <tor.didriksen@oracle.com>
    branch nick: trunk-merge
    timestamp: Mon 2012-01-30 10:30:13 +0100
    message:
      merge 5.5 => trunk
        ------------------------------------------------------------
        revno: 2875.338.23
        committer: Tor Didriksen <tor.didriksen@oracle.com>
        branch nick: 5.5
        timestamp: Mon 2012-01-30 10:08:22 +0100
        message:
          Bug#13604121 - LIBMYSQLCIENT.SO MISSING SOME FUNCTIONS PRESENT IN LIBMYSQLCLIENT.A 
          
          +get_tty_password  this is the only external symbol in get_password.c,
                             which is explicitly listed in CLIENT_SOURCES
          +handle_options    this is in mysys/my_getopt.c
                             adding this sysmbol pulls in the other externals:
          T getopt_compare_strings
          T getopt_double_limit_value
          T getopt_ll_limit_value
          T getopt_ull_limit_value
          T handle_options
          T my_cleanup_options
          T my_getopt_register_get_addr
          T my_print_help
          T my_print_variables
    ------------------------------------------------------------
    revno: 3402.50.96
    committer: Praveenkumar Hulakund <praveenkumar.hulakund@oracle.com>
    branch nick: trunk
    timestamp: Mon 2012-01-30 12:29:39 +0530
    message:
      BUG#12602983 - USER WITHOUT PRIVILEGE ON ROUTINE CAN DISCOVER ITS EXISTENCE
                       (TAKE #2)
        
        Description:
        ------------------------------------------------
        User which doesn't have any privileges on the routine or on mysql.proc table 
        still is able to discover its existence. This is wrong as one should not know 
        anything about a database object unless one has privileges on it.
        
        Analysis:
        ------------------------------------------------
        The problem was, user without any privileges on routine was able to find
        out whether it existed or not. "select <func_name>" and "call <proc_name>" 
        were checking for the existence of the <func_name> or <proc_name>" before 
        checking whether user has enough privileges to execute function or not. 
        Error "<func_name> doesn't exists" or "<proc_name> doesn't exists" was 
        reported.
        
        For CREATE, ALTER, DROP we are already providing proper error
            DROP:
            ---------
            mysql> drop function mysqltest.f1;
            ERROR 1370 (42000): alter routine command denied to user ''@'localhost' for
                                routine 'mysqltest.f1'
            mysql> drop procedure  mysqltest.f1;
            ERROR 1370 (42000): alter routine command denied to user ''@'localhost' for
                                routine 'mysqltest.f1'
            
            CREATE:
            ----------
            mysql> create function mysqltest.f1() returns int return 0; 
            ERROR 1044 (42000): Access denied for user ''@'localhost' to database 
                                'mysqltest'
            mysql> create procedure mysqltest.p1() begin end; 
            ERROR 1044 (42000): Access denied for user ''@'localhost' to database 
                                'mysqltest'
            
            ALTER:
            ---------
            mysql> alter function mysqltest.f1 comment "TESTING";
            ERROR 1370 (42000): alter routine command denied to user ''@'localhost' for
                                routine 'mysqltest.f1'
            mysql> alter procedure  mysqltest.f1 comment "TESTING";
            ERROR 1370 (42000): alter routine command denied to user ''@'localhost' for 
                                routine 'mysqltest.f1'
        
        For "SELECT <function_name>" and "CALL <procedure_name>" we were 
        providing "doesn't exists" error.  Also when non existing function is used while
        creating the views we see same issue.
        
        Fix:
        ------------------------------------------------
        SELECT and CALL didn't have the logic to check execute privilege on routine for
        the user. This patch solves problem by checking the privileges to user before 
        checking the existence of the function.
    ------------------------------------------------------------
    revno: 3402.50.95
    committer: Chaithra Gopalareddy <chaithra.gopalareddy@oracle.com>
    branch nick: mysql-5.6
    timestamp: Mon 2012-01-30 12:09:02 +0530
    message:
      Bug#11764651-57510:Comparing uninitialized values in CTYPE-BIN.c
      
      The first part of the problem reported in the bug, is  fixed in the patch for 
      Bug#11766212.This fix is for the second part of the problem reported.
      
      PROBLEM:
      
      The following query results in an invalid read when run with valgrind
      
      select left(geomfromtext("point(0 0)"),1) not in ( @@global.query_cache_type,1 not between -1 and "a", elt(1,'',1,1,1), geomfromtext("point(1 -1)") in ("bbbbbbbbb"),1);
      
      5.5.8-debug valgrind output:
      Invalid read of size 1
      at: my_strnncollsp_utf8 (ctype-utf8.c:2590)
      by: sortcmp (sql_string.cc:668)
      by: cmp_item_sort_string::cmp (item_cmpfunc.h:1019)
      by: Item_func_in::val_int (item_cmpfunc.cc:4130)
      by: Item::send (item.cc:5864)
      by: Protocol::send_result_set_row (protocol.cc:848)
      by: select_send::send_data (sql_class.cc:1789)
      by: JOIN::exec (sql_select.cc:1857)
      by: mysql_select (sql_select.cc:2568)
      by: handle_select (sql_select.cc:296)
      by: execute_sqlcom_select (sql_parse.cc:4464)
      by: mysql_execute_command (sql_parse.cc:2066)
      by: mysql_parse (sql_parse.cc:5500)
      by: dispatch_command (sql_parse.cc:1030)
      by: do_command (sql_parse.cc:770)
      by: do_handle_one_connection (sql_connect.cc:745)
      by: handle_one_connection (sql_connect.cc:684)
      by: start_thread (pthread_create.c:301)
      
      Problem Analysis:
      The above mentioned invalid read can be reproduced using a simplified query like this one:
      select left(geomfromtext("point(0 0)"),1) in (@@global.query_cache_type,1,"");
      
      Problem is present in cmp_item_sort_string::store_value, because it does not make 
      its own copy of the value evaluated. Instead tries to refer to a temporary value 
      that could be changed or deleted by other functions. Hence while reusing the 
      evaluated value in case of Item_func_in::val_int, we get a valgrind error saying 
      Invalid read. 
      
      With respect to the above query, this is what happens:
      
      a) To be compared with @@global.query_cache_type, function left() is evaluated in 
      "string" context. This evaluation modifies Item_func_left::tmp_value, and returns 
      a pointer to this tmp_value. 
      The "comparator object" (cmp_item) stores the returned pointer in 
      cmp_item::value_res and then the comparison is done. 
      
      b) To be compared with 1, left() is evaluated in "real number" context, which 
      modifies Item_func_left::tmp_value again. Comparison is done with the real value.
      
      c) To be compared with "", left() is NOT evaluated again because cmp_item already 
      has a pointer to the value of left() in string context (from (a)). However, this 
      value was a pointer to Item_func_left::tmp_value, and (b) has modified this String. So we would be  looking at out-of-date data. 
      Hence while reusing the evaluated value in case of Item_func_in::val_int, we get 
      a valgrind error saying Invalid read. 
      
      Solution:
      The fix it to make a copy of the value retured from val_str() in 
      cmp_item_sort_string::store_value().
    ------------------------------------------------------------
    revno: 3402.50.94
    committer: Dmitry Shulga <Dmitry.Shulga@oracle.com>
    branch nick: mysql-trunk-bug13608371
    timestamp: Mon 2012-01-30 11:34:32 +0600
    message:
      This patch fixes bug#13608371 (formerly known as bug 62311):
      segfault in mysqld during early SIGHUP handling.
      
      If during server start up some signals like SIGHUP are caught before full
      server initialization has been done then server may crash.
      
      The reason for this bug is that there was a race condition between signal
      handler thread and main thread that was doing server initialization.
      For example, if SIGHUP signal was delivered to server and caught by signal
      handler thread before server had completed initialization of Event_scheduler
      then server crashed when try to access to uninitialized event_scheduler
      instance during signal handling.
      
      To avoid such race condition we suspend signal processing before full
      initialization of all server components has been completed successfully.
      It's achieved by waiting for on COND_server_started conditional variable
      until a flag mysqld_server_started is true.
      
      Moreover superfluous call of pthread_sigmask() to set thread signal mask
      was removed since all signal have been already blocked during execution
      of my_init_signal().
      
      Also call of mysql_cond_broadcast(&COND_thread_count) at signal_hand()
      was moved under protection of mutex LOCK_thread_count to provide deterministic
      schedule behaviour.
    ------------------------------------------------------------
    revno: 3402.50.93
    committer: Christopher Powers <chris.powers@oracle.com>
    branch nick: mysql-trunk-bug13440472
    timestamp: Sat 2012-01-28 18:57:40 -0600
    message:
      Bug#13440472 MANY VALGRIND FAILURES ON DAILY-TRUNK
        
      Added Valgrind suppression case for add_pfs_instr_to_array().
    ------------------------------------------------------------
    revno: 3402.50.92
    committer: Ole John Aske <ole.john.aske@oracle.com>
    branch nick: mysql-trunk
    timestamp: Fri 2012-01-27 12:20:26 +0100
    message:
      Followup fix for bug#13330645.
      
      As we now don't request HA_MRR_SORTED when there are no sort requirements, we have
      to add some '--sorted_result' to the tests in order to get the expected row order
      in the results.
    ------------------------------------------------------------
    revno: 3402.50.91
    committer: Guilhem Bichot <guilhem.bichot@oracle.com>
    branch nick: trunk3
    timestamp: Fri 2012-01-27 09:45:00 +0100
    message:
      Now that pb2 has a daily run with non-default innodb page size,
      we get test failures because page size influences cost 
      and thus influences the trace. Solution: disable the failing
      test if page size is non-default.
    ------------------------------------------------------------
    revno: 3402.50.90
    committer: Praveenkumar Hulakund <praveenkumar.hulakund@oracle.com>
    branch nick: trunk
    timestamp: Fri 2012-01-27 13:46:43 +0530
    message:
      BUG#11764786: 57657: TEMPORARY MERGE TABLE WITH TEMPORARY UNDERLYING IS BROKEN BY ALTER
            
            Analysis:
            --------------------------------------------
            When merge table is created, then MyISAM MERGE creates a file .MRG. Engine adds
            names of the tables (children tables) and insert method in this file. So, if we
            consider the tables listed in "HOW TO REPEAT" section then content of .MRG file 
            of "tm_temp_temp"table  will be as below
            
                    >cat #<tmp_file_name>.MRG
                    -----------------------
                    ./test/t1_temp
                    #INSERT_METHOD=FIRST
                    -----------------------
            
            So for both, temporary and non-temporary children table "table name" is added in
            .MRG file in "./<db_name>/<table_name>" format. So that the table can be opened
            using <db_name>.<table_name> [from comments written in function 
            "ha_myisammrg::create"].
            
            When sql query to alter merge table "tm_temp_temp" is called then "mysql_alter_table"
            function calls "open_and_lock_tables" which in turn call the table open function of 
            MyISAM MERGE storage. MyISAM MERGE storage handler, holds all the open table 
            information in open_tables of type MYRG_TABLE.So, in open function of MyISAM Merge 
            handler, table "tm_temp_temp" is opened and held with the open_tables.
            
            Since, this merge table contains child_table (t1_temp). All the child table are 
            opened and TABLE_LIST of child table will be "children_l" member of MyISAM Merge handler.
            children_l is doubly linked list of all child tables.
            
                children_l -> TABLE_LIST::next_global -> TABLE_LIST::next_global
                #             #               ^          #               ^
                #             #               |          #               |
                #             #               +--------- TABLE_LIST::prev_global
                #             #                                          |
                #       |<--- TABLE_LIST::prev_global                    |
                #                                                        |
                children_last_l -----------------------------------------+
            
            
            And information of all child tables are also held in the open_tables of MyISAM merge 
            handler.
            
            The name of the table file for each table opened is held in the "filename" of 
            open_tables->table (type is struct st_myisam_info). 
            
            * Why merge table is getting corrupted in "alter table"?
              Alter table calls function "update_create_info" function. In "update_create_info"
              function of MyISAM Merge Handler, merge list (TABLE_LIST of child tables) is 
              populated in create_info object of type HA_CREATE_INFO. And this list is then used 
              to create new .MRG file to reflect the alter operations.
            
              In function, "update_create_info" of MyISAM MERGE, the DB name and the TABLE name
              are extracted from the filename stored in the member "open_tables->table->filename"
              as below,
            
                split_file_name(open_table->table->filename, &db_name, &file_name);
            
              This db name and file name are stored in the create_info object. And while creating
              the .MRG file, table name of the child table is written into it in the 
              "./<db_name>/<table_name> format.
            
              When merge table has non-temporary child tables then "filename" contains proper db 
              name and file name.
            
              But when merge table has temporary tables then "filename" has a temporary filename
              created in "/tmp" directory (for eg: /tmp/#sql7a3b_2_1). So when "split_file_name"
              function is called with this value, "tmp" is stored in the db name "#sql7a3b_2_1"
              is stored in the file name. So here while creating new .MRG file, "./tmp/#sql7a3b_2_1"
              written as a child entry. 
            
                    >cat #<tmp_file_name>.MRG
                    -----------------------
                    "./tmp/#sql7a3b_2_1"
                    #INSERT_METHOD=LAST
                    -----------------------
            
              After this, any operation on merge table gives error as its fails to find "tmp" DB 
              and table name "#sql7a3b_2_1". And because of the same reason "check table" also
              reported the "table corruption" error.
            
            *. Why we wont see this issue while creating merge table?
               While creating merge table, "create_info" object of type HA_CREATE_INFO is formed by 
               parser with valid "merge_list" (with proper DB name and table name for temporary
               and non-temporary tables). So, create table function of MyISAM MERGE creates .MRG file.
               So, .MRG contains proper entry for table after creating a table.
            
                    >cat #<tmp_file_name>.MRG
                    -----------------------
                    ./test/t1_temp
                    #INSERT_METHOD=FIRST
                    -----------------------
            
               Since, create_info populated with merge_list by parser itself, function "update_create_info"
               is not called.
            
            Possible Fix:
            --------------------------------------------
            Instead of getting db name and table name from "open_tables->table->filename" in 
            update_create_info function, the db name and table name can be obtained from
            the TABLE_LIST of each child table stored in the "children_l" of MyISAM MERGE
            handler. For both the temporary and non-temporary child table the TABLE_LIST 
            is propogated with proper DB name and table name in members "db" and "table_name".
            
            So as a, logic of the "update_create_info" MyISAM MERGE handler is
            changed so that it gets db name and table from TABLE_LIST stored in "children_l".
    ------------------------------------------------------------
    revno: 3402.50.89
    committer: Dmitry Shulga <Dmitry.Shulga@oracle.com>
    branch nick: mysql-trunk-bug12872824
    timestamp: Fri 2012-01-27 11:57:35 +0600
    message:
      Patch for bug#12872824 (formerly known as 62125): testing stored function
      result for null incorrectly yields 1292 warning.
      
      The reason for this bug was that when server executed expression 'IS NULL'
      for return value of some stored function it calculated the return
      value before checking it for NULL. During return value calculation
      it's assumed that a value has INTEGER type that is not true in general.
      
      The solution is to evaluate return value for NULL without its calculation.
    ------------------------------------------------------------
    revno: 3402.50.88 [merge]
    committer: Yasufumi Kinoshita <yasufumi.kinoshita@oracle.com>
    branch nick: mysql-trunk
    timestamp: Fri 2012-01-27 13:18:55 +0900
    message:
      Fix for build break introduced at fix for Bug #13413535
      asked by Calvin
        ------------------------------------------------------------
        revno: 2875.338.22
        committer: Yasufumi Kinoshita <yasufumi.kinoshita@oracle.com>
        branch nick: mysql-5.5
        timestamp: Fri 2012-01-27 13:07:24 +0900
        message:
          Fix for build break introduced at rev 3711
          asked by Calvin
------------------------------------------------------------
revno: 3608
committer: Sven Sandberg <sven.sandberg@oracle.com>
branch nick: trunk-wl3584
timestamp: Wed 2012-02-08 16:42:46 +0100
message:
  WL#3584 post-push fixes
  more result files to update
------------------------------------------------------------
revno: 3607
committer: Sven Sandberg <sven.sandberg@oracle.com>
branch nick: trunk-wl3584
timestamp: Wed 2012-02-08 15:17:28 +0100
message:
  WL#3584 test cleanup
  use symbolic and not numeric error codes
------------------------------------------------------------
revno: 3606
committer: Sven Sandberg <sven.sandberg@oracle.com>
branch nick: trunk-wl3584
timestamp: Wed 2012-02-08 14:54:11 +0100
message:
  WL#3584 post-push fix (2)
  one more result file to update after previous changeset
------------------------------------------------------------
revno: 3605
committer: Sven Sandberg <sven.sandberg@oracle.com>
branch nick: trunk-wl3584
timestamp: Wed 2012-02-08 14:52:52 +0100
message:
  WL#3584 post-push fixes
  more result files need to be updated after previous changeset
------------------------------------------------------------
revno: 3604
committer: Sven Sandberg <sven.sandberg@oracle.com>
branch nick: trunk-wl3584
timestamp: Wed 2012-02-08 14:42:28 +0100
message:
  WL#3584 cosmetic fixes
  updated copyright notices and debug printouts
------------------------------------------------------------
revno: 3603
committer: Sven Sandberg <sven.sandberg@oracle.com>
branch nick: trunk-wl3584
timestamp: Wed 2012-02-08 14:28:38 +0100
message:
  WL#3584 test cases
  Purpose:
  Make output from include/show_binlog_events.inc independent of
  whether gtid_mode=on or off.
  Implementation:
  This cannot be done using the usual replace_{result|regex|column}
  because they don't allow removing entire rows. Instead, we use
  perl to parse the output.
------------------------------------------------------------
revno: 3602 [merge]
committer: Andrei Elkin <andrei.elkin@oracle.com>
branch nick: wl3584-fixes
timestamp: Wed 2012-02-08 13:18:13 +0200
message:
  merging from the GTID repo to a local branch.
    ------------------------------------------------------------
    revno: 3600.1.1
    committer: Alfranio Correia <alfranio.correia@oracle.com>
    branch nick: mysql-trunk-wl3584.merge
    timestamp: Wed 2012-02-08 10:30:59 +0000
    message:
      Disabled gtid collections and fixed error in binlog_gtid_errors.
------------------------------------------------------------
revno: 3601
committer: Andrei Elkin <andrei.elkin@oracle.com>
branch nick: wl3584-fixes
timestamp: Wed 2012-02-08 13:16:27 +0200
message:
  Bug 13689818 - ASSERTION OWNED_GTIDS.GET_OWNER(GTID) != THD->THREAD_ID
  
  SQL applier thread did not handle properly successive GTID_NEXT events
  which led to asserts in running 
  rpl_ignore_table, rpl_alter_repository with
  ./mtr --mysqld=--gtid-mode=ON --mysqld=--log-bin --mysqld=--log-slave-updates  \
  --mysqld=--disable-gtid-unsafe-statements  \
  --mysqld=--debug=+d,allow_gtid_unsafe_non_transactional_updates  
------------------------------------------------------------
revno: 3600 [merge]
committer: Alfranio Correia <alfranio.correia@oracle.com>
branch nick: mysql-trunk-wl3584
timestamp: Tue 2012-02-07 15:54:13 +0000
message:
  merge mysql-trunk-wl3584 --> mysql-trunk-wl3584 (local)
    ------------------------------------------------------------
    revno: 3598.1.1
    committer: Alfranio Correia <alfranio.correia@oracle.com>
    branch nick: mysql-trunk-wl3584.merge
    timestamp: Tue 2012-02-07 10:55:08 +0000
    message:
      BUG#13689798 - ASSERTION "GET_TYPE_CODE() == STOP_EVENT" IN WL#3584
      
      Fixed assertion when checking CRC information on PREVIOUS_GTIDS_LOG_EVENT.
------------------------------------------------------------
revno: 3599
committer: Andrei Elkin <andrei.elkin@oracle.com>
branch nick: mysql-trunk-wl3584
timestamp: Tue 2012-02-07 15:28:16 +0200
message:
  WL#3584 GTID: rpl_mysqlbinlog_gtid_on failure fixing.
  
  Fixed with correcting the test.
------------------------------------------------------------
revno: 3598
committer: Alfranio Correia <alfranio.correia@oracle.com>
branch nick: mysql-trunk-wl3584.merge
timestamp: Mon 2012-02-06 22:12:31 +0000
message:
  Forced collections where gtid is enabled to use servers
  compiled in debug mode.
------------------------------------------------------------
revno: 3597
committer: Alfranio Correia <alfranio.correia@oracle.com>
branch nick: mysql-trunk-wl3584.merge
timestamp: Mon 2012-02-06 19:24:47 +0000
message:
  Enabled gtid.
------------------------------------------------------------
revno: 3596
committer: Sven Sandberg <sven.sandberg@oracle.com>
branch nick: trunk-wl3584
timestamp: Mon 2012-02-06 15:07:18 +0100
message:
  WL#3584 bugfixes
   - DDL that fails throws an assertion if GTID_NEXT=SID:GNO
   - add file binlog_gtid_errors-master.opt
     (forgot to add in previous commit)
------------------------------------------------------------
revno: 3595
committer: Sven Sandberg <sven.sandberg@oracle.com>
branch nick: trunk-wl3584
timestamp: Fri 2012-02-03 23:18:51 +0100
message:
  WL#3584: improve error messages
  change error messages as suggested by jon
------------------------------------------------------------
revno: 3594
committer: Sven Sandberg <sven.sandberg@oracle.com>
branch nick: trunk-wl3584
timestamp: Fri 2012-02-03 16:30:39 +0100
message:
  WL#3584 bugfix
  Remove race in Gtid_set: we need to hold a lock while accessing
  the list of free intervals.
------------------------------------------------------------
revno: 3593
committer: Alfranio Correia <alfranio.correia@oracle.com>
branch nick: mysql-trunk-wl3584.merge
timestamp: Fri 2012-02-03 09:27:05 +0000
message:
  Added the ability to use mysqlbinlog to connect to a master through
  COM_BINLOG_DUMP_GTID.
------------------------------------------------------------
revno: 3592
committer: Andrei Elkin <andrei.elkin@oracle.com>
branch nick: wl3584-fixes
timestamp: Thu 2012-02-02 20:41:01 +0200
message:
  wl#3584 GTID
  
  A feature test to cover mysqlbinlog with the options is improved.
------------------------------------------------------------
revno: 3591
committer: Sven Sandberg <sven.sandberg@oracle.com>
branch nick: trunk-wl3584
timestamp: Thu 2012-02-02 11:23:04 +0100
message:
  WL#3584 bugfixes
   - Add assertions
   - Make disable_gtid_unsafe_statements ineffective when sql_log_bin=0
   - Test one more error condition related to GTID_NEXT.
------------------------------------------------------------
revno: 3590
committer: Alfranio Correia <alfranio.correia@oracle.com>
branch nick: mysql-trunk-wl3584.merge
timestamp: Wed 2012-02-01 18:14:06 +0000
message:
  Fixed assertion triggered when MTS was enabled and empty groups
  (i.e. GTID, BEGIN, COMMIT) were generated.
  
  The patch also initialized the trx-cache by firstly calling the
  function binlog_start_trans_and_stmt before accessing the cache.
------------------------------------------------------------
revno: 3589
committer: Sven Sandberg <sven.sandberg@oracle.com>
branch nick: trunk-wl3584
timestamp: Wed 2012-02-01 17:03:44 +0100
message:
  WL#3584 cleanup
  Use local sid_map instead of global one in master dump thread,
  to reduce lock contention.
------------------------------------------------------------
revno: 3588
committer: Sven Sandberg <sven.sandberg@oracle.com>
branch nick: trunk-wl3584
timestamp: Wed 2012-02-01 16:49:40 +0100
message:
  WL#3584 cleanup
  Use 'const Gtid &', 'const rpl_sid &', 'const Gtid_specification &'
  instead of 'Gtid', 'const rpl_sid *', 'const Gtid_specification *'
  in function prototypes.
------------------------------------------------------------
revno: 3587
committer: Sven Sandberg <sven.sandberg@oracle.com>
branch nick: trunk-wl3584
timestamp: Wed 2012-02-01 15:51:39 +0100
message:
  WL#3584: test case bugfixes
------------------------------------------------------------
revno: 3586
committer: Sven Sandberg <sven.sandberg@oracle.com>
branch nick: trunk-wl3584
timestamp: Wed 2012-02-01 11:50:36 +0100
message:
  WL#3584 bugfixes
   - Made statements that are already in the binlog be skipped correctly.
   - Allow whitespace in GTID_NEXT
------------------------------------------------------------
revno: 3585
committer: Alfranio Correia <alfranio.correia@oracle.com>
branch nick: mysql-trunk-wl3584.merge
timestamp: Tue 2012-01-31 15:11:07 +0000
message:
  Cleanup.
------------------------------------------------------------
revno: 3584
committer: Sven Sandberg <sven.sandberg@oracle.com>
branch nick: trunk-wl3584-opt
timestamp: Tue 2012-01-31 14:48:05 +0100
message:
  WL#3584 fix compilation warnings
------------------------------------------------------------
revno: 3583
committer: Sven Sandberg <sven.sandberg@oracle.com>
branch nick: trunk-wl3584
timestamp: Tue 2012-01-31 12:28:53 +0100
message:
  WL#3584 tests
  made rpl_gtid_execution.test output better debug info when failing on pb
------------------------------------------------------------
revno: 3582
committer: Sven Sandberg <sven.sandberg@oracle.com>
branch nick: trunk-wl3584
timestamp: Mon 2012-01-30 20:56:21 +0100
message:
  WL#3584 bugfix
  Make re-execution of GTIDs work correctly when there are
  concurrent connections. In particular, if GTID_NEXT is set
  to a GTID that is already logged, the current statement
  should be skipped.
------------------------------------------------------------
revno: 3581
committer: Alfranio Correia <alfranio.correia@oracle.com>
branch nick: mysql-trunk-wl3584.merge
timestamp: Fri 2012-01-27 10:15:12 +0000
message:
  Fixed problem in rpl_row_crash_safe.
  
  By mistake the option --relay-log-recovery was removed thus causing problems
  when running --mysqld=--master-info-repository=TABLE as sync-master-info is
  not enabled. Basically, this leads to events being retrieved twice from the
  master.
------------------------------------------------------------
revno: 3580 [merge]
committer: Alfranio Correia <alfranio.correia@oracle.com>
branch nick: mysql-trunk-wl3584.merge
timestamp: Fri 2012-01-27 08:04:47 +0000
message:
  merge mysql-trunk ---> mysql-trunk-wl3584
  
  Conflits:
    sql/rpl_master.cc
    sql/sys_vars.cc
    ------------------------------------------------------------
    revno: 3402.50.87
    committer: Christopher Powers <chris.powers@oracle.com>
    branch nick: mysql-trunk-bug13440472
    timestamp: Thu 2012-01-26 13:03:55 -0600
    message:
      Bug#13440472 MANY VALGRIND FAILURES ON DAILY-TRUNK
      
      Added one more suppression
    ------------------------------------------------------------
    revno: 3402.50.86
    committer: Christopher Powers <chris.powers@oracle.com>
    branch nick: mysql-trunk-bug13440472
    timestamp: Thu 2012-01-26 11:49:01 -0600
    message:
      Bug#13440472 MANY VALGRIND FAILURES ON DAILY-TRUNK
        
      Deallocate the array of PFS instrument configuration values during
      server shutdown to avoid Valgrind errors.
    ------------------------------------------------------------
    revno: 3402.50.85 [merge]
    committer: Christopher Powers <chris.powers@oracle.com>
    branch nick: mysql-trunk-bug13440472
    timestamp: Thu 2012-01-26 11:46:48 -0600
    message:
      local merge
        ------------------------------------------------------------
        revno: 3402.57.11
        committer: Ole John Aske <ole.john.aske@oracle.com>
        branch nick: mysql-trunk
        timestamp: Thu 2012-01-26 13:53:38 +0100
        message:
           Fix for bug#13330645 'MRR_SORTED' IS NOT USED EVEN IF HANDLER NATIVELY SUPPORTS 'HA_MRR_SORTED'
            
           There was an assumption that only the default MRR implementation is 
           able to produce 'HA_MRR_SORTED' results. This has lead to the bad codestyle
           of either setting  'param.force_default_mrr= true' or specifying the
           HA_MRR_USE_DEFAULT_IMPL flag whenever we wanted a sorted MRR resultset.
                
           This fix leaves the decision of using either the native or the default MRR
           implementation to the handler itself based on its capabilities.
                
           Furthermore, mostly due to skip_sort_order not being decided until
           JOIN::exec(), the handler will also set the (new) HA_MRR_SUPPORT_SORTED
           flag to signal if its is 'Using MRR' if its multi_range_read_init()
           is called with the HA_MRR_SORTED flag - This has the sole purpose of
           getting the EXPLAIN correct. This part of the fix might become obsolete
           if/when the planned reshuffle of skip_sort_order (Into JOIN::optimize) 
           has been completed.
                
           There was also a problem with DsMrr_impl::dsmrr_init() not
           checking the OPTIMIZER_SWITCH_MRR when deciding to init()
           either the DS-MRR or default MRR implementation.
           (There are cases where ::dsmrr_init() is called wo/ 
           ::dsmrr_info[_const]() being called first).
                
        ------------------------------------------------------------
        revno: 3402.57.10
        committer: Marko M?kel? <marko.makela@oracle.com>
        branch nick: mysql-trunk
        timestamp: Thu 2012-01-26 14:50:34 +0200
        message:
          Bug#13610358 innodb_sort_buf_size should be called innodb_sort_buffer_size
          for consistency
        ------------------------------------------------------------
        revno: 3402.57.9
        committer: Mattias Jonsson <mattias.jonsson@oracle.com>
        branch nick: b13511529-t
        timestamp: Thu 2012-01-26 13:39:35 +0100
        message:
          Bug#13511529 post-push fix of test.
          
          Test failed with --ps-protocol.
          
          Fixed by moving failing create table's to before
          the working one.
        ------------------------------------------------------------
        revno: 3402.57.8 [merge]
        committer: Jorgen Loland <jorgen.loland@oracle.com>
        branch nick: mysql-trunk
        timestamp: Thu 2012-01-26 13:31:26 +0100
        message:
          Merge 5.5 to trunk
            ------------------------------------------------------------
            revno: 2875.338.21
            committer: Jorgen Loland <jorgen.loland@oracle.com>
            branch nick: mysql-5.5
            timestamp: Thu 2012-01-26 13:30:11 +0100
            message:
              BUG 13413535 followup: Fix gcc warning
        ------------------------------------------------------------
        revno: 3402.57.7 [merge]
        committer: Marko M?kel? <marko.makela@oracle.com>
        branch nick: mysql-trunk
        timestamp: Thu 2012-01-26 13:57:53 +0200
        message:
          Merge mysql-5.5 to mysql-trunk.
            ------------------------------------------------------------
            revno: 2875.338.20
            committer: Marko M?kel? <marko.makela@oracle.com>
            branch nick: mysql-5.5
            timestamp: Thu 2012-01-26 13:24:00 +0200
            message:
              Bug #13413535 61104: INNODB: FAILING ASSERTION: PAGE_GET_N_RECS(PAGE) > 1
              
              This fix does not remove the underlying cause of the assertion
              failure. It just works around the problem, allowing a corrupted
              secondary index to be fixed by DROP INDEX and CREATE INDEX (or in the
              worst case, by re-creating the table).
              
              ibuf_delete(): If the record to be purged is the last one in the page
              or it is not delete-marked, refuse to purge it. Instead, write an
              error message to the error log and let a debug assertion fail.
              
              ibuf_set_del_mark(): If the record to be delete-marked is not found,
              display some more information in the error log and let a debug
              assertion fail.
              
              row_undo_mod_del_unmark_sec_and_undo_update(),
              row_upd_sec_index_entry(): Let a debug assertion fail when the record
              to be delete-marked is not found.
              
              buf_page_print(): Add ut_ad(0) so that corruption will be more
              prominent in stress testing with debug binaries. Add ut_ad(0) here and
              there where corruption is noticed.
              
              btr_corruption_report(): Display some data on page_is_comp() mismatch.
              
              btr_assert_not_corrupted(): A wrapper around btr_corruption_report().
              Assert that page_is_comp() agrees with the table flags.
              
              rb:911 approved by Inaam Rana
        ------------------------------------------------------------
        revno: 3402.57.6
        committer: Martin Hansson <martin.hansson@oracle.com>
        branch nick: mysql-trunk
        timestamp: Thu 2012-01-26 12:34:35 +0100
        message:
          Bug#13536661: Moved the test case to optimizer_debug_sync (currently decativated).
        ------------------------------------------------------------
        revno: 3402.57.5 [merge]
        committer: Guilhem Bichot <guilhem.bichot@oracle.com>
        branch nick: trunk3
        timestamp: Thu 2012-01-26 11:11:47 +0100
        message:
          merge from latest trunk
            ------------------------------------------------------------
            revno: 3402.58.1
            committer: Mattias Jonsson <mattias.jonsson@oracle.com>
            branch nick: b13511529-t
            timestamp: Thu 2012-01-26 10:29:33 +0100
            message:
              Bug#13511529: EXAMPLE ENGINE DOES NOT SUPPORT RND_INIT(),
              BUT SUPPORTS RND_NEXT()
              
              After checking return value from rnd_init() the example engine
              failed even on selects, where it previously succeeded.
              
              Problem was that ha_example::rnd_init always returned
              HA_ERR_WRONG_COMMAND, so that it would never try
              rnd_next.
              
              Fixed by always return 0 in rnd_init, so it would try
              rnd_next.
              
              Also added a couple of tests to show the lack of features in
              the example engine.
              
              Updated test after review.
        ------------------------------------------------------------
        revno: 3402.57.4 [merge]
        committer: Guilhem Bichot <guilhem.bichot@oracle.com>
        branch nick: trunk3
        timestamp: Thu 2012-01-26 11:08:12 +0100
        message:
          merge from 5.5
            ------------------------------------------------------------
            revno: 2875.338.19 [merge]
            committer: Guilhem Bichot <guilhem.bichot@oracle.com>
            branch nick: mysql-5.5-2
            timestamp: Thu 2012-01-26 10:38:28 +0100
            message:
              merge from 5.1
                ------------------------------------------------------------
                revno: 2661.827.4
                committer: Guilhem Bichot <guilhem.bichot@oracle.com>
                branch nick: mysql-5.1
                timestamp: Thu 2012-01-26 10:25:23 +0100
                message:
                  Fixes for:
                  BUG#13519696 - 62940: SELECT RESULTS VARY WITH VERSION AND
                  WITH/WITHOUT INDEX RANGE SCAN
                  BUG#13453382 - REGRESSION SINCE 5.1.39, RANGE OPTIMIZER WRONG
                  RESULTS WITH DECIMAL CONVERSION
                  BUG#13463488 - 63437: CHAR & BETWEEN WITH INDEX RETURNS WRONG
                  RESULT AFTER MYSQL 5.1.
                  Those are all cases where the range optimizer got it wrong
                  with > and >=.
        ------------------------------------------------------------
        revno: 3402.57.3 [merge]
        committer: Tor Didriksen <tor.didriksen@oracle.com>
        branch nick: trunk-merge
        timestamp: Thu 2012-01-26 08:01:30 +0100
        message:
          merge 5.5 => trunk
            ------------------------------------------------------------
            revno: 2875.338.18
            committer: Tor Didriksen <tor.didriksen@oracle.com>
            branch nick: 5.5
            timestamp: Thu 2012-01-26 08:00:37 +0100
            message:
              Bug#11753187 post-push fix: fix .result file
    ------------------------------------------------------------
    revno: 3402.50.84 [merge]
    committer: Christopher Powers <chris.powers@oracle.com>
    branch nick: mysql-trunk-bug13440472
    timestamp: Thu 2012-01-26 00:30:39 -0600
    message:
      local merge
        ------------------------------------------------------------
        revno: 3402.57.2
        committer: kevin.lewis@oracle.com
        branch nick: mysql-trunk
        timestamp: Wed 2012-01-25 13:31:50 -0600
        message:
          Bug#13623078 - Use UNIV_PAGE_SIZE instead of 16*1024 for handler::block_size.
          Approved by marko on #innodb
          Tested with 4k, 8k and 16k pages and with PB2 on mysql-trunk-innodb-pb2
        ------------------------------------------------------------
        revno: 3402.57.1 [merge]
        committer: Nuno Carvalho <nuno.carvalho@oracle.com>
        branch nick: mysql-trunk
        timestamp: Wed 2012-01-25 18:17:41 +0000
        message:
          Merge from mysql-5.5 into mysql-trunk.
          
          Conflicts:
           mysql-test/suite/rpl/r/rpl_heartbeat_basic.result
            ------------------------------------------------------------
            revno: 2875.338.17
            committer: Nuno Carvalho <nuno.carvalho@oracle.com>
            branch nick: mysql-5.5
            timestamp: Wed 2012-01-25 18:05:10 +0000
            message:
              BUG#12403008 RPL_HEARTBEAT_BASIC FAILS SPORADICALLY ON PUSHBUILD
              
              rpl_heartbeat_basic test fails sporadically on pushbuild because did
              not received all heartbeats from slave in circular replication.
              
              MASTER_HEARTBEAT_PERIOD had the default value (slave_net_timeout/2) so
              wait on "Heartbeat event received on master", that only waits for 1
              minute, sometimes timeout before heartbeat arrives. Fixed setting a
              smaller period value.
    ------------------------------------------------------------
    revno: 3402.50.83
    committer: Christopher Powers <chris.powers@oracle.com>
    branch nick: mysql-trunk-bug13440472
    timestamp: Wed 2012-01-25 16:37:55 -0600
    message:
      Bug#13440472 MANY VALGRIND FAILURES ON DAILY-TRUNK
      
      Deallocate the array of PFS instrument configuration values during
      server shutdown to avoid Valgrind errors.
    ------------------------------------------------------------
    revno: 3402.50.82 [merge]
    committer: Tor Didriksen <tor.didriksen@oracle.com>
    branch nick: trunk-merge
    timestamp: Wed 2012-01-25 16:49:57 +0100
    message:
      merge 5.5 => trunk
        ------------------------------------------------------------
        revno: 2875.338.16
        committer: Tor Didriksen <tor.didriksen@oracle.com>
        branch nick: 5.5-merge
        timestamp: Wed 2012-01-25 16:11:03 +0100
        message:
          Bug#13359121 LARGE NUMBERS, /STRINGS/DTOA.C:662
          Bug#12985021 SIMPLE QUERY WITH DECIMAL NUMBERS TAKE AN
          
          When parsing the fractional part of a string which
          is to be converted to double, we can stop after a few digits:
          the extra digits will not contribute to the actual result anyways.
    ------------------------------------------------------------
    revno: 3402.50.81 [merge]
    committer: Inaam Rana <inaam.rana@oracle.com>
    branch nick: mysql-trunk
    timestamp: Wed 2012-01-25 10:12:39 -0500
    message:
      merge from parent
        ------------------------------------------------------------
        revno: 3402.56.1 [merge]
        committer: Tor Didriksen <tor.didriksen@oracle.com>
        branch nick: trunk-merge
        timestamp: Wed 2012-01-25 16:06:20 +0100
        message:
          merge 5.5 => trunk
            ------------------------------------------------------------
            revno: 2875.338.15
            committer: Tor Didriksen <tor.didriksen@oracle.com>
            branch nick: 5.5
            timestamp: Wed 2012-01-25 16:05:27 +0100
            message:
              Bug#13463415 followup: compensate for compiler bug
    ------------------------------------------------------------
    revno: 3402.50.80
    committer: Inaam Rana <inaam.rana@oracle.com>
    branch nick: mysql-trunk
    timestamp: Wed 2012-01-25 10:07:48 -0500
    message:
      Bug#13619598	HANG IN IO HELPER THREAD WHEN USING SIMULATED AIO
      
      rb://910
      approved by: Marko Makela
      
      When:
      
      * single page flush is performed
      * dblwr is disabled
      * simulated aio is used
      
      There is a possibility of hang in IO helper thread because we miss to
      wake up handler threads. This does not happen with native aio because
      IO threads in that case wait on io_getevents() call and need not to be
      woken up. 
    ------------------------------------------------------------
    revno: 3402.50.79
    committer: Ole John Aske <ole.john.aske@oracle.com>
    branch nick: mysql-trunk
    timestamp: Wed 2012-01-25 15:52:00 +0100
    message:
      Fix for bug#13531865 TEST_IF_SKIP_SORT_ORDER() INCORRECTLY SKIP FILESORT IF 'TYPE' IS REF_OR_NULL
            
      Introduce the function is_ref_or_null_optimized() which is used by test_if_subkey()
      in order to avoid changing to an index requiring 'ref_or_null' access as we can
      never skip sort order for such an index. 
    ------------------------------------------------------------
    revno: 3402.50.78
    committer: Ole John Aske <ole.john.aske@oracle.com>
    branch nick: mysql-trunk
    timestamp: Wed 2012-01-25 15:37:43 +0100
    message:
      Fix for bug#13529048 TEST_IF_SKIP_SORT_ORDER() DON'T HAVE TO FILESORT A SINGLE ROW.
      
      test_if_skip_sort_order() should catch the jointypes
      JT_EQ_REF, JT_CONST and JT_SYSTEM and skip sort order for these.
      
      Didn't add a specific testcase for this bug as it should be
      covered by existing testcases which now will skip 'Using filesort'
    ------------------------------------------------------------
    revno: 3402.50.77
    committer: Ole John Aske <ole.john.aske@oracle.com>
    branch nick: mysql-trunk
    timestamp: Wed 2012-01-25 13:45:56 +0100
    message:
      Fix for Bug#13514959 QUERY PLAN FAILS TO 'USING INDEX' WHERE IT SHOULD
      
      Fix two issues related to 'keyread' from covering indexes (Explain: 'Using index')
      
      1)
         Recalculate (and set) keyread in test_if_skip_sort_order() whenever
         the best_key is changed (Optimizer may have changed its mind)
      
      2) If we during cleanup in test_if_skip_sort_order() decides
         to delete the 'save_quick' we had when entering
         test_if_skip_sort_order(), the ::~QUICK_RANGE_SELECT
         d'tor will set_keyread(FALSE)' even if another quick was
         set up to be used in 1) above.
    ------------------------------------------------------------
    revno: 3402.50.76
    committer: Martin Hansson <martin.hansson@oracle.com>
    branch nick: mysql-trunk
    timestamp: Wed 2012-01-25 12:42:57 +0100
    message:
      Bug#13536661: Deactivates the test case until a better place for it is found.
    ------------------------------------------------------------
    revno: 3402.50.75
    committer: Mayank Prasad <mayank.prasad@oracle.com>
    branch nick: 2emb_issue
    timestamp: Wed 2012-01-25 16:16:24 +0530
    message:
      Bug#13570079: - MAIN.MYSQL_EMBEDDED TEST FAILS ON WINDOWS-X86-64BIT ON DAILY-TRUNK
      
      Description: 
      -This test case (mysql_embedded) was failing on WINODWS 64 only.
      
      Issue:
      -In mysql_embedded test case, queries was wrappen in single
       quote ('), which was not treated as string delimiter. 
      
      Solution:
      -Changed single quote (') to double quote (") and test case
       is passing now.
    ------------------------------------------------------------
    revno: 3402.50.74 [merge]
    committer: Tor Didriksen <tor.didriksen@oracle.com>
    branch nick: trunk-merge
    timestamp: Wed 2012-01-25 10:57:22 +0100
    message:
      merge 5.5 => trunk
        ------------------------------------------------------------
        revno: 2875.338.14
        committer: Tor Didriksen <tor.didriksen@oracle.com>
        branch nick: 5.5-bug13463415decimal
        timestamp: Wed 2012-01-25 10:36:25 +0100
        message:
          Bug#13463415 63502: INCORRECT RESULTS OF BIGINT AND DECIMAL COMPARISON
          Bug#11758543 50756: BIGINT '100' MATCHES 1.001E2
          
          Expressions of the form
                BIGINT_COL <compare> <non-integer constant>
          
                should be done either as decimal, or float.
          
                Currently however, such comparisons are done as int,
                which means that the constant may be truncated,
                and yield false positives/negatives for all queries
                where compare is '>' '<' '>=' '<=' '=' '!='.
          
                BIGINT_COL IN <list of contstants>
                and
                BIGINT_COL BETWEEN <constant> AND <constant>
                are also affected.
    ------------------------------------------------------------
    revno: 3402.50.73 [merge]
    committer: Dmitry Shulga <Dmitry.Shulga@oracle.com>
    branch nick: mysql-trunk-bug11753187
    timestamp: Wed 2012-01-25 16:07:23 +0600
    message:
      Manual merge of patch for bug#11753187 from mysql-5.5 tree.
        ------------------------------------------------------------
        revno: 2875.338.13
        committer: Dmitry Shulga <Dmitry.Shulga@oracle.com>
        branch nick: mysql-5.5-bug11753187
        timestamp: Wed 2012-01-25 15:59:30 +0600
        message:
          Fixed bug#11753187 (formerly known as bug 44585): SP_CACHE BEHAVES AS
          MEMORY LEAK.
          
          Background:
           - There are caches for stored functions and stored procedures (SP-cache);
           - There is no similar cache for events;
           - Triggers are cached together with TABLE objects;
           - Those SP-caches are per-session (i.e. specific to each session);
           - A stored routine is represented by a sp_head-instance internally;
           - SP-cache basically contains sp_head-objects of stored routines, which
             have been executed in a session;
           - sp_head-object is added into the SP-cache before the corresponding
             stored routine is executed;
           - SP-cache is flushed in the end of the session.
          
          The problem was that SP-cache might grow without any limit. Although this
          was not a pure memory leak (the SP-cache is flushed when session is closed),
          this is still a problem, because the user might take much memory by
          executing many stored routines.
          
          The patch fixes this problem in the least-intrusive way. A soft limit
          (similar to the size of table definition cache) is introduced. To represent
          such limit the new runtime configuration parameter 'stored_program_cache'
          is introduced. The value of this parameter is stored in the new global
          variable stored_program_cache_size that used to control the size of SP-cache
          to overflow. 
          
          The parameter 'stored_program_cache' limits number of cached routines for
          each thread. It has the following min/default/max values given from support:
            min = 256, default = 256, max = 512 * 1024.
          Also it should be noted that this parameter limits the size of 
          each cache (for stored procedures and for stored functions) separately.
          
          The SP-cache size is checked after top-level statement is parsed.
          If SP-cache size exceeds the limit specified by parameter
          'stored_program_cache' then SP-cache is flushed and memory allocated for
          cache objects is freed. Such approach allows to flush cache safely 
          when there are dependencies among stored routines.
    ------------------------------------------------------------
    revno: 3402.50.72
    committer: Martin Hansson <martin.hansson@oracle.com>
    branch nick: mysql-trunk
    timestamp: Wed 2012-01-25 09:46:00 +0100
    message:
      Bug#13536661: VALGRIND: DEFINITELY LOST: 552 BYTES IN 1 BLOCKS IN
      CREATE_TMP_TABLE AND HIGHER
      
      A remnant from refactoring: When creating a temporary table we no
      longer keep a pointer to it in the JOIN structure, hence in case of
      subsequent errors inside JOIN::create_intermediate_table() there was a
      memory leak.
      
      Fixed by adding a goto label err: that does the cleanup.
      
      Made testable by adding the debug sync point tmp_table_created.
    ------------------------------------------------------------
    revno: 3402.50.71 [merge]
    committer: Marko M?kel? <marko.makela@oracle.com>
    branch nick: mysql-trunk
    timestamp: Wed 2012-01-25 10:25:07 +0200
    message:
      Merge mysql-5.5 to mysql-trunk.
        ------------------------------------------------------------
        revno: 2875.338.12 [merge]
        committer: Marko M?kel? <marko.makela@oracle.com>
        branch nick: mysql-5.5
        timestamp: Wed 2012-01-25 10:18:14 +0200
        message:
          Merge mysql-5.1 to mysql-5.5.
            ------------------------------------------------------------
            revno: 2661.827.3
            committer: Marko M?kel? <marko.makela@oracle.com>
            branch nick: mysql-5.1
            timestamp: Wed 2012-01-25 10:15:27 +0200
            message:
              btr_cur_search_to_nth_level(): Add a debug assertion
              and some Valgrind instrumentation.
    ------------------------------------------------------------
    revno: 3402.50.70
    committer: Annamalai Gurusami <annamalai.gurusami@oracle.com>
    branch nick: mysql-trunk-13604034
    timestamp: Wed 2012-01-25 11:22:50 +0530
    message:
      Bug #13604034 SET GLOBAL INNODB_UNDO_LOGS=0 SUCCEEDS BUT LEADS TO 
      AN ASSERT MAX_UNDO_LOGS > 0
      
      The min value was not checked, while setting the value of innodb_undo_logs config
      value.  This was fixed.  Also, the max value and the default value is not fixed in
      the case of innodb_undo_logs.  So after starting innodb, the max and default value
      of the innodb_undo_logs config will be reset to the proper value based on the 
      srv_available_undo_logs variable.  
      
      This system variable framework does not support doing the validation for default
      value (because the boundaries min and max is not fixed).  Because of this limitation
      of the framework, we needed to adjust the max and default value of the config object.
    ------------------------------------------------------------
    revno: 3402.50.69
    committer: Christopher Powers <chris.powers@oracle.com>
    branch nick: mysql-trunk-bug13018537
    timestamp: Tue 2012-01-24 17:42:36 -0600
    message:
      Bug 13018537 - TIMER NORMALIZATION FOR IDLE EVENTS
      
      PFS tables now uses the IDLE timer to normalize IDLE event times.
      Related changes:
       - Moved global class registration to a separate function
       - Added missing PFS class type enums
       - Created array of class-timer mapping
       - For all tables, cache timer normalizer in table class
       - For tables where timer normalizer changes row-to-row, get a new normalizer when the view (event type) changes
       - For tables where timer normalizer does not change, initialize normalizer once in rnd_init()
    ------------------------------------------------------------
    revno: 3402.50.68
    committer: Alexander Barkov <alexander.barkov@oracle.com>
    branch nick: mysql-trunk-gcov-w946
    timestamp: Tue 2012-01-24 17:17:11 +0400
    message:
      Better GCOV coverage for WL#946
    ------------------------------------------------------------
    revno: 3402.50.67 [merge]
    committer: Alexander Barkov <alexander.barkov@oracle.com>
    branch nick: mysql-trunk.b13458237
    timestamp: Tue 2012-01-24 16:11:54 +0400
    message:
      Merging from mysql-5.5
        ------------------------------------------------------------
        revno: 2875.338.11 [merge]
        committer: Alexander Barkov <alexander.barkov@oracle.com>
        branch nick: mysql-5.5.b13458237
        timestamp: Tue 2012-01-24 16:09:25 +0400
        message:
          Merging from mysql-5.5
            ------------------------------------------------------------
            revno: 2661.827.2 [merge]
            committer: Alexander Barkov <alexander.barkov@oracle.com>
            branch nick: mysql-5.1.b13458237
            timestamp: Tue 2012-01-24 16:02:12 +0400
            message:
              Merging from mysql-5.1
    ------------------------------------------------------------
    revno: 3402.50.66 [merge]
    committer: Alexander Barkov <alexander.barkov@oracle.com>
    branch nick: mysql-trunk.b13458237
    timestamp: Tue 2012-01-24 16:06:22 +0400
    message:
      Merging from mysql-trunk
        ------------------------------------------------------------
        revno: 3402.55.2
        committer: Bjorn Munch <bjorn.munch@oracle.com>
        branch nick: gcc41244-tr
        timestamp: Tue 2012-01-24 12:24:54 +0100
        message:
          Added some dummy initializations to keep gcc 4.1.2-44 silent about
            use of possibly uninitialized variabes.
          The logic ensured that these were not actually referenced except under
            conditions where they had also been initialized,
            but gcc could not determine that (or likely didn't even try)
          Without these, build breaks with -Werror
            using gcc 4.1.2-44 but works with 4.1.2-42
        ------------------------------------------------------------
        revno: 3402.55.1
        committer: Marko M?kel? <marko.makela@oracle.com>
        branch nick: mysql-trunk
        timestamp: Tue 2012-01-24 12:04:34 +0200
        message:
          Non-functional change: Make dfield_data_is_binary_equal() inline.
    ------------------------------------------------------------
    revno: 3402.50.65 [merge]
    committer: Alexander Barkov <alexander.barkov@oracle.com>
    branch nick: mysql-trunk.b13458237
    timestamp: Tue 2012-01-24 15:57:25 +0400
    message:
      Merging from 5.5, with additional 5.6 changes:
      
      Now LAST_DAY('YYYY-MM-DD') does not require non-zero DD value
      to return a non-NULL result.
        ------------------------------------------------------------
        revno: 2875.338.10 [merge]
        committer: Alexander Barkov <alexander.barkov@oracle.com>
        branch nick: mysql-5.5.b13458237
        timestamp: Tue 2012-01-24 13:24:05 +0400
        message:
          Merging BUG#13458237 from 5.1.
            ------------------------------------------------------------
            revno: 2661.827.1
            committer: Alexander Barkov <alexander.barkov@oracle.com>
            branch nick: mysql-5.1.b13458237
            timestamp: Tue 2012-01-24 13:00:13 +0400
            message:
              BUG#13458237 - INCONSISTENT HANDLING OF INVALIDE DATES WITH ZERO DAY. SIMILAR TO '2009-10-00' 
              - Reverting the patch for Bug # 12584302
                The patch will be reverted in 5.1 and 5.5.
                The patch will not be reverted in 5.6, the change will
                be properly documented in 5.6.
              - Backporting DBUG_ASSERT not to crash on '0000-01-00'
                (already fixed in mysql-trunk (5.6))
    ------------------------------------------------------------
    revno: 3402.50.64 [merge]
    committer: Nuno Carvalho <nuno.carvalho@oracle.com>
    branch nick: mysql-trunk
    timestamp: Mon 2012-01-23 17:23:06 +0000
    message:
      Automerge from mysql-5.5 into mysql-trunk.
        ------------------------------------------------------------
        revno: 2875.338.9
        committer: Nuno Carvalho <nuno.carvalho@oracle.com>
        branch nick: mysql-5.5
        timestamp: Mon 2012-01-23 16:50:54 +0000
        message:
          BUG#12364404 - UNDETERMINISTIC WAIT LOOP IN WAIT_FOR_NDB_TO_BINLOG.INC
          
          The wait_for_ndb_to_binlog.inc include file used by the blow rpl_tests
          common for rpl and rpl_ndb suite is simply doing a "sleep 5", this is
          not deterministic and wastes lot of test time uneccessarily. The test
          should be rewritten to check if the condition it wait for has been
          reached or not.
          
          For NDB engine all events will be added by NDB injector so tests only 
          can continue after injector is ready, this test waits for proper
          injector thread state.
    ------------------------------------------------------------
    revno: 3402.50.63
    committer: Vasil Dimov <vasil.dimov@oracle.com>
    branch nick: mysql-trunk
    timestamp: Mon 2012-01-23 16:18:42 +0200
    message:
      In fts_get_total_document_count() the stats of a table should have
      been initialized when the table was opened. This convert a conditional
      stats recalc (if not initialized) to an assert.
      
      Discussed with:	Jimmy (via IM)
    ------------------------------------------------------------
    revno: 3402.50.62
    committer: Vasil Dimov <vasil.dimov@oracle.com>
    branch nick: mysql-trunk
    timestamp: Mon 2012-01-23 16:09:29 +0200
    message:
      Non-functional change: whitespace fixups in printout messages
    ------------------------------------------------------------
    revno: 3402.50.61 [merge]
    committer: Manish Kumar<manish.4.kumar@oracle.com>
    branch nick: bug11757413
    timestamp: Mon 2012-01-23 17:43:28 +0530
    message:
      BUG#11752315 
      Null merge from mysql-5.5 to mysql-trunk.
        ------------------------------------------------------------
        revno: 2875.338.8
        committer: Manish Kumar<manish.4.kumar@oracle.com>
        branch nick: mysql-5.5
        timestamp: Mon 2012-01-23 17:39:37 +0530
        message:
          BUG#11752315 - 43460: STOP SLAVE UNABLE TO COMPLETE WHEN SLAVE THREAD IS TRYING TO RECONNECT TO
          
          Problem : The basic problem is the way the thread sleeps in mysql-5.5 and also in mysql-5.1
                    when we execute a stop slave on windows platform.
                    On windows platform if the stop slave is executed after the master dies, we have 
                    this long wait before the stop slave return a value. This is because there is a 
                    sleep of the thread. The sleep is uninterruptable in the two above version,
                    which was fixed by Davi patch for the BUG#11765860 for mysql-trunk. Backporting 
                    his patch for mysql-5.5 fixes the problem. 
          
          Solution : A new pair of mutex and condition variable is introduced to synchronize thread 
                     sleep and finalization. A new mutex is required because the slave threads are 
                     terminated while holding the slave thread locks (run_lock), which can not be 
                     relinquished during termination as this would affect the lock order.
    ------------------------------------------------------------
    revno: 3402.50.60
    committer: Raghav Kapoor <raghav.kapoor@oracle.com>
    branch nick: mysql-trunk-bug-13601606
    timestamp: Mon 2012-01-23 16:22:59 +0530
    message:
      BUG#13601606 - FAILED VIEW CREATION ERROR MESSAGE (FOR DB NOT PRESENT) 
                     NEEDS BIG IMPROVEMENT
      
      BACKGROUND:
      Trying to create a view in a non-existent database gave the 
      error "Can't create/write to file ..." which does not really 
      describe the reason for the failure and is also different 
      from how the similar problem is reported for CREATE TABLE. 
      
      FIX:
      This bug is fixed by reporting ER_BAD_DB_ERROR "Unknown 
      database ..." when trying to create a view in a non-existent
      database.This is the same error already reported by CREATE 
      TABLE. A test case has been written and corresponding result 
      file has been updated.
    ------------------------------------------------------------
    revno: 3402.50.59 [merge]
    committer: Alexander Barkov <alexander.barkov@oracle.com>
    branch nick: mysql-trunk.b11752408
    timestamp: Mon 2012-01-23 14:06:33 +0400
    message:
      Merging from mysql-trunk
        ------------------------------------------------------------
        revno: 3402.54.2
        committer: Vasil Dimov <vasil.dimov@oracle.com>
        branch nick: mysql-trunk
        timestamp: Mon 2012-01-23 11:38:29 +0200
        message:
          Non-functional change: remove outdated comment.
          
          This comment should have been removed by
          svn-v4:16c675df-0fcb-4bc9-8058-dcc011a37293:branches/innodb%2B:5998:
          
             /* In the Windows plugin, the return value of current_thd is
             undefined.  Map it to NULL. */
            -#if defined MYSQL_DYNAMIC_PLUGIN && defined __WIN__
            -# undef current_thd
            -# define current_thd NULL
            -# define EQ_CURRENT_THD(thd) TRUE
            -#else /* MYSQL_DYNAMIC_PLUGIN && __WIN__ */
            -# define EQ_CURRENT_THD(thd) ((thd) == current_thd)
            -#endif /* MYSQL_DYNAMIC_PLUGIN && __WIN__ */
            +
            +#define EQ_CURRENT_THD(thd) ((thd) == current_thd)
            +
        ------------------------------------------------------------
        revno: 3402.54.1
        committer: Vasil Dimov <vasil.dimov@oracle.com>
        branch nick: mysql-trunk
        timestamp: Fri 2012-01-20 10:32:09 +0200
        message:
          Non-functional change: extend error messages so they can be more useful
          if they ever get printed.
    ------------------------------------------------------------
    revno: 3402.50.58 [merge]
    committer: Alexander Barkov <alexander.barkov@oracle.com>
    branch nick: mysql-trunk.b11752408
    timestamp: Mon 2012-01-23 14:02:54 +0400
    message:
      Merging Bug#11752408 from mysql-5.5
        ------------------------------------------------------------
        revno: 2875.338.7 [merge]
        committer: Alexander Barkov <alexander.barkov@oracle.com>
        branch nick: mysql-5.5.b11752408v2
        timestamp: Mon 2012-01-23 13:23:50 +0400
        message:
          Merging Bug#11752408 from mysql-5.1
            ------------------------------------------------------------
            revno: 2661.825.12
            committer: Alexander Barkov <alexander.barkov@oracle.com>
            branch nick: mysql-5.1.b11752408
            timestamp: Mon 2012-01-23 13:07:10 +0400
            message:
              Bug#11752408 - 43593: DUMP/BACKUP/RESTORE/UPGRADE TOOLS FAILS BECAUSE OF UTF8_GENERAL_CI
              
              Introducing new collations:
              utf8_general_mysql500_ci and ucs2_general_mysql500_ci,
              to reproduce behaviour of utf8_general_ci and ucs2_general_ci
              from mysql-5.1.23 (and earlier).
              
              The collations are added to simplify upgrade from mysql-5.1.23 and earlier.
              
              Note: The patch does not make new server start over old data automatically.
              Some manual upgrade procedures are assumed.
              
              Paul: please get in touch with me to discuss upgrade procedures
              when documenting this bug.
              
              modified:
                include/m_ctype.h
                mysql-test/r/ctype_utf8.result
                mysql-test/t/ctype_utf8.test
                mysys/charset-def.c
                strings/ctype-ucs2.c
                strings/ctype-utf8.c
    ------------------------------------------------------------
    revno: 3402.50.57
    committer: Andrei Elkin <andrei.elkin@oracle.com>
    branch nick: trunk-bug3593869-64035
    timestamp: Sun 2012-01-22 19:00:21 +0200
    message:
      merging the final part of post-fixes from 5.5 bug13593869-64035 branch.
    ------------------------------------------------------------
    revno: 3402.50.56
    committer: Sunny Bains <Sunny.Bains@Oracle.Com>
    branch nick: trunk
    timestamp: Sat 2012-01-21 09:00:27 +0530
    message:
      Remove extra new line.
    ------------------------------------------------------------
    revno: 3402.50.55
    committer: Mattias Jonsson <mattias.jonsson@oracle.com>
    branch nick: topush-trunk
    timestamp: Sat 2012-01-21 01:47:05 +0100
    message:
      post-push fix of Bug#13559657.
      
      main.partition_explicit_prune fails on embedded builds
      due to different default engine (MyISAM instead of InnoDB).
      
      Fixed by setting the engine to InnoDB.
    ------------------------------------------------------------
    revno: 3402.50.54
    committer: Christopher Powers <chris.powers@oracle.com>
    branch nick: mysql-trunk-bug13440472
    timestamp: Fri 2012-01-20 13:32:00 -0600
    message:
      Bug#13440472 - MANY VALGRIND FAILURES ON DAILY-TRUNK
        
      Disable inline optimizations for valgrind builds to avoid false positives.
    ------------------------------------------------------------
    revno: 3402.50.53 [merge]
    committer: Inaam Rana <inaam.rana@oracle.com>
    branch nick: mysql-trunk
    timestamp: Fri 2012-01-20 10:51:33 -0500
    message:
      merge from mysql-5.5
        ------------------------------------------------------------
        revno: 2875.338.6
        committer: Inaam Rana <inaam.rana@oracle.com>
        branch nick: mysql-5.5
        timestamp: Fri 2012-01-20 10:47:01 -0500
        message:
          Bug#13612811	VALGRIND ERROR IN OS_AIO_INIT
          
          Fix valgrind warning introduced by fix for bug 11765450.
    ------------------------------------------------------------
    revno: 3402.50.52 [merge]
    committer: Mattias Jonsson <mattias.jonsson@oracle.com>
    branch nick: topush-trunk
    timestamp: Fri 2012-01-20 15:44:16 +0100
    message:
      merge of bug#13559657 into -trunk
      
      Also updated two result files.
        ------------------------------------------------------------
        revno: 3402.53.1
        committer: Mattias Jonsson <mattias.jonsson@oracle.com>
        branch nick: b13559657-t
        timestamp: Fri 2012-01-06 13:21:27 +0100
        message:
          Bug#13559657: PARTITION SELECTION DOES NOT WORK WITH VIEWS
          
          The problem was that the partitioning clause for the table
          was not printed from the TABLE_LIST.
          
          Added print of PARTITION (<part list>) after the table,
          if given.
    ------------------------------------------------------------
    revno: 3402.50.51 [merge]
    committer: Mattias Jonsson <mattias.jonsson@oracle.com>
    branch nick: topush-trunk
    timestamp: Fri 2012-01-20 14:24:46 +0100
    message:
      merge
        ------------------------------------------------------------
        revno: 2875.338.5
        committer: Mattias Jonsson <mattias.jonsson@oracle.com>
        branch nick: topush-5.5
        timestamp: Fri 2012-01-20 14:19:39 +0100
        message:
          Bug#13500478 63623: TEST CASE PARTITION_BINLOG_STMT
          CREATES A FILE IN AN IMPROPER LOCATION.
          
          Fixed by using $MYSQLTEST_VARDIR, as proposed by
          Davi Arnaut.
          
          Thank you Davi!
    ------------------------------------------------------------
    revno: 3402.50.50 [merge]
    committer: Georgi Kodinov <Georgi.Kodinov@Oracle.com>
    branch nick: fix-trunk
    timestamp: Fri 2012-01-20 13:37:42 +0200
    message:
      merge
        ------------------------------------------------------------
        revno: 2875.338.4
        committer: Georgi Kodinov <Georgi.Kodinov@Oracle.com>
        branch nick: fix-5.5
        timestamp: Fri 2012-01-20 13:35:48 +0200
        message:
          Addendum to the fix for bug #11754014
          
          - Fixed the checks to properly check for plugin_dir containing a trailing slash or backslash.
          - Fixed a under-configuration in udf_skip_grants that was preventing the test 
            from running even when there was a udf plugin.
    ------------------------------------------------------------
    revno: 3402.50.49 [merge]
    committer: Dmitry Shulga <Dmitry.Shulga@oracle.com>
    branch nick: mysql-trunk-bug13070308
    timestamp: Fri 2012-01-20 16:07:05 +0600
    message:
      Auto-merge of patch for bug#13070308 from mysql-5.5 tree.
        ------------------------------------------------------------
        revno: 2875.338.3
        committer: Dmitry Shulga <Dmitry.Shulga@oracle.com>
        branch nick: mysql-5.5-bug13070308
        timestamp: Fri 2012-01-20 16:03:39 +0600
        message:
          Patch for bug#13070308 - VALGRIND failure in XA test.
          
          The issue is that xa.test failed sporadically on some platforms.
          The reason for the test failure is a race condition in xa.test.
          The race condition occures between connection that executes statement
          INSERT INTO t2 SELECT FROM t1 and other connection that tries to run
          statements DELETE FROM t1 and COMMIT. If COMMIT statement had been executed
          before the statement INSERT INTO t2 SELECT FROM t1 was locked by lock
          on table t1 (as a result of query from table t1) then the INSERT statement
          is executed successfully and a following test for deadlock would failed.
          
          This patch fixes this race condition by moving COMMIT statement after commit
          of distributed transaction from concurrent session.
    ------------------------------------------------------------
    revno: 3402.50.48
    committer: Vasil Dimov <vasil.dimov@oracle.com>
    branch nick: mysql-trunk
    timestamp: Wed 2012-01-18 15:29:45 +0200
    message:
      Revert sunny.bains@oracle.com-20111103014755-9zzp2oscgvem35th
      
      The asm code that was introduced in that revision causes a crash in
      ut_cpuid() when that function is not inlined, e.g. compiled with an
      attribute ``__attribute__((noinline))'' or with gcc's -fno-inline.
      The crash only happens on some 64 bit platforms, fimafeng09.no.oracle.com
      for example.
      
      It is not clear what sunny.bains@oracle.com-20111103014755-9zzp2oscgvem35th
      was trying to address, but the old code (before that changeset) does pass all
      tests currently.
      
      Should any problems arise later (the ones that the reverted changeset was
      addressing) and if they are due to C vs. C++ difference we could add
      ``extern "C"'' to the function ut_cpuid().
      
      Discussed with:	Marko and Sunny (via IM)
    ------------------------------------------------------------
    revno: 3402.50.47 [merge]
    committer: Nuno Carvalho <nuno.carvalho@oracle.com>
    branch nick: mysql-trunk
    timestamp: Thu 2012-01-19 20:03:07 +0000
    message:
      Merge from mysql-5.5 into mysql-trunk.
      
      Conflicts:
       mysql-test/include/show_slave_status.inc
        ------------------------------------------------------------
        revno: 2875.338.2
        committer: Nuno Carvalho <nuno.carvalho@oracle.com>
        branch nick: mysql-5.5
        timestamp: Thu 2012-01-19 16:56:43 +0000
        message:
          BUG#13050593 - BACKSLASH SWALLOWED BY INCLUDE/SHOW_SLAVE_STATUS.INC
          
          If an error message contains '\' backslash it is displayed correctly
          through show-slave-status or
          query_get_value(SHOW SLAVE STATUS, Last_IO_Error, 1);. But when
          SELECT REPLACE(...) is applied backslash is escaped resulting in a
          different test output.
          
          Disabled backslash escape on show_slave_status.inc and replaced '\' for
          '/' using replace_regex function in order to achieve the same test
          output when different path separators are used.
    ------------------------------------------------------------
    revno: 3402.50.46 [merge]
    committer: Andrei Elkin <andrei.elkin@oracle.com>
    branch nick: trunk-bug3593869-64035
    timestamp: Thu 2012-01-19 18:01:56 +0200
    message:
      merging from repo.
        ------------------------------------------------------------
        revno: 3402.52.1 [merge]
        committer: Inaam Rana <inaam.rana@oracle.com>
        branch nick: mysql-trunk
        timestamp: Thu 2012-01-19 09:15:22 -0500
        message:
          merge from 5.5
            ------------------------------------------------------------
            revno: 2875.338.1
            committer: Inaam Rana <inaam.rana@oracle.com>
            branch nick: mysql-5.5
            timestamp: Thu 2012-01-19 09:10:30 -0500
            message:
              Bug#11765450 58421: INNODB TEMPORARY TABLE CRASH WHEN TMPDIR ON LINUX TMPFS
              
              rb://898
              approved by: Marko Makela
              
              On some kernel versions native aio operations are not supported on
              tmpfs. Check this during start up and fall back to simulated aio.
    ------------------------------------------------------------
    revno: 3402.50.45 [merge]
    committer: Andrei Elkin <andrei.elkin@oracle.com>
    branch nick: trunk-bug3593869-64035
    timestamp: Thu 2012-01-19 17:55:36 +0200
    message:
      merge from 5.5.
        ------------------------------------------------------------
        revno: 2875.337.3
        committer: Andrei Elkin <andrei.elkin@oracle.com>
        branch nick: 5.5-bug3593869-64035-MYSQL_BINLOG_SEND-CRASH
        timestamp: Thu 2012-01-19 16:44:09 +0200
        message:
          bug#3593869-64035
          
          A follow-up patch corrects max sizes of printed strings and changes llstr() to %lld.
          Credits go to Davi who provided a great feedback.
    ------------------------------------------------------------
    revno: 3402.50.44
    committer: Jimmy Yang <jimmy.yang@oracle.com>
    branch nick: trunk2
    timestamp: Thu 2012-01-19 18:34:18 +0800
    message:
      Fix Bug #13552359, SOME INFORMATION SCHEMA TABLE FOR FTS SHOULD RESTRICT
      ACCESSIBILIY TO SUPER USER
      
      rb://881 Approved by Inaam
    ------------------------------------------------------------
    revno: 3402.50.43
    committer: Norvald H. Ryeng <norvald.ryeng@oracle.com>
    branch nick: mysql-trunk-13500371
    timestamp: Thu 2012-01-19 08:41:28 +0100
    message:
      Bug#13500371 63704: CONVERSION OF '1.' TO A NUMBER GIVES ERROR 1265
      (WARN_DATA_TRUNCATED)
      
      Problem: Converting strings ending with a decimal point (such as '1.')
      to floating point numbers causes a truncation warning to be emitted.
      
      Field_float::store() and Field_double::store() calls my_strtod_int()
      to convert strings to floating point numbers. Function my_strtod_int()
      doesn't consume the decimal point if it is the last character of the
      string, and this leads to Field_float::store() and
      Field_double::store() reporting unconsumed character as truncated
      data.
      
      Fix: Let my_strtod_int() consume the decimal point also if it is the
      last character of the string. This behavior is consistent with that of
      scanf().
    ------------------------------------------------------------
    revno: 3402.50.42
    committer: kevin.lewis@oracle.com
    branch nick: mysql-trunk
    timestamp: Wed 2012-01-18 14:18:14 -0600
    message:
      Fix a UNIV_DEBUG compile error.
    ------------------------------------------------------------
    revno: 3402.50.41
    committer: kevin.lewis@oracle.com
    branch nick: mysql-trunk
    timestamp: Wed 2012-01-18 09:39:14 -0600
    message:
      The primary change is to use macro constants for system table field
      and column numbers more consistently.  The code uses hard coded
      numbers for both column numbers and cluster index field numbers.
      Contants are used very inconsistently.  This patch uses the
      convention DICT_COL__{table_name}__{column_name) for the columns
      of the table and of DICT_FLD__{table_name}__{column_name) for the
      field numbers in the indexes.  Instead of using precompiled macros,
      these constants are declared as enum values which the debugger can
      interpret.  The preprocessor macros that tested the consistency of
      these constants are converted to debug runtime asserts.
      
      Some included files are deleted from ha_innodb.cc since they no
      longer need to be included directly.  All other changes are just
      code cleanup.
      
      Patch approved by Marko in http://bur03.no.oracle.com/rb/r/877.
    ------------------------------------------------------------
    revno: 3402.50.40
    committer: Tor Didriksen <tor.didriksen@oracle.com>
    branch nick: trunk-bug13580775filesort
    timestamp: Wed 2012-01-18 14:03:10 +0100
    message:
      Bug#13580775 ASSERTION FAILED: RECORD_LENGTH == M_RECORD_LENGTH
      
      filesort tries to re-use the sort buffer between invocations in order to save
      malloc/free overhead.
      The fix for Bug 11748783 - 37359: FILESORT CAN BE MORE EFFICIENT.
      added an assert that buffer properties (num_records, record_length) are
      consistent between invocations. Indeed, they are not necessarily consistent.
      
      Fix: re-allocate the sort buffer if properties change.
    ------------------------------------------------------------
    revno: 3402.50.39
    committer: Praveenkumar Hulakund <praveenkumar.hulakund@oracle.com>
    branch nick: trunk-new
    timestamp: Wed 2012-01-18 10:03:08 +0530
    message:
      BUG#11764724 - 57586: UNKNOWN TABLE WHEN TRYING TO DROP A TABLE AND NO AVAILABLE UNDO 
      SLOTS LEFT
      
      Modified changes made as part of fix for this bug to  fix Perf regression.
      FIX for perf regression:
      -------------------------------
      Current fix had a if condition to check whether return value of function "ha_delete_table"
      is "HA_ERR_TOO_MANY_CONCURRENT_TRXS". If yes then I used to "goto err" and in "err:" check
      whether error is "HA_ERR_TOO_MANY_CONCURRENT_TRXS" and print error message. So there were 
      TWO if conditions added to check whether error is "HA_ERR_TOO_MANY_CONCURRENT_TRXS" or not.
      These conditions were getting evaluated every time, this caused perf regression.
      
      As a fix, removed both the if conditions and added only one if condition in "if (error)" block.
      This condition is added to check whether error is "HA_ERR_TOO_MANY_CONCURRENT_TRXS". If yes 
      then print error and then "goto err". Now, this condition is checked only if there is any error.
      Otherwise it will not be evaluated and so performance should not be affected.
      
      Actual Issue Description:
      -------------------------------
      If you attempt to drop an existing InnoDB table, but you do not have any 
      available undo slots open, then you will receive an "unknown table" error. 
      
      mysql> DROP TABLE test.innodb_table_monitor; 
      ERROR 1051 (42S02): Unknown table 'innodb_table_monitor' 
      
      Actual issue Analysis:
      -------------------------------
      Here, max number of concurrent transactions/connections are started and then the
      next transaction to drop a table is initiated. Since, system has already max number
      of transactions running, next transaction to "drop table" was not started and innodb
      returned error "DB_TOO_MANY_CONCURRENT_TRXS". But this error was not handled properly 
      in sql layer because of which "drop table" operation was throwing wrong error message. 
      
      Fix:
      -------------------------------
      As a fix, I have added check in sql (in function "mysql_rm_table_part2") to handle error 
      code "HA_ERR_TOO_MANY_CONCURRENT_TRXS" and throw proper error message.
      
      Ouput of drop command after fix (with max number of concurrent transaction running)
      
      mysql> drop table test;
      ERROR 177 (HY000): Too many active concurrent transactions
    ------------------------------------------------------------
    revno: 3402.50.38 [merge]
    committer: Andrei Elkin <andrei.elkin@oracle.com>
    branch nick: trunk-bug3593869-64035
    timestamp: Wed 2012-01-18 00:37:43 +0200
    message:
      merging from local branch to mysql-trunk.
        ------------------------------------------------------------
        revno: 2875.337.2 [merge]
        committer: Andrei Elkin <andrei.elkin@oracle.com>
        branch nick: 5.5-bug3593869-64035-MYSQL_BINLOG_SEND-CRASH
        timestamp: Wed 2012-01-18 00:35:53 +0200
        message:
          merging from the 5.5 repo to local branch.
    ------------------------------------------------------------
    revno: 3402.50.37 [merge]
    committer: Andrei Elkin <andrei.elkin@oracle.com>
    branch nick: trunk-bug3593869-64035
    timestamp: Wed 2012-01-18 00:32:29 +0200
    message:
      manual merge due to bug3593869-64035 from 5.5 to mysql-trunk.
        ------------------------------------------------------------
        revno: 2875.337.1
        committer: Andrei Elkin <andrei.elkin@oracle.com>
        branch nick: 5.5-bug3593869-64035-MYSQL_BINLOG_SEND-CRASH
        timestamp: Wed 2012-01-18 00:16:19 +0200
        message:
          BUG#13593869 - 64035: SEVERAL ERRORS IN COM_BINLOG_DUMP/MYSQL_BINLOG_SEND CRASH THE SERVER
          
          The server crashes when receiving a COM_BINLOG_DUMP command with a position of 0 or
          larger than the file size.
          The execution proceeds to an error block having the last read replication coordinates 
          pointer be NULL and its dereferencing crashed the server.
          
          Fixed with making "public" previously used only for heartbeat coordinates.
    ------------------------------------------------------------
    revno: 3402.50.36 [merge]
    committer: Tor Didriksen <tor.didriksen@oracle.com>
    branch nick: trunk-merge
    timestamp: Tue 2012-01-17 16:43:31 +0100
    message:
      merge opt-team => trunk
        ------------------------------------------------------------
        revno: 2876.249.474 [merge]
        committer: Tor Didriksen <tor.didriksen@oracle.com>
        branch nick: next-mr-opt-team
        timestamp: Tue 2012-01-17 12:35:06 +0100
        message:
          merge opt-backporting => opt-team
            ------------------------------------------------------------
            revno: 2876.475.33
            committer: Guilhem Bichot <guilhem.bichot@oracle.com>
            branch nick: semijoin_ls
            timestamp: Tue 2012-01-17 10:45:08 +0100
            message:
              Additional fix for
              Bug #13591138 	ASSERTION NAME && !IS_AUTOGENERATED_NAME IN ITEM::PRINT_FOR_ORDER ON EXPLAIN EXT
              this time the bug was in subqueries.
        ------------------------------------------------------------
        revno: 2876.249.473 [merge]
        committer: Tor Didriksen <tor.didriksen@oracle.com>
        branch nick: next-mr-opt-team
        timestamp: Tue 2012-01-17 10:27:34 +0100
        message:
          NULL merge opt-backporting => opt-team
            ------------------------------------------------------------
            revno: 2876.475.32 [merge]
            committer: Tor Didriksen <tor.didriksen@oracle.com>
            branch nick: next-mr-opt-backporting
            timestamp: Tue 2012-01-17 09:12:40 +0100
            message:
              NULL merge trunk => opt-backporting
        ------------------------------------------------------------
        revno: 2876.249.472 [merge]
        committer: Tor Didriksen <tor.didriksen@oracle.com>
        branch nick: next-mr-opt-team
        timestamp: Tue 2012-01-17 10:01:07 +0100
        message:
          empty merge opt-backporting => opt-team
            ------------------------------------------------------------
            revno: 2876.475.31 [merge]
            committer: Tor Didriksen <tor.didriksen@oracle.com>
            branch nick: next-mr-opt-backporting
            timestamp: Tue 2012-01-17 09:09:05 +0100
            message:
              merge trunk => opt-backporting
        ------------------------------------------------------------
        revno: 2876.249.471 [merge]
        committer: Tor Didriksen <tor.didriksen@oracle.com>
        branch nick: next-mr-opt-team
        timestamp: Tue 2012-01-17 09:59:03 +0100
        message:
          Merge opt-backporting => opt-team
            ------------------------------------------------------------
            revno: 2876.475.30
            committer: Guilhem Bichot <guilhem.bichot@oracle.com>
            branch nick: semijoin_ls
            timestamp: Mon 2012-01-16 15:26:28 +0100
            message:
              Fix for Bug#13591138 - ASSERTION NAME && !IS_AUTOGENERATED_NAME IN ITEM::PRINT_FOR_ORDER ON EXPLAIN EXT
              We didn't set is_autogenerated_name correctly for Item_direct_view_ref.
            ------------------------------------------------------------
            revno: 2876.475.29
            committer: Roy Lyseng <roy.lyseng@oracle.com>
            branch nick: mysql-sb5
            timestamp: Mon 2012-01-16 15:00:28 +0100
            message:
              Bug#13591383: Assertion !(*tab->on_expr_ref && .. && is_expensive()) ...
              
              Regression after bugfix for bug#13552968.
              This bugfix added an assertion that made sure that we did not have an
              "expensive" condition on a const table with one row that was outer
              joined. However, it also fired in the case of an empty outer joined table.
              Note that this problem occurs with materialized (expensive) subqueries
              but not with subqueries transformed into semi-joins and not with
              "regular" subqueries.
              
              mysql-test/include/subquery_mat.inc
                Added test case for bug#13591383.
              
              mysql-test/r/subquery_mat.result
              mysql-test/r/subquery_mat_all.result
              mysql-test/r/subquery_mat_none.result
                Added test case results for bug#13591383.
              
              sql/sql_executor.cc
                Modified debug assert to ensure that it does not fire when the
                outer-joined table is empty.
              
              sql/sql_executor.cc
                Added a grep tag.
            ------------------------------------------------------------
            revno: 2876.475.28
            committer: Guilhem Bichot <guilhem.bichot@oracle.com>
            branch nick: semijoin_ls
            timestamp: Mon 2012-01-16 13:51:06 +0100
            message:
              Fix for Bug #13589848 "MISSING ROW ON SELECT WITH NESTED IN CLAUSES WHEN LOOSESCAN=ON"
              Forgot to reset some state variable.
        ------------------------------------------------------------
        revno: 2876.249.470 [merge]
        committer: Tor Didriksen <tor.didriksen@oracle.com>
        branch nick: next-mr-opt-team
        timestamp: Fri 2012-01-13 14:50:43 +0100
        message:
          merge trunk => opt-team
    ------------------------------------------------------------
    revno: 3402.50.35
    committer: Norvald H. Ryeng <norvald.ryeng@oracle.com>
    branch nick: mysql-trunk-11764371
    timestamp: Tue 2012-01-17 15:44:49 +0100
    message:
      Bug#11764371 57196: MORE FUN WITH ASSERTION: !TABLE->FILE ||
      TABLE->FILE->INITED == HANDLER::
      
      Problem: An assertion is triggered by queries that assign the result
      of a subquery to a user variable when the outer query is doing
      DISTINCT and GROUP BY.
      
      Because of the DISTINCT and GROUP BY, the query is executed using two
      temporary tables. The first temporary table is filled by executing the
      query over the base tables. The subquery is also executed, and the
      result is stored in the user variable. After this execution,
      join_free() is called to free data from the old join and release all
      read locks since the next execution is based on the temporary table.
      
      The second round of execution is over the first temporary table, but
      because of the user variable assignment, the subquery is re-executed
      over the base tables. Since these tables are now unlocked, an
      assertion guarding handler::ha_rnd_next() against reading from
      unlocked tables is triggered.
      
      Fix: In change_to_use_tmp_field(), if the item is an
      Item_func_set_user_var that stores the value of a subquery, replace it
      with a cloned Item_func_set_user_var that stores the result of an
      Item_field that contains the result of the subquery. This makes the
      next execution round use the stored value instead of re-executing the
      subquery.
      
      This patch also fixes bug #13260504. No additional testcase required.
    ------------------------------------------------------------
    revno: 3402.50.34
    committer: Vasil Dimov <vasil.dimov@oracle.com>
    branch nick: mysql-trunk
    timestamp: Tue 2012-01-17 15:18:08 +0200
    message:
      Adjust mtr .result files after
      vasil.dimov@oracle.com-20120117090419-4sjlh72v00w0chv4
    ------------------------------------------------------------
    revno: 3402.50.33 [merge]
    committer: Georgi Kodinov <Georgi.Kodinov@Oracle.com>
    branch nick: B11761530-trunk
    timestamp: Tue 2012-01-17 14:59:29 +0200
    message:
      merge
        ------------------------------------------------------------
        revno: 3402.51.2
        committer: Vasil Dimov <vasil.dimov@oracle.com>
        branch nick: mysql-trunk
        timestamp: Tue 2012-01-17 11:04:19 +0200
        message:
          Fix Bug#13432465 "INNODB: IGNORING STRANGE ROW FROM MYSQL.INNODB_INDEX_STATS"
          IN MYSQLD ERROR LOG
          
          There are two problems related to this bug report:
          
          1. InnoDB persistent storage tables mysql.innodb_table_stats and
          mysql.innodb_index_stats have been working case-insensitively until now wrt
          their contents (and we store table and index names in VARCHAR() columns in
          those tables) because they are created with options
          "ENGINE=INNODB DEFAULT CHARSET=utf8" while it should be
          "ENGINE=INNODB DEFAULT CHARSET=utf8 COLLATE=utf8_bin"
          in order to be case-sensitive.
          
          Due to this, rows for table 'A' from innodb_index_stats could have been
          picked while searching for stats for table 'a'.
          
          2. In index name comparison we used the length of the value found in
          innodb_index_stats and thus could have picked "c1" as a value for an index
          named "c10".
          
          The solution is to add COLLATE=utf8_bin to tables' create definitions and
          to also compare lengths in addition to using strncmp().
          
          This patch also touches 3 other places where strncmp/strncasecmp is used -
          we could have picked a row from innodb_index_stats where stat_name='siz'
          when searching for a row where stat_name='size'.
          
          Reviewed by:	Marko (via IM/email)
        ------------------------------------------------------------
        revno: 3402.51.1
        committer: Alexander Barkov <alexander.barkov@oracle.com>
        branch nick: mysql-trunk.b13545236
        timestamp: Tue 2012-01-17 12:23:57 +0400
        message:
          BUG#13545236 - ASSERT IN SEC_SINCE_EPOCH
          
          Problem:
          WL#946 introduced a new methid Item_cache_datetime::get_date().
          It did not execute check_date(), so in some cases it started
          to return non-NULL result when instead of expected NULL.
          
          Before WL#946 the generic Item::get_date() was used,
          which executes check_date() inside str_to_datetime_with_warn().
          
          Fix:
          adding check_date() in the new method, to reproduce the pre-WL#946 behaviour.
          
          modified:
                mysql-test/r/func_time.result
                mysql-test/t/func_time.test
                sql/item.cc
    ------------------------------------------------------------
    revno: 3402.50.32 [merge]
    committer: Georgi Kodinov <Georgi.Kodinov@Oracle.com>
    branch nick: B11761530-trunk
    timestamp: Tue 2012-01-17 11:39:54 +0200
    message:
      merge mysql-5.5->mysql-trunk
        ------------------------------------------------------------
        revno: 2875.334.19 [merge]
        committer: Georgi Kodinov <Georgi.Kodinov@Oracle.com>
        branch nick: B11761530-5.5
        timestamp: Tue 2012-01-17 11:38:34 +0200
        message:
          merged bug #11754014
            ------------------------------------------------------------
            revno: 2875.336.1
            committer: Georgi Kodinov <Georgi.Kodinov@Oracle.com>
            branch nick: B11754014-5.5-unix
            timestamp: Mon 2012-01-16 12:04:28 +0200
            message:
              Bug #11754014: 45549: udf plugin_dir path separator inconsistency 
                and cryptic error 1126 message
              
              The problem was that dlopen() related code was using just a subset 
              of the path normalization routines used in other places.
              Fixed the expansion of the pre-dlopen() behavior for plugins and UDFs
              to use a platform-dependent consistent encoding of the paths.
              Fixed the error dlopen() error handling to take the correct error message
              and strip off the trailing newline character(s).
              Fixed tests to do a platform independent replace of directories and to 
              account for the traling slash.
        ------------------------------------------------------------
        revno: 2875.334.18
        committer: Georgi Kodinov <Georgi.Kodinov@Oracle.com>
        branch nick: B11761530-5.5
        timestamp: Thu 2011-11-10 15:46:51 +0200
        message:
          Bug #11761530: 54035: MSYQLD_SAFE BEHAVIOUR CONSUMES TOO MUCH CPU IF IT IS UNABLE TO RESTART MY
          
          Added a trottling mechanism to mysqld_safe.
          On every 5 sub-second restarts it will wait for a second before attempting again.
          Note that this requires 'sleep' and 'date' command line utilities.
          The code would adjust and will do nothing if any of them is not present.
    ------------------------------------------------------------
    revno: 3402.50.31 [merge]
    committer: Nirbhay Choubey <nirbhay.choubey@oracle.com>
    branch nick: mysql-trunk
    timestamp: Tue 2012-01-17 09:24:44 +0530
    message:
      Null-merge from mysql-5.5.
        ------------------------------------------------------------
        revno: 2875.334.17 [merge]
        committer: Nirbhay Choubey <nirbhay.choubey@oracle.com>
        branch nick: mysql-5.5
        timestamp: Tue 2012-01-17 09:22:51 +0530
        message:
          Null-merge from mysql-5.1.
            ------------------------------------------------------------
            revno: 2661.825.11
            committer: Nirbhay Choubey <nirbhay.choubey@oracle.com>
            branch nick: mysql-5.1
            timestamp: Tue 2012-01-17 09:10:58 +0530
            message:
              Bug #11760384 52792: MYSQLDUMP IN XML MODE DOES NOT
                                   DUMP ROUTINES
              
              Minor post-fix to avoid build failure when built with
              Werror.
    ------------------------------------------------------------
    revno: 3402.50.30
    committer: Nirbhay Choubey <nirbhay.choubey@oracle.com>
    branch nick: B13006947-trunk
    timestamp: Tue 2012-01-17 08:55:57 +0530
    message:
      Bug#13006947 62472: MYSQLHOTCOPY ERRORS ON DATABASES
                          CONTAINING MYISAM VIEWS
      
      mysqlhotcopy failed when 'views' were involved. This
      happened as it tried to lock the views (along with the
      base tables) using 'FLUSH TABLES <table_name> .. WITH
      READ LOCK' command, which is invalid.
      
      Fixed by dividing the table list into views & base tables,
      and then locking the views separately.
    ------------------------------------------------------------
    revno: 3402.50.29 [merge]
    committer: Marko M?kel? <marko.makela@oracle.com>
    branch nick: mysql-trunk
    timestamp: Mon 2012-01-16 17:11:39 +0200
    message:
      Merge mysql-5.5 to mysql-trunk.
        ------------------------------------------------------------
        revno: 2875.334.16
        committer: Marko M?kel? <marko.makela@oracle.com>
        branch nick: mysql-5.5
        timestamp: Mon 2012-01-16 16:39:05 +0200
        message:
          Add missing sys_vars tests for InnoDB variables.
    ------------------------------------------------------------
    revno: 3402.50.28 [merge]
    committer: Marko M?kel? <marko.makela@oracle.com>
    branch nick: mysql-trunk
    timestamp: Mon 2012-01-16 14:30:58 +0200
    message:
      Merge mysql-5.5 to mysql-trunk.
        ------------------------------------------------------------
        revno: 2875.334.15 [merge]
        committer: Marko M?kel? <marko.makela@oracle.com>
        branch nick: mysql-5.5
        timestamp: Mon 2012-01-16 14:26:42 +0200
        message:
          Merge mysql-5.1 to mysql-5.5.
            ------------------------------------------------------------
            revno: 2661.825.10
            committer: Marko M?kel? <marko.makela@oracle.com>
            branch nick: mysql-5.1
            timestamp: Mon 2012-01-16 14:22:03 +0200
            message:
              Bug#13496818 ASSERTION: REC_PAGE_NO > 4 IN IBUF CONTRACTION
              Relax a bogus debug assertion.
              Approved by Jimmy Yang on IM.
    ------------------------------------------------------------
    revno: 3402.50.27 [merge]
    committer: Tor Didriksen <tor.didriksen@oracle.com>
    branch nick: trunk-merge
    timestamp: Mon 2012-01-16 12:41:54 +0100
    message:
      merge 5.5 => trunk
        ------------------------------------------------------------
        revno: 2875.334.14
        committer: Tor Didriksen <tor.didriksen@oracle.com>
        branch nick: 5.5
        timestamp: Mon 2012-01-16 12:39:12 +0100
        message:
          Bug#13551687 CMAKE GENERATED PROJECT FILES ALWAYS HAVE THE SAME NAME IN VISUAL STUDIO
          
          Add option to set project name for Mac/Windows.
    ------------------------------------------------------------
    revno: 3402.50.26 [merge]
    committer: Nuno Carvalho <nuno.carvalho@oracle.com>
    branch nick: mysql-trunk
    timestamp: Mon 2012-01-16 10:15:36 +0000
    message:
      Automerge from mysql-5.5 to mysql-trunk.
        ------------------------------------------------------------
        revno: 2875.334.13 [merge]
        committer: Nuno Carvalho <nuno.carvalho@oracle.com>
        branch nick: mysql-5.5
        timestamp: Mon 2012-01-16 10:02:29 +0000
        message:
          Automerge from mysql-5.1 to mysql-5.5.
            ------------------------------------------------------------
            revno: 2661.825.9
            committer: Nuno Carvalho <nuno.carvalho@oracle.com>
            branch nick: mysql-5.1
            timestamp: Mon 2012-01-16 09:17:40 +0000
            message:
              BUG#11893288 60542: RPL.RPL_EXTRA_COL_MASTER_* DOESN'T TEST WHAT WAS INTENDED
              
              Test extra/rpl_tests/rpl_extra_col_master.test (used by
              rpl_extra_col_master_*) ends with the active connection pointing to the
              slave. Thus, the two last tests never succeed in changing the binlog
              format of the master away from 'row'. With correct active connection
              (master) tests fail for binlog 'statement' and 'mixed' formats.
              
              Tests rpl_extra_col_master_* only run when binary log format is
              row.  Statement and mix replication do not make sense in this
              tests since it will try to execute statements on columns that do
              not exist.  This fix is basically a backport from mysql-5.5, see
              changes done as part of BUG 39934.
    ------------------------------------------------------------
    revno: 3402.50.25
    committer: Norvald H. Ryeng <norvald.ryeng@oracle.com>
    branch nick: mysql-trunk-11766143
    timestamp: Mon 2012-01-16 10:01:53 +0100
    message:
      Bug#11766143 59185: ASSERTION FAILED: (FIXED == 1), FILE
      ITEM_STRFUNC.CC, LINE 2760
      
      Problem: The server crashes when a subquery that is involved in a
      comparison requiring a character set conversion causes an error.
      
      During optimization, predicates are combined into multiple equality
      predicates by a call to optimize_cond(). As part of this,
      Item_equal::compare_const() is called to evaluate the comparison. Part
      of this evaluation is to set the comparison function by a call to
      Item_func_eq::set_cmp_func(), which calls
      Arg_comparator::set_cmp_func(). Since the character sets of the two
      arguments differ, it needs to call agg_item_set_converter() to set up
      a conversion. There, a new Item_func_conv_charset is constructed, and
      the constructor calls val_str() on its argument (the subquery). The
      subquery is evaluated and stores an error in the diagnostics
      area.
      
      Later, agg_item_set_converter() calls fix_fields() on the character
      set converter. Item_func::fix_fields() checks for thd->is_error() and
      misinterprets the error as if it occurred in
      Item_func::fix_length_and_dec(). This error is propagated by return
      values back to Arg_comparator::set_cmp_func(), which therefore skips
      setting the func attribute of the comparator.
      
      After the error occurs, Item_equal::compare_const() does not do any
      error checking before calling Item_func_eq::val_int(), where the crash
      occurs when Arg_comparator::compare() tries to call the function
      pointed to by the func attribute, which is a null pointer.
      
      Fix: Skip the call to Item_func_eq::val_int() in
      Item_equal::compare_const() if an error has been stored in the
      diagnostics area. The diagnostics area is checked and the error is
      caught in JOIN::optimize() right after the call to optimize_cond()
      returns.
      
      This patch also fixes bug #11765734.
    ------------------------------------------------------------
    revno: 3402.50.24 [merge]
    committer: Marko M?kel? <marko.makela@oracle.com>
    branch nick: mysql-trunk
    timestamp: Mon 2012-01-16 10:15:20 +0200
    message:
      Merge mysql-5.5 to mysql-trunk.
        ------------------------------------------------------------
        revno: 2875.334.12 [merge]
        committer: Marko M?kel? <marko.makela@oracle.com>
        branch nick: mysql-5.5
        timestamp: Mon 2012-01-16 09:58:02 +0200
        message:
          Merge mysql-5.1 to mysql-5.5.
            ------------------------------------------------------------
            revno: 2661.825.8
            committer: Marko M?kel? <marko.makela@oracle.com>
            branch nick: mysql-5.1
            timestamp: Mon 2012-01-16 09:55:12 +0200
            message:
              buf_page_get_known_nowait(): Relax a bogus debug assertion.
              When mode==BUF_KEEP_OLD, buffered inserts are being merged to the page.
              It is possible that a read request for a page was pending while the page
              was freed in DROP INDEX or DROP TABLE. In these cases, it is OK (although
              useless) to merge the buffered changes to the freed page.
    ------------------------------------------------------------
    revno: 3402.50.23 [merge]
    committer: Annamalai Gurusami <annamalai.gurusami@oracle.com>
    branch nick: mysql-trunk-bug11765438
    timestamp: Mon 2012-01-16 10:33:45 +0530
    message:
      Null merge from mysql-5.5 to mysql-trunk. 
        ------------------------------------------------------------
        revno: 2875.334.11 [merge]
        committer: Annamalai Gurusami <annamalai.gurusami@oracle.com>
        branch nick: mysql-5.5-bug11765438
        timestamp: Mon 2012-01-16 10:30:51 +0530
        message:
          Merging from mysql-5.1 to mysql-5.5. 
            ------------------------------------------------------------
            revno: 2661.825.7
            committer: Annamalai Gurusami <annamalai.gurusami@oracle.com>
            branch nick: mysql-5.1-bug11765438
            timestamp: Mon 2012-01-16 09:58:31 +0530
            message:
              Bug #11765438 58406: 
              ISSUES WITH COPYING PARTITIONED INNODB TABLES FROM LINUX TO WINDOWS
              
              This problem was already fixed in mysql-trunk as part of bug #11755924.  I am 
              backporting the fix to mysql-5.1.  
    ------------------------------------------------------------
    revno: 3402.50.22 [merge]
    committer: Tor Didriksen <tor.didriksen@oracle.com>
    branch nick: trunk-merge
    timestamp: Fri 2012-01-13 14:03:00 +0100
    message:
      merge opt-team => trunk
        ------------------------------------------------------------
        revno: 2876.249.469 [merge]
        committer: Tor Didriksen <tor.didriksen@oracle.com>
        branch nick: next-mr-opt-team
        timestamp: Fri 2012-01-13 10:33:13 +0100
        message:
          Automerge opt-backporting => opt-team
            ------------------------------------------------------------
            revno: 2876.475.27
            committer: Roy Lyseng <roy.lyseng@oracle.com>
            branch nick: mysql-sb5
            timestamp: Thu 2012-01-12 15:53:51 +0100
            message:
              Bug#13576391: Missing rows on select with in-subquery and BKA=on and semijoin
              
              The problem here is that we attempt filesort on a table that is an
              outer table in a semi-join duplicate-weedout operation. During the
              regular filesort used by SELECT statements, rowids are not carried
              through, but they are needed for duplicate-weedout uniqueness test.
              
              The solution to the problem is to enable filesort with positions for
              all filesort operations where rowids are required after the sorting.
              This is the same strategy that is used for filesort used in update
              and delete operations.
              
              Why did this problem happen when enabling BKA, even though BKA is
              not used in the plan? setup_semijoin_dups_elimination() calls
              might_do_join_buffering() that tells that join buffering might be
              used, and hence the duplicate weedout range is extended to include
              table ot. Later, the MRR default implementation is decided to be used,
              which prevents BKA from being used (setup_join_buffering()). 
              
              mysql-test/include/subquery_sj.inc
                Added test case for bug#13576391.
                Test case is run for all three major storage engines, to see that
                they all support use of rowids in this situation, and that the
                output is properly ordered.
              
              mysql-test/r/subquery_sj_all.result
              mysql-test/r/subquery_sj_all_bka.result
              mysql-test/r/subquery_sj_all_bka_nixbnl.result
              mysql-test/r/subquery_sj_all_bkaunique.result
              mysql-test/r/subquery_sj_dupsweed.result
              mysql-test/r/subquery_sj_dupsweed_bka.result
              mysql-test/r/subquery_sj_dupsweed_bka_nixbnl.result
              mysql-test/r/subquery_sj_dupsweed_bkaunique.result
              mysql-test/r/subquery_sj_firstmatch.result
              mysql-test/r/subquery_sj_firstmatch_bka.result
              mysql-test/r/subquery_sj_firstmatch_bka_nixbnl.result
              mysql-test/r/subquery_sj_firstmatch_bkaunique.result
              mysql-test/r/subquery_sj_loosescan.result
              mysql-test/r/subquery_sj_loosescan_bka.result
              mysql-test/r/subquery_sj_loosescan_bka_nixbnl.result
              mysql-test/r/subquery_sj_loosescan_bkaunique.result
              mysql-test/r/subquery_sj_mat.result
              mysql-test/r/subquery_sj_mat_bka.result
              mysql-test/r/subquery_sj_mat_bka_nixbnl.result
              mysql-test/r/subquery_sj_mat_bkaunique.result
              mysql-test/r/subquery_sj_mat_nosj.result
              mysql-test/r/subquery_sj_none.result
              mysql-test/r/subquery_sj_none_bka.result
              mysql-test/r/subquery_sj_none_bka_nixbnl.result
              mysql-test/r/subquery_sj_none_bkaunique.result
                Added test case results for bug#13576391.
              
              sql/filesort.cc
                Updated comment of filesort() for argument sort_positions
              
              sql/sql_executor.cc
                In create_sort_index(), make sure that filesort() keeps rowids
                throughout sorting, when rowids are needed for the table.
            ------------------------------------------------------------
            revno: 2876.475.26
            committer: Jorgen Loland <jorgen.loland@oracle.com>
            branch nick: mysql-next-mr-opt-backporting-13557132
            timestamp: Thu 2012-01-12 11:21:25 +0100
            message:
              Small refactoring of create_duplicate_weedout_tmp_table():
              Simplify logic and remove dead code
            ------------------------------------------------------------
            revno: 2876.475.25
            committer: Roy Lyseng <roy.lyseng@oracle.com>
            branch nick: mysql-sb7
            timestamp: Wed 2012-01-11 14:29:29 +0100
            message:
              Bug#13541406: Wrong result with loosescan on select .. where .. in 
              
              To explain this problem, let's look at the query in the attached test:
              
              SELECT ot1.col_int_key AS field1
              FROM t2 AS ot1, t2 AS ot2
              WHERE (ot1.col_varchar_key, ot2.col_varchar_nokey) IN (
                  SELECT it2.col_varchar_nokey, it1.col_varchar_key
                  FROM t2 AS it1 JOIN t1 AS it2 ON it2.col_int_key = it1.pk);
              
              The selected plan for this query is (abbreviated):
               ot2  ALL
               it1  index                      col_varchar_key  ... LooseScan
               it2  ref(it1.pk)                col_int_key      FirstMatch(it1)
               ot1  ref(it2.col_varchar_nokey) col_varchar_key  Using index
              
              In English, this means:
              - The outermost loop is over the outer table ot2.
              - For each row of ot2, we perform a loose scan over it1.
                (Notice that we could have used a ref access using index
                 col_varchar_key, but loosescan and ref access cannot be combined yet).
              - We use FirstMatch on table it2 to weed out duplicate rows from the
                subquery.
              - We use a ref access to look up rows in ot1, based on values from it2.
              
              However, this means that there is a dependency from it2 to ot1 and
              FirstMatch is only able to handle dependencies to outer tables that
              are earlier in the join prefix. Hence, LooseScan (combined with FirstMatch)
              is not a valid strategy for this query.
              
              The source of the problem is that get_bound_sj_equalities() sets the
              zeroth bit in bound_sj_equalities, even though the Loose_scan_opt
              function add_keyuse() performs a complete analysis of bound_sj_equalities
              and handled_sj_equalities later. Setting the zeroth bit has fatal
              consequences in few cases, because it is later overwritten or ignored,
              but it did have consequences in this case.
              
              Thus, the problem is solved by removing get_bound_sj_equalities() and
              initializing bound_sj_equalities to the empty set. As for the question
              on equality propagation inside the function, I do not think that is a
              problem because separate keyuse objects are set up for individual
              fields of a multiple equality.
              
              mysql-test/include/subquery_sj.inc
                Added test case for bug#13541406.
                Make sure that LooseScan is not selected.
              
              mysql-test/r/subquery_sj_all.result
              mysql-test/r/subquery_sj_all_bka.result
              mysql-test/r/subquery_sj_all_bka_nixbnl.result
              mysql-test/r/subquery_sj_all_bkaunique.result
              mysql-test/r/subquery_sj_dupsweed.result
              mysql-test/r/subquery_sj_dupsweed_bka.result
              mysql-test/r/subquery_sj_dupsweed_bka_nixbnl.result
              mysql-test/r/subquery_sj_dupsweed_bkaunique.result
              mysql-test/r/subquery_sj_firstmatch.result
              mysql-test/r/subquery_sj_firstmatch_bka.result
              mysql-test/r/subquery_sj_firstmatch_bka_nixbnl.result
              mysql-test/r/subquery_sj_firstmatch_bkaunique.result
              mysql-test/r/subquery_sj_loosescan.result
              mysql-test/r/subquery_sj_loosescan_bka.result
              mysql-test/r/subquery_sj_loosescan_bka_nixbnl.result
              mysql-test/r/subquery_sj_loosescan_bkaunique.result
              mysql-test/r/subquery_sj_mat.result
              mysql-test/r/subquery_sj_mat_bka.result
              mysql-test/r/subquery_sj_mat_bka_nixbnl.result
              mysql-test/r/subquery_sj_mat_bkaunique.result
              mysql-test/r/subquery_sj_mat_nosj.result
              mysql-test/r/subquery_sj_none.result
              mysql-test/r/subquery_sj_none_bka.result
              mysql-test/r/subquery_sj_none_bka_nixbnl.result
              mysql-test/r/subquery_sj_none_bkaunique.result
                Added test case results for bug#13541406.
              
              sql/sql_planner.cc
                Removed the function get_bound_sj_equalities() and initialized
                bound_sj_equalities to an empty set.
                Comment updates.
              
              sql/sql_select.h
                Comment updates in allowed table patterns for semi-join strategies.
              
              sql/sql_select.h
                Fixed a minor documentation inconsistency.
            ------------------------------------------------------------
            revno: 2876.475.24
            committer: Guilhem Bichot <guilhem.bichot@oracle.com>
            branch nick: minimal2
            timestamp: Wed 2012-01-11 10:22:26 +0100
            message:
              fix for pb2 after the last push: ORDER BY <alias> is now printed with alias.
            ------------------------------------------------------------
            revno: 2876.475.23
            committer: Guilhem Bichot <guilhem.bichot@oracle.com>
            branch nick: minimal2
            timestamp: Tue 2012-01-10 19:58:10 +0100
            message:
              Fix for Bug#11923239 "ERROR WITH CORRELATED SUBQUERY IN VIEW WITH
              ONLY_FULL_GROUP_BY SQL MODE".
              
              The root problem is that ONLY_FULL_GROUP_BY mode raises
              an error on
               SELECT (subq) GROUP BY (same subq);
              It does not recognize that both subqueries are the same.
              Fixing this root cause is too difficult:
              it would require implementing Item_subselect::eq(); and it's not worth
              the effort because:
              a) GROUP BY (subquery) is non-SQL-standard so is likely of
              very little interest to users of ONLY_FULL_GROUP_BY
              b) as the user uses ONLY_FULL_GROUP_BY, he wants to have the
              same subquery in GROUP BY and SELECT list, so can give the
              subquery an alias in the SELECT list and use this alias in
              GROUP BY, thus avoiding the problem.
              
              Back to the bug report: a view is created as
               SELECT (subq) AS field2 GROUP BY field2;
              Such SELECT, when run standalone, is accepted by ONLY_FULL_GROUP_BY.
              But when used in a view, the SELECT is written to the view's
              frm file (= what will be the view's definition) as:
               SELECT (subq) AS field2 GROUP BY (subq);
              and thus, when the view is later used, it bumps into the
              "root cause" above, and so
               SELECT * FROM the_view;
              causes an error in ONLY_FULL_GROUP_MODE.
              To avoid bumping in the root cause, we now
              print to the frm file:
               SELECT (subq) AS field2 GROUP BY field2;
              More generally:
               SELECT expression AS alias GROUP BY alias;
              is now printed as
               SELECT expression AS alias GROUP BY alias;
              instead of
               SELECT expression AS alias GROUP BY expression;
              This is done by following this logic, when printing the
              ORDER BY or GROUP BY list: if, in this list, the item was referenced using
              an alias, then print the alias, not the item's expression.
              This is, after all, closer to the original query, which is a good thing
              per se.
              Note that we do not change the case of
               SELECT expression AS alias GROUP BY same_expression;
              which is still printed as
               SELECT expression AS alias GROUP BY same_expression;
              Indeed, printing alias in GROUP BY could yield ambiguity (see last test in
              group_by.test).
            ------------------------------------------------------------
            revno: 2876.475.22
            committer: Guilhem Bichot <guilhem.bichot@oracle.com>
            branch nick: mysql-next-mr-opt-backporting
            timestamp: Thu 2012-01-05 10:37:44 +0100
            message:
              Fix for BUG#13553211 - MISSING ROWS ON SELECT WITH IN-SUBQUERY AND
              MATERIALIZATION + SEMIJOIN ON
              sub_select_sjm() was not respecting the "communication protocol"
              of sub_select_*() functions.
              This minimal patch is the first possible solution. An alternative patch,
              which I prefer and which gets rid of NESTED_LOOP_NO_MORE_ROWS
              everywhere, will be committed afterwards.
            ------------------------------------------------------------
            revno: 2876.475.21
            committer: Roy Lyseng <roy.lyseng@oracle.com>
            branch nick: mysql-sb5
            timestamp: Tue 2012-01-10 09:49:18 +0100
            message:
              Bug#13545215: Missing rows on nested in-subquery with materialization 
              
              This problem occurs with a semi-join materialization that is executed
              multiple times. In this case, the problem is that some outer-join data
              item (the last_inner field of the join_tab) is not reset after the
              first materialization. Effectively, this means that the first
              materialization is performed as an outer join, and all subsequent
              materializations are performed as inner joins.
              The problem occurs only with the MaterializeScan semi-join strategy.
              
              Another demonstration of why reusing data structures for another purpose
              is a really stupid idea.
              
              mysql-test/include/subquery_sj.inc
                Added test case for bug#13545215.
              
              mysql-test/r/subquery_sj_all.result
              mysql-test/r/subquery_sj_all_bka.result
              mysql-test/r/subquery_sj_all_bka_nixbnl.result
              mysql-test/r/subquery_sj_all_bkaunique.result
              mysql-test/r/subquery_sj_dupsweed.result
              mysql-test/r/subquery_sj_dupsweed_bka.result
              mysql-test/r/subquery_sj_dupsweed_bka_nixbnl.result
              mysql-test/r/subquery_sj_dupsweed_bkaunique.result
              mysql-test/r/subquery_sj_firstmatch.result
              mysql-test/r/subquery_sj_firstmatch_bka.result
              mysql-test/r/subquery_sj_firstmatch_bka_nixbnl.result
              mysql-test/r/subquery_sj_firstmatch_bkaunique.result
              mysql-test/r/subquery_sj_loosescan.result
              mysql-test/r/subquery_sj_loosescan_bka.result
              mysql-test/r/subquery_sj_loosescan_bka_nixbnl.result
              mysql-test/r/subquery_sj_loosescan_bkaunique.result
              mysql-test/r/subquery_sj_mat.result
              mysql-test/r/subquery_sj_mat_bka.result
              mysql-test/r/subquery_sj_mat_bka_nixbnl.result
              mysql-test/r/subquery_sj_mat_bkaunique.result
              mysql-test/r/subquery_sj_mat_nosj.result
              mysql-test/r/subquery_sj_none.result
              mysql-test/r/subquery_sj_none_bka.result
              mysql-test/r/subquery_sj_none_bka_nixbnl.result
              mysql-test/r/subquery_sj_none_bkaunique.result
                Added test case results for bug#13545215.
                Notice also the correction in some previous test runs for
                the test case for bug#12603183.
              
              sql/sql_executor.cc
                In sub_select_sjm(), save the value of last_inner before
                performing scan over materialized table, and restore the value
                after the scan.
            ------------------------------------------------------------
            revno: 2876.475.20
            committer: Roy Lyseng <roy.lyseng@oracle.com>
            branch nick: mysql-review
            timestamp: Mon 2012-01-09 15:19:49 +0100
            message:
              Bug#13552968: Extra row with materialization on join + subquery in where + 
              
              The problem here occurs with an outer join between two "system" tables
              (tables with exactly one row each), and with an "expensive" join
              condition between the two tables. User-defined functions and materialized
              subqueries are considered expensive in this context.
              
              The fix for bug#52344 is related to this problem, as it moved subquery
              materialization out of the optimizer phase and into the execution phase.
              However, when marking the inner table of the outer join as "const",
              it is not possible to later evaluate the join condition and subsequently
              mark the fields from the inner tables as NULL. This is contrary to the
              condition attached to the JOIN object: If there are only const tables
              in the JOIN, do_select() will evaluate this condition and correctly
              return an empty result if the condition evaluates to FALSE.
              
              The cases for where the bug hit were quite interesting:
              - With semijoin and materialization ON, the subquery is first marked
                as semi-join candidate, but because the outer query is OUTER JOIN,
                it is instead reverted to IN-TO-EXISTS. This is marked non-expensive
                and thus does not pose a problem.
              - With semijoin OFF, materialization is selected. The condition is then
                marked as expensive and the problem occurs.
              - With STRAIGHT JOIN applied to the outer query, materialization is
                always selected, and the problem occurs.
              
              The chosen solution is to stop marking the inner table of an outer join
              that has an expensive join condition as a const table.
              Fixing the executor to handle this particular case does not seem viable.
               
              mysql-test/include/subquery_mat.inc
                Added test case for bug#13552968.
                Modified test case for bug#52344 so that problem is visible here as well.
              
              mysql-test/r/subquery_mat.result
              mysql-test/r/subquery_mat_all.result
              mysql-test/r/subquery_mat_none.result
                Added test case results for bug#13552968.
              
              sql/sql_executor.cc
                Ensure that join_read_const_table() is not called with an outer-joined
                table with an expensive condition.
              
              sql/sql_optimizer.cc
                For the inner table of an outer join that has an expensive condition,
                do not mark a table containing one row as const.
        ------------------------------------------------------------
        revno: 2876.249.468 [merge]
        committer: Tor Didriksen <tor.didriksen@oracle.com>
        branch nick: next-mr-opt-team
        timestamp: Fri 2012-01-13 10:12:14 +0100
        message:
          NULL merge opt-backporting => opt-team
            ------------------------------------------------------------
            revno: 2876.475.19 [merge]
            committer: Tor Didriksen <tor.didriksen@oracle.com>
            branch nick: next-mr-opt-backporting
            timestamp: Thu 2012-01-05 15:20:14 +0100
            message:
              NULL merge trunk => opt-backporting
        ------------------------------------------------------------
        revno: 2876.249.467 [merge]
        committer: Tor Didriksen <tor.didriksen@oracle.com>
        branch nick: next-mr-opt-team
        timestamp: Fri 2012-01-13 10:06:22 +0100
        message:
          empty merge opt-backporting => opt-team
            ------------------------------------------------------------
            revno: 2876.475.18 [merge]
            committer: Tor Didriksen <tor.didriksen@oracle.com>
            branch nick: next-mr-opt-backporting
            timestamp: Thu 2012-01-05 15:16:20 +0100
            message:
              merge trunk => opt-backporting
        ------------------------------------------------------------
        revno: 2876.249.466 [merge]
        committer: Tor Didriksen <tor.didriksen@oracle.com>
        branch nick: next-mr-opt-team
        timestamp: Thu 2012-01-05 15:20:38 +0100
        message:
          empty merge trunk => opt-team
        ------------------------------------------------------------
        revno: 2876.249.465 [merge]
        committer: Tor Didriksen <tor.didriksen@oracle.com>
        branch nick: next-mr-opt-team
        timestamp: Thu 2012-01-05 15:16:33 +0100
        message:
          merge trunk => opt-team
    ------------------------------------------------------------
    revno: 3402.50.21
    committer: Alexander Barkov <alexander.barkov@oracle.com>
    branch nick: mysql-trunk.b13354387
    timestamp: Fri 2012-01-13 12:36:43 +0400
    message:
      BUG#13354387 - CRASH IN IN MY_DECIMAL::OPERATOR FOR VIEW AND FUNCTION UNIX_TIME
      Fixing the 5.6 part (the 5.5 was earlier committed in a separate commit).
      
      Problem:
      UNIX_TIMESTAMP() could return NULL in case of maybe_null==0.
      
      Fix:
      
      Moving NULL/0 decision logic from 
      Item_func_unix_timestamp::val_timeval()
      to
      Item::get_timeval()
      Item_field::get_timeval()
    ------------------------------------------------------------
    revno: 3402.50.20 [merge]
    committer: Tor Didriksen <tor.didriksen@oracle.com>
    branch nick: trunk
    timestamp: Thu 2012-01-12 16:28:57 +0100
    message:
      empty merge 5.5 => trunk
        ------------------------------------------------------------
        revno: 2875.334.10
        committer: Tor Didriksen <tor.didriksen@oracle.com>
        branch nick: 5.5
        timestamp: Thu 2012-01-12 16:27:53 +0100
        message:
          fix compile warning: may be used uninitialized
    ------------------------------------------------------------
    revno: 3402.50.19
    committer: Georgi Kodinov <Georgi.Kodinov@Oracle.com>
    branch nick: merge-trunk
    timestamp: Thu 2012-01-12 16:32:28 +0200
    message:
      fixed a test case result after a merge.
    ------------------------------------------------------------
    revno: 3402.50.18 [merge]
    committer: Georgi Kodinov <Georgi.Kodinov@Oracle.com>
    branch nick: merge-trunk
    timestamp: Thu 2012-01-12 15:27:57 +0200
    message:
      merge mysql-5.5->mysql-trunk
        ------------------------------------------------------------
        revno: 2875.334.9 [merge]
        committer: Georgi Kodinov <Georgi.Kodinov@Oracle.com>
        branch nick: merge-5.5
        timestamp: Thu 2012-01-12 15:03:44 +0200
        message:
          weave merge of mysql-5.1->mysql-5.5
          merge of Nirbhay's AIX compilation fix for 5.1.61
            ------------------------------------------------------------
            revno: 2661.825.6 [merge]
            committer: Georgi Kodinov <Georgi.Kodinov@Oracle.com>
            branch nick: merge-5.1
            timestamp: Thu 2012-01-12 14:57:14 +0200
            message:
              empty weave merge
                ------------------------------------------------------------
                revno: 1810.4004.8 [merge]
                committer: Bjorn Munch <bjorn.munch@oracle.com>
                branch nick: mysql-5.0
                timestamp: Wed 2012-01-11 10:10:34 +0100
                message:
                  Merge from mysql-5.0.95-release
            ------------------------------------------------------------
            revno: 2661.825.5 [merge]
            committer: Karen Langford <karen.langford@oracle.com>
            branch nick: mysql-5.1
            timestamp: Wed 2012-01-11 18:51:42 +0100
            message:
              Merge from mysql-5.1.61-release
                ------------------------------------------------------------
                revno: 2661.826.8
                tags: mysql-5.1.61
                committer: Karen Langford <karen.langford@oracle.com>
                branch nick: mysql-5.1.61-release
                timestamp: Wed 2012-01-11 18:40:29 +0100
                message:
                  Fixes required to build on AIX
        ------------------------------------------------------------
        revno: 2875.334.8
        committer: Alexander Barkov <alexander.barkov@oracle.com>
        branch nick: mysql-5.5.b13354387
        timestamp: Thu 2012-01-12 13:02:51 +0400
        message:
          BUG#13354387 - CRASH IN IN MY_DECIMAL::OPERATOR FOR VIEW AND FUNCTION UNIX_TIME
          
          Fixing the 5.5 part (the 5.6 part will go in a separate commit soon).
          
          Problem:
            Item_direct_ref::get_date() incorrectly calculated its "null_value",
            which made UNIX_TIMESTAMP(view_column) incorrectly return NULL
            for a NOT NULL view_column.
          
          Fix:
            Make Item_direct_ref::get_date() calculate null_value
            in the similar way with the other methods 
            (val_real,val_str,val_int,val_decimal):
            copy null_value from the referenced Item.
          
          modified:
            mysql-test/r/func_time.result
            mysql-test/t/func_time.test
            sql/item.cc
        ------------------------------------------------------------
        revno: 2875.334.7 [merge]
        author: hery.ramilison@oracle.com
        committer: Hery Ramilison <hery.ramilison@oracle.com>
        branch nick: mysql-5.5
        timestamp: Wed 2012-01-11 18:50:47 +0100
        message:
          Merge from mysql-5.5.20-release
            ------------------------------------------------------------
            revno: 2875.335.12
            tags: mysql-5.5.20, clone-5.5.20-build
            committer: Sergey Vojtovich <sergey.vojtovich@oracle.com>
            branch nick: mysql-5.5-security-push
            timestamp: Fri 2011-12-16 12:17:13 +0400
            message:
              Test case for BUG11763712 is intended for 5.1 only.
            ------------------------------------------------------------
            revno: 2875.335.11 [merge]
            committer: Mattias Jonsson <mattias.jonsson@oracle.com>
            branch nick: topush-5.5-sec
            timestamp: Thu 2011-12-15 17:12:04 +0100
            message:
              merge. Disabled the added test in merge.test from 5.1.
                ------------------------------------------------------------
                revno: 2661.826.7
                tags: clone-5.1.61-build
                committer: Mattias Jonsson <mattias.jonsson@oracle.com>
                branch nick: topush-5.1-sec
                timestamp: Thu 2011-12-15 16:59:18 +0100
                message:
                  Post push fix for merge.test and mysqlcheck.test on windows
    ------------------------------------------------------------
    revno: 3402.50.17 [merge]
    committer: Georgi Kodinov <Georgi.Kodinov@Oracle.com>
    branch nick: merge-trunk
    timestamp: Thu 2012-01-12 15:22:52 +0200
    message:
      merge mysql-trunk-security-fixed->mysql-trunk
        ------------------------------------------------------------
        revno: 2876.471.59 [merge]
        committer: Georgi Kodinov <Georgi.Kodinov@Oracle.com>
        branch nick: merge-trunk-security
        timestamp: Thu 2011-12-15 14:21:34 +0200
        message:
          empty weave merge mysql-5.5-security->mysql-trunk-security
            ------------------------------------------------------------
            revno: 2875.335.10 [merge]
            committer: Georgi Kodinov <Georgi.Kodinov@Oracle.com>
            branch nick: merge-5.5-security
            timestamp: Thu 2011-12-15 14:17:21 +0200
            message:
              empty weave merge mysql-5.1-security->mysql-5.5-security
                ------------------------------------------------------------
                revno: 2661.826.6 [merge]
                committer: Georgi Kodinov <Georgi.Kodinov@Oracle.com>
                branch nick: merge-5.1-security
                timestamp: Thu 2011-12-15 14:10:20 +0200
                message:
                  merge mysql-5.1->mysql-5.1-security
            ------------------------------------------------------------
            revno: 2875.335.9 [merge]
            committer: Georgi Kodinov <Georgi.Kodinov@Oracle.com>
            branch nick: merge-5.5-security
            timestamp: Thu 2011-12-15 14:13:46 +0200
            message:
              merge mysql-5.5->mysql-5.5-security
        ------------------------------------------------------------
        revno: 2876.471.58 [merge]
        committer: Georgi Kodinov <Georgi.Kodinov@Oracle.com>
        branch nick: merge-trunk-security
        timestamp: Thu 2011-12-15 14:18:58 +0200
        message:
          merged mysql-trunk->mysql-trunk-security
        ------------------------------------------------------------
        revno: 2876.471.57 [merge]
        committer: Mattias Jonsson <mattias.jonsson@oracle.com>
        branch nick: topush-trunk-sec
        timestamp: Wed 2011-12-14 15:35:17 +0100
        message:
          merge
            ------------------------------------------------------------
            revno: 2875.335.8 [merge]
            committer: Mattias Jonsson <mattias.jonsson@oracle.com>
            branch nick: topush-5.5-sec
            timestamp: Wed 2011-12-14 15:33:01 +0100
            message:
              merged bug#12361113.
              
              Also added tests for partitions key caches.
                ------------------------------------------------------------
                revno: 2661.826.5 [merge]
                committer: Mattias Jonsson <mattias.jonsson@oracle.com>
                branch nick: topush-5.1-sec
                timestamp: Wed 2011-12-14 14:41:40 +0100
                message:
                  merge
                    ------------------------------------------------------------
                    revno: 1810.4002.36 [merge]
                    tags: mysql-5.0.95, clone-5.0.95-build
                    committer: Mattias Jonsson <mattias.jonsson@oracle.com>
                    branch nick: topush-5.0-sec
                    timestamp: Wed 2011-12-14 14:05:22 +0100
                    message:
                      merge
                        ------------------------------------------------------------
                        revno: 1810.4005.1
                        committer: Mattias Jonsson <mattias.jonsson@oracle.com>
                        branch nick: b12361113-50-sec
                        timestamp: Mon 2011-12-12 14:07:02 +0100
                        message:
                          Bug#12361113: CRASH WHEN "LOAD INDEX INTO CACHE" WITH TOO
                          SMALL KEY CACHE
                          
                          The server crashed on division by zero because the key cache was not
                          initialized and the block length was 0 which was used in a division.
                          
                          The fix was to not allow CACHE INDEX if the key cache was not initiallized.
                          Thus never try LOAD INDEX INTO CACHE for an uninitialized key cache.
                          
                          Also added some windows files/directories to .bzrignore.
        ------------------------------------------------------------
        revno: 2876.471.56
        committer: Nirbhay Choubey <nirbhay.choubey@oracle.com>
        branch nick: mysql-trunk-security
        timestamp: Tue 2011-12-13 19:38:40 +0530
        message:
          Bug#12688860 - SECURITY RECOMMENDATION: PASSWORDS ON CLI
          
          Post-fix : Fix for a failing test case.
        ------------------------------------------------------------
        revno: 2876.471.55
        committer: Georgi Kodinov <Georgi.Kodinov@Oracle.com>
        branch nick: merge-trunk-security
        timestamp: Mon 2011-12-12 17:15:24 +0200
        message:
          fixed tests after the mysql-trunk->mysql-trunk-security merge.
        ------------------------------------------------------------
        revno: 2876.471.54 [merge]
        committer: Georgi Kodinov <Georgi.Kodinov@Oracle.com>
        branch nick: merge-trunk-security
        timestamp: Mon 2011-12-12 15:08:58 +0200
        message:
          empty weave merge mysql-5.5-security->mysql-trunk-security
            ------------------------------------------------------------
            revno: 2875.335.7 [merge]
            committer: Georgi Kodinov <Georgi.Kodinov@Oracle.com>
            branch nick: merge-5.5-security
            timestamp: Mon 2011-12-12 13:45:54 +0200
            message:
              empty weave merge mysql-5.1-security->mysql-5-5.security
                ------------------------------------------------------------
                revno: 2661.826.4 [merge]
                committer: Georgi Kodinov <Georgi.Kodinov@Oracle.com>
                branch nick: merge-5.1-security
                timestamp: Mon 2011-12-12 12:25:35 +0100
                message:
                  merge 5.1->5.1-security.
            ------------------------------------------------------------
            revno: 2875.335.6 [merge]
            committer: Georgi Kodinov <Georgi.Kodinov@Oracle.com>
            branch nick: merge-5.5-security
            timestamp: Mon 2011-12-12 12:28:23 +0100
            message:
              merged 5.5->5.5-security
        ------------------------------------------------------------
        revno: 2876.471.53 [merge]
        committer: Georgi Kodinov <Georgi.Kodinov@Oracle.com>
        branch nick: merge-trunk-security
        timestamp: Mon 2011-12-12 14:55:18 +0200
        message:
          merge mysql-trunk->mysql-trunk-security
        ------------------------------------------------------------
        revno: 2876.471.52
        committer: Nirbhay Choubey <nirbhay.choubey@oracle.com>
        branch nick: mysql-trunk-security
        timestamp: Tue 2011-11-15 20:58:22 +0530
        message:
          Bug#12688860 - SECURITY RECOMMENDATION: PASSWORDS ON CLI
          
          Additional fix : Added a comment to explain variable
          my_getopt_use_args_separator.
        ------------------------------------------------------------
        revno: 2876.471.51
        committer: Nirbhay Choubey <nirbhay.choubey@oracle.com>
        branch nick: B12688860-trunk-security.1
        timestamp: Tue 2011-11-15 19:57:21 +0530
        message:
          Bug#12688860 - SECURITY RECOMMENDATION: PASSWORDS ON CLI
          
          Added a warning message that will notify the user of
          security risk involved in entering the password in the
          command line interface.
        ------------------------------------------------------------
        revno: 2876.471.50 [merge]
        committer: Georgi Kodinov <Georgi.Kodinov@Oracle.com>
        branch nick: merge-trunk-security
        timestamp: Fri 2011-11-04 14:44:21 +0200
        message:
          empty weave merge mysql-5.5-security->mysql-trunk-security
            ------------------------------------------------------------
            revno: 2875.335.5 [merge]
            committer: Georgi Kodinov <Georgi.Kodinov@Oracle.com>
            branch nick: merge-5.5-security
            timestamp: Fri 2011-11-04 14:37:14 +0200
            message:
              empty weave merge mysql-5.1-security->mysql-5.5-security
                ------------------------------------------------------------
                revno: 2661.826.3 [merge]
                committer: Georgi Kodinov <Georgi.Kodinov@Oracle.com>
                branch nick: merge-5.1-security
                timestamp: Fri 2011-11-04 14:33:38 +0200
                message:
                  auto-merge mysql-5.1->mysql-5.5
            ------------------------------------------------------------
            revno: 2875.335.4 [merge]
            committer: Georgi Kodinov <Georgi.Kodinov@Oracle.com>
            branch nick: merge-5.5-security
            timestamp: Fri 2011-11-04 14:33:44 +0200
            message:
              merge mysql-5.5->mysql-5.5-security
        ------------------------------------------------------------
        revno: 2876.471.49 [merge]
        committer: Georgi Kodinov <Georgi.Kodinov@Oracle.com>
        branch nick: merge-trunk-security
        timestamp: Fri 2011-11-04 14:34:47 +0200
        message:
          merge mysql-trunk->mysql-trunk-security
        ------------------------------------------------------------
        revno: 2876.471.48 [merge]
        committer: Alexander Nozdrin <alexander.nozdrin@oracle.com>
        branch nick: mysql-trunk-security
        timestamp: Thu 2011-10-27 10:27:22 +0400
        message:
          Empty merge from mysql-5.5-security.
            ------------------------------------------------------------
            revno: 2875.335.3 [merge]
            committer: Alexander Nozdrin <alexander.nozdrin@oracle.com>
            branch nick: mysql-5.5-security
            timestamp: Thu 2011-10-27 10:24:54 +0400
            message:
              Empty merge from mysql-5.1-security.
                ------------------------------------------------------------
                revno: 2661.826.2 [merge]
                committer: Alexander Nozdrin <alexander.nozdrin@oracle.com>
                branch nick: mysql-5.1-security
                timestamp: Thu 2011-10-27 10:22:19 +0400
                message:
                  Empty merge from mysql-5.1.
                ------------------------------------------------------------
                revno: 2661.826.1
                committer: Karen Langford <karen.langford@oracle.com>
                branch nick: mysql-5.1-security
                timestamp: Wed 2011-10-26 17:03:53 +0200
                message:
                  Raise version number after cloning 5.1.60
            ------------------------------------------------------------
            revno: 2875.335.2 [merge]
            committer: Alexander Nozdrin <alexander.nozdrin@oracle.com>
            branch nick: mysql-5.5-security
            timestamp: Thu 2011-10-27 10:22:44 +0400
            message:
              Empty merge from mysql-5.5.
            ------------------------------------------------------------
            revno: 2875.335.1
            committer: Hery Ramilison <hery.ramilison@oracle.com>
            branch nick: mysql-5.5-security
            timestamp: Wed 2011-10-26 20:37:36 +0200
            message:
              cloning 5.5.18 off
        ------------------------------------------------------------
        revno: 2876.471.47 [merge]
        committer: Alexander Nozdrin <alexander.nozdrin@oracle.com>
        branch nick: mysql-trunk-security
        timestamp: Thu 2011-10-27 10:23:21 +0400
        message:
          Empty merge from mysql-trunk.
    ------------------------------------------------------------
    revno: 3402.50.16
    committer: Tor Didriksen <tor.didriksen@oracle.com>
    branch nick: trunk-byte-order
    timestamp: Wed 2012-01-11 15:35:30 +0100
    message:
      WL#6159 Refactoring of my_global.h post-push fixes for sparc64
      Use the uintXkorr macros rather than uXXXget macros.
    ------------------------------------------------------------
    revno: 3402.50.15
    committer: Tor Didriksen <tor.didriksen@oracle.com>
    branch nick: trunk-byte-order
    timestamp: Wed 2012-01-11 13:45:44 +0100
    message:
      need HAVE_purify
    ------------------------------------------------------------
    revno: 3402.50.14
    committer: Tor Didriksen <tor.didriksen@oracle.com>
    branch nick: trunk-byte-order
    timestamp: Wed 2012-01-11 11:07:45 +0100
    message:
      fix compile warning: may be used uninitialized
    ------------------------------------------------------------
    revno: 3402.50.13
    committer: Tor Didriksen <tor.didriksen@oracle.com>
    branch nick: trunk-byte-order
    timestamp: Wed 2012-01-11 10:33:52 +0100
    message:
      Cleanup of byteorder store/get #ifdef stuff.
      Add new optimized macros for __x86_64__ 
    ------------------------------------------------------------
    revno: 3402.50.12 [merge]
    committer: Nirbhay Choubey <nirbhay.choubey@oracle.com>
    branch nick: mysql-trunk
    timestamp: Tue 2012-01-10 16:20:22 +0530
    message:
      Merge of fix for bug#11760384 from mysql-5.5.
        ------------------------------------------------------------
        revno: 2875.334.6 [merge]
        committer: Nirbhay Choubey <nirbhay.choubey@oracle.com>
        branch nick: mysql-5.5
        timestamp: Tue 2012-01-10 16:10:48 +0530
        message:
          Merge of fix for bug#11760384 from mysql-5.1.
            ------------------------------------------------------------
            revno: 2661.825.4
            committer: Nirbhay Choubey <nirbhay.choubey@oracle.com>
            branch nick: mysql-5.1.52792
            timestamp: Tue 2012-01-10 13:33:45 +0530
            message:
              BUG#11760384 - 52792: mysqldump in XML mode does not dump
                                   routines.
              
              mysqldump in xml mode did not dump routines, events or
              triggers.
              
              This patch fixes this issue by fixing the if conditions
              that disallowed the dump of above mentioned objects in
              xml mode, and added the required code to enable dump
              in xml format.
    ------------------------------------------------------------
    revno: 3402.50.11
    committer: Chaithra Gopalareddy <chaithra.gopalareddy@oracle.com>
    branch nick: mysql-5.6
    timestamp: Tue 2012-01-10 13:54:24 +0530
    message:
      Bug#12911480: GROUP BY MAKE SET WITH EMPTY SET VALUES CRASH IN MY_HASH_SORT_SIMPLE
      
      Problem Description:
      While executing a make_set funtion in a group by clause with null output,
       we see problems like, accessing uninitialized area.
      
      Problem Analysis:
      While deducing the nullability of make_set function 
      (in Item_func_make_set::fix_fields), we do not take into consideration that the 
      first argument can be null and as a result the overall function result could be 
      null. 
      
      In the scenario presented, the first argument is null. So the result of 
      make_set will be null and therefor while accessing the keys in "hp_hashnr" 
      function, it tries to access an uninitialized area (as null bit is not set) 
      and hence the valgrind error. 
      
      While we do consider that the result set can be null when one of the arguments 
      (starting from the second) can be null in a make_set function. 
      
      In the current scenario, which is "select count(*) from t1 group by make_set(a,b)", 
      we do not consider field "a"s nullability. We only consider the rest of the 
      argument list which is "b" here.  As "b" is defined as not null while creating the 
      table, we are seeing the problem. 
      
      Solution:
      In Item_func_make_set::fix_fields(), we take into consideration even the first 
      argument's nullability.
    ------------------------------------------------------------
    revno: 3402.50.10
    committer: Manish Kumar<manish.4.kumar@oracle.com>
    branch nick: mysql
    timestamp: Tue 2012-01-10 12:16:14 +0530
    message:
      BUG#11746146 - 23894: MYSQLBINLOG OUTPUTS SET INSERT_ID=N STATEMENTS UNNECESARILY WITH --DATABA
      
      This is a post-push fix that addresses review comments. In particular, improves coding style 
      and ensures that all memory is freed.
    ------------------------------------------------------------
    revno: 3402.50.9 [merge]
    committer: Sneha Modi <sneha.modi@oracle.com>
    branch nick: mysql-trunk
    timestamp: Tue 2012-01-10 11:43:22 +0530
    message:
      Bug#11748572:
      
      Merging from mysql-5.5 -> mysql-trunk
        ------------------------------------------------------------
        revno: 2875.334.5
        committer: Sneha Modi <sneha.modi@oracle.com>
        branch nick: mysql-5.5
        timestamp: Tue 2012-01-10 11:41:50 +0530
        message:
          Bug#11748572: ALLOCATING A LARGE QUERY CACHE IS NOT DETERMINISTIC
          
          Moving query_cache_size_basic_32.test and query_cache_size_basic_64.test from experimental
          to disabled as a solution has still not been found.
    ------------------------------------------------------------
    revno: 3402.50.8 [merge]
    committer: Yasufumi Kinoshita <yasufumi.kinoshita@oracle.com>
    branch nick: mysql-trunk
    timestamp: Tue 2012-01-10 14:26:29 +0900
    message:
      Bug#12400341 INNODB CAN LEAVE ORPHAN IBD FILES AROUND
      
      If we meet DB_TOO_MANY_CONCURRENT_TRXS during the execution tab_create_graph from row_create_table_for_mysql(), .ibd file for the table should be created already but was not deleted for the error handling.
      
      rb:875 approved by Jimmy Yang
        ------------------------------------------------------------
        revno: 2875.334.4 [merge]
        committer: Yasufumi Kinoshita <yasufumi.kinoshita@oracle.com>
        branch nick: mysql-5.5
        timestamp: Tue 2012-01-10 14:23:20 +0900
        message:
          Bug#12400341 INNODB CAN LEAVE ORPHAN IBD FILES AROUND
          
          If we meet DB_TOO_MANY_CONCURRENT_TRXS during the execution tab_create_graph from row_create_table_for_mysql(), .ibd file for the table should be created already but was not deleted for the error handling.
          
          rb:875 approved by Jimmy Yang
            ------------------------------------------------------------
            revno: 2661.825.3
            committer: Yasufumi Kinoshita <yasufumi.kinoshita@oracle.com>
            branch nick: mysql-5.1
            timestamp: Tue 2012-01-10 14:18:58 +0900
            message:
              Bug#12400341 INNODB CAN LEAVE ORPHAN IBD FILES AROUND
              
              If we meet DB_TOO_MANY_CONCURRENT_TRXS during the execution tab_create_graph from row_create_table_for_mysql(), .ibd file for the table should be created already but was not deleted for the error handling.
              
              rb:875 approved by Jimmy Yang
            ------------------------------------------------------------
            revno: 2661.825.2
            committer: Hemant Kumar <hemant.hk.kumar@oracle.com>
            branch nick: mysql-5.1
            timestamp: Fri 2012-01-06 16:28:24 +0530
            message:
              Bug#12872803 - 62154: FEDERATED.FEDERATED_SERVER TEST FAILS WITH RUN --REPEAT=2
              Fixed it to work with "--repeat" option.
        ------------------------------------------------------------
        revno: 2875.334.3
        committer: Hemant Kumar <hemant.hk.kumar@oracle.com>
        branch nick: mysql-5.5
        timestamp: Fri 2012-01-06 16:37:02 +0530
        message:
          Null merge from  5.1 for Bug 12872803 - 62154: FEDERATED.FEDERATED_SERVER TEST FAILS WITH RUN --REPEAT=2
    ------------------------------------------------------------
    revno: 3402.50.7
    committer: Vinay Fisrekar <vinay.fisrekar@oracle.com>
    branch nick: mysql-trunk
    timestamp: Mon 2012-01-09 16:58:13 +0530
    message:
      bug#13555970 - INNODB_FTS.INNODB_FTS_LARGE_RECORDS TIMEOUT FOR SOLARIS ON PB2
      
      Test Fix : Reducing the test run time by lowering the number of records.
    ------------------------------------------------------------
    revno: 3402.50.6
    committer: Vasil Dimov <vasil.dimov@oracle.com>
    branch nick: mysql-trunk
    timestamp: Mon 2012-01-09 11:46:12 +0200
    message:
      Fix some whitespace
    ------------------------------------------------------------
    revno: 3402.50.5
    committer: Raghav Kapoor <raghav.kapoor@oracle.com>
    branch nick: mysql-trunk-bug-11751736
    timestamp: Mon 2012-01-09 12:56:17 +0530
    message:
      BUG#11751736 - 42708: DROP DATABASE STATEMENT SHOULD REMOVE .OLD SUFFIX FROM 
      		      DATABASE DIRECTORY
      
      BACKGROUND:
      Create database, tables and load data.Execute myisampack to
      compress the tables, also use -b option to have backup of 
      datafile.Try dropping the database, will fail because of 
      .OLD file that is created in database directory.
      	
      FIX:
      DROP DATABASE will fail with the error described in the bug report
      if an unknown file is found while trying to delete the database
      directory. This bug is fixed by adding ".OLD" to the list of known file
      extensions that DROP DATABASE uses when checking if a file can be
      silently deleted. 
    ------------------------------------------------------------
    revno: 3402.50.4
    committer: Christopher Powers <chris.powers@oracle.com>
    branch nick: mysql-trunk
    timestamp: Fri 2012-01-06 09:54:45 -0600
    message:
      Bug#12790483 - OBJECTS_SUMMARY_GLOBAL_BY_TYPE AND RENAME TABLE
        
      Further updates to perfschema.misc.test to verify PFS table shares.
    ------------------------------------------------------------
    revno: 3402.50.3 [merge]
    committer: Christopher Powers <chris.powers@oracle.com>
    branch nick: mysql-trunk
    timestamp: Fri 2012-01-06 09:25:14 -0600
    message:
      local merge
    ------------------------------------------------------------
    revno: 3402.50.2
    committer: Christopher Powers <chris.powers@oracle.com>
    branch nick: mysql-trunk
    timestamp: Thu 2012-01-05 17:19:10 -0600
    message:
      Bug#12790483 - OBJECTS_SUMMARY_GLOBAL_BY_TYPE AND RENAME TABLE
      
      Updated perfschema.misc.test to catch orphaned table view objects.
    ------------------------------------------------------------
    revno: 3402.50.1
    committer: Christopher Powers <chris.powers@oracle.com>
    branch nick: mysql-trunk
    timestamp: Thu 2012-01-05 16:55:16 -0600
    message:
      Bug#12790483 - OBJECTS_SUMMARY_GLOBAL_BY_TYPE AND RENAME TABLE
      
      Don't create PFS table shares for table views.
------------------------------------------------------------
revno: 3579
committer: Andrei Elkin <andrei.elkin@oracle.com>
branch nick: mysql-trunk-wl3584
timestamp: Fri 2012-01-27 03:26:40 +0200
message:
  wl#3584 GTID
  
  The patch address Empty Group merged patch review (Sven) suggestions.
------------------------------------------------------------
revno: 3578 [merge]
committer: Andrei Elkin <andrei.elkin@oracle.com>
branch nick: mysql-trunk-wl3584
timestamp: Fri 2012-01-27 02:59:38 +0200
message:
  merge from wl3584 repo.
    ------------------------------------------------------------
    revno: 3576.1.1
    committer: Alfranio Correia <alfranio.correia@oracle.com>
    branch nick: mysql-trunk-wl3584.merge
    timestamp: Thu 2012-01-26 23:01:01 +0000
    message:
      Fixed some test cases and a bug on the master/slave protocol that led
      to wrong positions being stored into the master.info.
------------------------------------------------------------
revno: 3577 [merge]
committer: Andrei Elkin <andrei.elkin@oracle.com>
branch nick: mysql-trunk-wl3584
timestamp: Thu 2012-01-26 12:53:34 +0200
message:
  wl#3584 GTID: empty group and binlog-hton cleanup
  
  Reviewed by Sven patch is merged. rpl_gtid_empty_group is reenforced with cases
  required by review.
  The patch passes OFF-mode testing except 
     rpl.rpl_gtid_empty_group rpl.rpl_check_gtid rpl.rpl_gtid_lost rpl.rpl_gtid_mode
     rpl.rpl_deadlock_innodb rpl.rpl_group_mysqlbinlog rpl.rpl_begin_commit_rollback
  some of which failed due to an assert%
  
  Gtid_state::acquire_ownership(Gtid, THD*): Assertion `thd->owned_gtid.sidno == 0'  in rpl_gtid_mode
    ------------------------------------------------------------
    revno: 3547.2.1
    committer: Andrei Elkin <andrei.elkin@oracle.com>
    branch nick: wl3584-r3546
    timestamp: Tue 2012-01-24 21:45:24 +0200
    message:
      wl#3584 GTID
      
      This patch carries out some rearrangement of handling of GTID ownwership acquisition.
      
      The part one removes explict binlog hton registration to satisfy to few asserts incl
      one in innodb. Logging and cleanup for GTID in case of binlog hton won't be registered
      automatically is guaranteed by deploying an explicit invocation of a new function
      composed for that purpose.
      
      The part two aims at Empty Group as well as performs the final 
      simplification of the acquisition logics.
      
      GTID ownwership acquisition is performed at SET GTID_NEXT* handling.
      Currently there are two branches, one for the query and the other for 
      the replication event.
      
      Disclaimer: this patch does not cover any strict grouping protocol specifying
      possible and impossible sequence of SET GTID_NEXT* and the following queries.
      Testing of that protocol will be (unless there exists already) committed separately.
------------------------------------------------------------
revno: 3576
committer: Sven Sandberg <sven.sandberg@oracle.com>
branch nick: trunk-wl3584
timestamp: Wed 2012-01-25 14:43:19 +0100
message:
  WL#3584 - add check for GTID_LOST
  Made the dump thread check if the slave requests any GTIDs
  that have been purged, and report an error if that's the case
  Clarified a couple of error messages too.
------------------------------------------------------------
revno: 3575
committer: Sven Sandberg <sven.sandberg@oracle.com>
branch nick: trunk-wl3584
timestamp: Wed 2012-01-25 11:14:39 +0100
message:
  WL#3584 bugfixes
   - If the dump thread found a GTID event when GTID_MODE=OFF,
     it would report the error such that the slave tries to reconnect.
     This caused an infinite loop. Fixed the dump thread to report
     error correctly.
   - The server would generate a Previous_gtids_log_event on startup,
     even when GTID_MODE=OFF.
   - Added better debug info to read_log_event and mysql_binlog_send;
     there is now always a text in the debug trace indicating what the
     error was (or which line it occurred on so that it can be looked up)
   - fixed some wrong indentation
  This fixes test cases rpl_server_uuid, rpl_binlog_index,
  rpl_crash_safe_master, rpl_server_uuid, binlog_stm_do_db'
------------------------------------------------------------
revno: 3574
committer: Alfranio Correia <alfranio.correia@oracle.com>
branch nick: mysql-trunk-wl3584.merge
timestamp: Wed 2012-01-25 06:35:58 +0000
message:
  Test cases for sys_vars.all_vars.
------------------------------------------------------------
revno: 3573
committer: Sven Sandberg <sven.sandberg@oracle.com>
branch nick: trunk-wl3584
timestamp: Tue 2012-01-24 17:52:13 +0100
message:
  WL#3584: test fix
  updated result file that i forgot to update in previuos changeset
------------------------------------------------------------
revno: 3572 [merge]
committer: Sven Sandberg <sven.sandberg@oracle.com>
branch nick: trunk-wl3584
timestamp: Tue 2012-01-24 17:45:49 +0100
message:
  WL#3584 merge
  merged [sven's work] with [alfranio's work]
    ------------------------------------------------------------
    revno: 3570.1.3
    committer: Alfranio Correia <alfranio.correia@oracle.com>
    branch nick: mysql-trunk-wl3584.merge
    timestamp: Tue 2012-01-24 16:31:48 +0000
    message:
      Fixed test case is_columns_mysql_embedded and memory leak.
    ------------------------------------------------------------
    revno: 3570.1.2
    committer: Alfranio Correia <alfranio.correia@oracle.com>
    branch nick: mysql-trunk-wl3584.merge
    timestamp: Tue 2012-01-24 12:05:36 +0000
    message:
      Fixed test cases binlog_row_binlog and binlog_stm_binlog.
    ------------------------------------------------------------
    revno: 3570.1.1
    committer: Alfranio Correia <alfranio.correia@oracle.com>
    branch nick: mysql-trunk-wl3584.merge
    timestamp: Tue 2012-01-24 11:10:50 +0000
    message:
      Fixed mysqld--help-win and replaced previous_gtids events by
      rotate events on the slave.
------------------------------------------------------------
revno: 3571
committer: Sven Sandberg <sven.sandberg@oracle.com>
branch nick: trunk-wl3584
timestamp: Tue 2012-01-24 17:33:21 +0100
message:
  WL#3584: test fixes
  fixed rpl_gtid_lost and binlog_trx_empty_assertions,
  improved binlog_stm_binlog
------------------------------------------------------------
revno: 3570
committer: Sven Sandberg <sven.sandberg@oracle.com>
branch nick: trunk-wl3584
timestamp: Mon 2012-01-23 20:43:02 +0100
message:
  WL#3584: fix disable_gtid_unsafe_statements
   - re-enable the check for non-transactional tables
   - add a debug symbol that suppresses the check
   - restrict the check to tables that are written (ignore reads)
------------------------------------------------------------
revno: 3569 [merge]
committer: Sven Sandberg <sven.sandberg@oracle.com>
branch nick: trunk-wl3584
timestamp: Mon 2012-01-23 15:55:50 +0100
message:
  WL#3584 merge
  merged [sven's work] with [alfranio's work + serge's work]
  no conflicts
    ------------------------------------------------------------
    revno: 3567.1.5
    committer: Alfranio Correia <alfranio.correia@oracle.com>
    branch nick: mysql-trunk-wl3584.merge
    timestamp: Mon 2012-01-23 09:58:04 +0000
    message:
      Fixed the use of GTID_LOG_EVENT and ANONYMOUS_GTID_LOG_EVENT.
    ------------------------------------------------------------
    revno: 3567.1.4
    committer: Serge Kozlov <Serge.Kozlov@oracle.com>
    branch nick: mysql-trunk-wl3584
    timestamp: Sun 2012-01-22 23:12:30 +0400
    message:
      WL#3584, fix for rpl_semi_sync
    ------------------------------------------------------------
    revno: 3567.1.3
    committer: Alfranio Correia <alfranio.correia@oracle.com>
    branch nick: mysql-trunk-wl3584.merge
    timestamp: Sat 2012-01-21 20:55:59 +0000
    message:
      Fixed MTS.
    ------------------------------------------------------------
    revno: 3567.1.2
    committer: Alfranio Correia <alfranio.correia@oracle.com>
    branch nick: mysql-trunk-wl3584.merge
    timestamp: Sat 2012-01-21 11:22:05 +0000
    message:
      Fixed test case.
    ------------------------------------------------------------
    revno: 3567.1.1
    committer: Alfranio Correia <alfranio.correia@oracle.com>
    branch nick: mysql-trunk-wl3584.merge
    timestamp: Fri 2012-01-20 18:20:59 +0000
    message:
      Fixed test cases after disabling gtids.
------------------------------------------------------------
revno: 3568
committer: Sven Sandberg <sven.sandberg@oracle.com>
branch nick: trunk-wl3584
timestamp: Mon 2012-01-23 14:44:47 +0100
message:
  WL#3584: implement @@global.gtid_lost
   - make purge_logs update lost_gtids
   - make mysql_binlog_send generate an error if the requrested GTIDs
     are lost.
------------------------------------------------------------
revno: 3567
committer: Sven Sandberg <sven.sandberg@oracle.com>
branch nick: trunk-wl3584
timestamp: Fri 2012-01-20 15:29:09 +0100
message:
  WL#3584 cleanup and document
------------------------------------------------------------
revno: 3566
committer: Sven Sandberg <sven.sandberg@oracle.com>
branch nick: trunk-wl3584
timestamp: Fri 2012-01-20 12:59:02 +0100
message:
  WL#3584 remove compilation warnings + bugfix
   - remove compilation warnings under unix in non-debug mode
   - do not assert that the size of a gtid_event is equal to
     the size of the data that we read, because the event format
     is supposed to be extensible in the future
------------------------------------------------------------
revno: 3565
committer: Sven Sandberg <sven.sandberg@oracle.com>
branch nick: trunk-wl3584
timestamp: Fri 2012-01-20 12:49:52 +0100
message:
  WL#3584 remove compilation warnings under windows
------------------------------------------------------------
revno: 3564
committer: Sven Sandberg <sven.sandberg@oracle.com>
branch nick: trunk-wl3584
timestamp: Fri 2012-01-20 11:59:58 +0100
message:
  WL#3584 remove compilation warnings
  thd_id was unused in non-debug mode
------------------------------------------------------------
revno: 3563
committer: Sven Sandberg <sven.sandberg@oracle.com>
branch nick: trunk-wl3584
timestamp: Fri 2012-01-20 11:57:59 +0100
message:
  WL#3584 compilation error fixes
  made Gtid_set::to_string() build in non-debug mode too
------------------------------------------------------------
revno: 3562
committer: Sven Sandberg <sven.sandberg@oracle.com>
branch nick: trunk-wl3584
timestamp: Fri 2012-01-20 11:06:22 +0100
message:
  WL#3584 fix compilation error
  remove use of abs()
------------------------------------------------------------
revno: 3561
committer: Sven Sandberg <sven.sandberg@oracle.com>
branch nick: trunk-wl3584
timestamp: Thu 2012-01-19 17:15:38 +0100
message:
  WL#3584 bugfix
  fixed typo that would result in infinite loop
  in an (unlikely) error case
------------------------------------------------------------
revno: 3560
committer: Sven Sandberg <sven.sandberg@oracle.com>
branch nick: trunk-wl3584
timestamp: Thu 2012-01-19 17:12:33 +0100
message:
  WL#3584 documentation
  added comments and assertions clarifying that the
  caller of Gtid_state::acquire_ownership must take
  locks.
------------------------------------------------------------
revno: 3559
committer: Sven Sandberg <sven.sandberg@oracle.com>
branch nick: trunk-wl3584
timestamp: Thu 2012-01-19 16:51:54 +0100
message:
  WL#3584 cleanup
  - rename sql/z* -> sql/rpl_gtid_*
  - merge sql/zreturn.cc and sql/zgtid.cc into new file sql/rpl_gtid_misc.cc
  - remove commented-out and unused code
  - simplify prototypes for Gtid_state::[un]lock_sidnos
  - rollback the operation of Sid_map::add_sidno()
    in case gtid_state.ensure_sidno() fails
------------------------------------------------------------
revno: 3558
committer: Sven Sandberg <sven.sandberg@oracle.com>
branch nick: trunk-wl3584
timestamp: Thu 2012-01-19 15:44:21 +0100
message:
  WL#3584 bugfix
  replace malloc/free by my_malloc/my_free in new code
------------------------------------------------------------
revno: 3557
committer: Sven Sandberg <sven.sandberg@oracle.com>
branch nick: trunk-wl3584
timestamp: Thu 2012-01-19 15:42:36 +0100
message:
  WL#3584 bugfix
  Use a local Sid_map instead of the global one in
  GTID_SUBSET and GTID_SUBTRACT. This prevents users
  from creating a memory leak by calling e.g.
  GTID_SUBSET(UUID(), UUID()) repeatedly.
------------------------------------------------------------
revno: 3556
committer: Sven Sandberg <sven.sandberg@oracle.com>
branch nick: trunk-wl3584
timestamp: Thu 2012-01-19 15:39:52 +0100
message:
  WL#3584 temporary fix
  Disabled the check that forbids using MyISAM+GTID.
  This is temporarily needed to run tests with gtid_mode=on,
  until we fix mtr so that it can use InnoDB.
------------------------------------------------------------
revno: 3555
committer: Sven Sandberg <sven.sandberg@oracle.com>
branch nick: trunk-wl3584
timestamp: Thu 2012-01-19 15:15:12 +0100
message:
  WL#3584 test fix
  fix gtid_mode which was temporarily broken by a previous patch
------------------------------------------------------------
revno: 3554
committer: Sven Sandberg <sven.sandberg@oracle.com>
branch nick: trunk-wl3584
timestamp: Thu 2012-01-19 15:10:33 +0100
message:
  WL#3584 bugfix
  Moved gtid_state.update() to a point where it is known for sure
  that writing the binlog succeeded. Now, the binlog and
  @@GLOBAL.GTID_DONE are updated atomically from the view of
  an observer.
------------------------------------------------------------
revno: 3553
committer: Sven Sandberg <sven.sandberg@oracle.com>
branch nick: trunk-wl3584
timestamp: Thu 2012-01-19 15:04:31 +0100
message:
  WL#3584 cleanup
  removed #define HAVE_GTID and @@GLOBAL.HAVE_GTID
------------------------------------------------------------
revno: 3552 [merge]
committer: Sven Sandberg <sven.sandberg@oracle.com>
branch nick: trunk-wl3584
timestamp: Thu 2012-01-19 13:25:12 +0100
message:
  WL#3584 merge
  merged sven's work with alfranio's work
    ------------------------------------------------------------
    revno: 3550.1.1
    committer: Alfranio Correia <alfranio.correia@oracle.com>
    branch nick: mysql-trunk-wl3584.merge
    timestamp: Tue 2012-01-17 23:51:01 +0000
    message:
      Cleanup.
------------------------------------------------------------
revno: 3551
committer: Sven Sandberg <sven.sandberg@oracle.com>
branch nick: trunk-wl3584
timestamp: Thu 2012-01-19 13:23:48 +0100
message:
  WL#3584 bugfixes / cleanup
------------------------------------------------------------
revno: 3550
committer: Sven Sandberg <sven.sandberg@oracle.com>
branch nick: trunk-wl3584
timestamp: Tue 2012-01-17 09:03:16 +0100
message:
  WL#3584 fix test case
------------------------------------------------------------
revno: 3549 [merge]
committer: Sven Sandberg <sven.sandberg@oracle.com>
branch nick: trunk-wl3584
timestamp: Tue 2012-01-17 08:31:41 +0100
message:
  WL#3584 merge
  merge sven's changes with alfranio's changes.
  conflicts:
    Text conflict in mysql-test/suite/rpl/r/rpl_check_gtid.result
    ------------------------------------------------------------
    revno: 3547.1.2
    committer: Alfranio Correia <alfranio.correia@oracle.com>
    branch nick: mysql-trunk-wl3584.merge
    timestamp: Mon 2012-01-16 17:04:08 +0000
    message:
      Cleanup.
    ------------------------------------------------------------
    revno: 3547.1.1
    committer: Alfranio Correia <alfranio.correia@oracle.com>
    branch nick: mysql-trunk-wl3584.merge
    timestamp: Sat 2012-01-14 11:51:59 +0000
    message:
      Clean up.
------------------------------------------------------------
revno: 3548
committer: Sven Sandberg <sven.sandberg@oracle.com>
branch nick: trunk-wl3584
timestamp: Mon 2012-01-16 23:21:16 +0100
message:
  WL#3584 bugfixes and refactorings
   - fix logic of is_stmt_gtid_compatible / disable_gtid_unsafe_statements
   - minor fixes
   - tests for gtid_mode
------------------------------------------------------------
revno: 3547 [merge]
committer: Sven Sandberg <sven.sandberg@oracle.com>
branch nick: trunk-wl3584
timestamp: Wed 2012-01-11 15:34:23 +0100
message:
  WL#3584: merge
  merged [alfranio's changes] with [sven's changes]
    ------------------------------------------------------------
    revno: 3543.1.1
    committer: Alfranio Correia <alfranio.correia@oracle.com>
    branch nick: mysql-trunk-wl3584.merge
    timestamp: Wed 2012-01-11 07:29:43 +0000
    message:
      This patch generates error messages for statements that are not compatible
      with GTID and skips the test cases that uses such statements. Incompatible
      statements are:
      
        . Mixed statements;
      
        . CREATE...SELECT statement;
      
        . Within a transaction:
          . Changes to non-transactional tables that come
            after changes to transactional tables;
          . CREATE TEMPORARY TABLE statement.
      
      We need to revisit this after pushing the first version of the code
      to trunk because in some cases we can relax the rules.
      
      Finally, it is worth mentioning that to be completely safe we should
      annotate events in the binary log with the type of the engine found
      on the master and check if it remains the same on the slave. If the
      same table is created on the master and slave with different types
      of engines (e.g. Innodb and MyIsam), this may cause issues.
      In particular Innodb on Master and MyIsam on Slave will generate
      duplicated GTIDs.
      
      However, we do not introduce this complexity into the code with the
      hope that in the future support to MyIsam tables will be deprecated.
------------------------------------------------------------
revno: 3546
committer: Sven Sandberg <sven.sandberg@oracle.com>
branch nick: trunk-wl3584
timestamp: Wed 2012-01-11 15:25:47 +0100
message:
  WL#3584: bugfixes
  Removed lock-related assertions from destructors, since
  apparently we cannot ensure that the asserted condition
  holds. Moved definitions of global objects to one place
  to ensure consistent constructor/destructor call order.
------------------------------------------------------------
revno: 3545
committer: Sven Sandberg <sven.sandberg@oracle.com>
branch nick: trunk-wl3584
timestamp: Wed 2012-01-11 13:23:17 +0100
message:
  WL#3584 bugfixes
  fix compile/link errors introduced by previous patch
------------------------------------------------------------
revno: 3544 [merge]
committer: Sven Sandberg <sven.sandberg@oracle.com>
branch nick: trunk-wl3584
timestamp: Wed 2012-01-11 11:50:16 +0100
message:
  WL#3584: implement GTID_MODE
   - implement GTID_MODE: turn off GTID in lots of places
     and throw errors for lots of conditions
   - break out code in sql_parse.cc into a function of its
     own, com_binlog_dump_gtid
    ------------------------------------------------------------
    revno: 3541.2.1
    committer: Sven Sandberg <sven.sandberg@oracle.com>
    branch nick: trunk-wl3584
    timestamp: Thu 2012-01-05 16:58:54 +0100
    message:
      begin implement gtid_mode
------------------------------------------------------------
revno: 3543 [merge]
committer: Sven Sandberg <sven.sandberg@oracle.com>
branch nick: trunk-wl3584
timestamp: Mon 2012-01-09 23:39:04 +0100
message:
  WL#3584 merge
  merged (sven fixes) with (alfraino fixes + alfraino merge from main)
  2 txt conflicts resolved
    ------------------------------------------------------------
    revno: 3541.1.8
    committer: Alfranio Correia <alfranio.correia@oracle.com>
    branch nick: mysql-trunk-wl3584.merge
    timestamp: Mon 2012-01-09 15:05:55 +0000
    message:
      Fixed corrupted binary logs.
    ------------------------------------------------------------
    revno: 3541.1.7
    committer: Alfranio Correia <alfranio.correia@oracle.com>
    branch nick: mysql-trunk-wl3584.merge
    timestamp: Mon 2012-01-09 12:08:22 +0000
    message:
      Post-merge fix. Changed assertion in log_event.cc after merging it with trunk.
    ------------------------------------------------------------
    revno: 3541.1.6
    committer: Alfranio Correia <alfranio.correia@oracle.com>
    branch nick: mysql-trunk-wl3584.merge
    timestamp: Sat 2012-01-07 08:45:52 +0000
    message:
      Post-push fixes after merge.
    ------------------------------------------------------------
    revno: 3541.1.5 [merge]
    committer: Alfranio Correia <alfranio.correia@oracle.com>
    branch nick: mysql-trunk-wl3584.merge
    timestamp: Fri 2012-01-06 20:00:48 +0000
    message:
      merge mysql-trunk --> mysql-trunk-wl3584
      
      Conflicts:
      
      Text conflict in include/my_global.h
      Text conflict in mysql-test/extra/binlog_tests/ctype_ucs_binlog.test
      Text conflict in mysql-test/include/show_events.inc
      Text conflict in mysql-test/r/mysqlbinlog_row.result
      Text conflict in mysql-test/r/mysqlbinlog_row_innodb.result
      Text conflict in mysql-test/r/mysqlbinlog_row_myisam.result
      Text conflict in mysql-test/r/mysqlbinlog_start_stop.result
      Text conflict in mysql-test/suite/funcs_1/r/is_columns_mysql.result
      Text conflict in mysql-test/t/mysqlbinlog_start_stop.test
      Text conflict in sql/CMakeLists.txt
      Text conflict in sql/log_event.cc
      Text conflict in sql/log_event.h
      Text conflict in sql/rpl_rli_pdb.cc
      Text conflict in sql/share/errmsg-utf8.txt
      Text conflict in sql/sql_class.cc
        ------------------------------------------------------------
        revno: 3402.1.310
        committer: Hemant Kumar <hemant.hk.kumar@oracle.com>
        branch nick: mysql-trunk
        timestamp: Fri 2012-01-06 17:19:46 +0530
        message:
          Bug#13566367 - TC_RENAME_ERROR TEST FAILING DUE TO RESULT MISMTACH ON WEEKLY-TRUNK. Submitting fix as a result file change.
        ------------------------------------------------------------
        revno: 3402.1.309
        committer: Hemant Kumar <hemant.hk.kumar@oracle.com>
        branch nick: mysql-trunk
        timestamp: Fri 2012-01-06 16:44:42 +0530
        message:
          Submitting NULL merger for Bug 12872803 - 62154: FEDERATED.FEDERATED_SERVER TEST FAILS WITH RUN --REPEAT=2
        ------------------------------------------------------------
        revno: 3402.1.308 [merge]
        committer: Hemant Kumar <hemant.hk.kumar@oracle.com>
        branch nick: mysql-trunk
        timestamp: Fri 2012-01-06 15:58:00 +0530
        message:
          Up merging changes related to Bug#12872804 - 62155: BINLOG.BINLOG_STM_UNSAFE_WARNING FAILS WHEN RUN WITH --REPEAT=2
          Fixed the testcase using timestamp logic while doing grep from the error file.
            ------------------------------------------------------------
            revno: 2875.334.2 [merge]
            committer: Hemant Kumar <hemant.hk.kumar@oracle.com>
            branch nick: mysql-5.5
            timestamp: Fri 2012-01-06 15:52:56 +0530
            message:
              Bug#12872804 - 62155: BINLOG.BINLOG_STM_UNSAFE_WARNING FAILS WHEN RUN WITH --REPEAT=2
              Fixed the testcase using timestamp logic while doing grep from the error file.
                ------------------------------------------------------------
                revno: 2661.825.1
                committer: Hemant Kumar <hemant.hk.kumar@oracle.com>
                branch nick: mysql-5.1
                timestamp: Fri 2012-01-06 15:46:03 +0530
                message:
                  Bug#12872804 - 62155: BINLOG.BINLOG_STM_UNSAFE_WARNING FAILS WHEN RUN WITH --REPEAT=2
                  Fixed the testcase using timestamp logic while doing grep from the error file.
        ------------------------------------------------------------
        revno: 3402.1.307
        committer: Marc Alff <marc.alff@oracle.com>
        branch nick: mysql-trunk-bug12346211-tuning
        timestamp: Fri 2012-01-06 10:03:53 +0100
        message:
          Bug 12346211 - PERF IMPACT OF PERFORMANCE-SCHEMA WITH DISABLED INSTRUMENTS/CONSUMERS
          
          Manual port of mysql-trunk-pfs-tuning --> mysql-trunk.
          
          This fix contains all the performance optimizations implemented so far,
          for the performance schema instrumentation.
          - simplified the instrumentation interface (merged the get_locker and start_wait APIs)
          - performed the "if (that->m_psi != NULL)" test in the upper layers, to shorten code paths
          - revised the table io and table lock instrumentation to be less intrusive,
            when using the open table cache (unbind, rebind)
          - misc cleanup
        ------------------------------------------------------------
        revno: 3402.1.306 [merge]
        committer: Bjorn Munch <bjorn.munch@oracle.com>
        branch nick: main-tr
        timestamp: Fri 2012-01-06 00:24:54 +0100
        message:
          null upmerge
            ------------------------------------------------------------
            revno: 2875.334.1 [merge]
            committer: Bjorn Munch <bjorn.munch@oracle.com>
            branch nick: main-55
            timestamp: Fri 2012-01-06 00:23:09 +0100
            message:
              merge 5.5-mtr => 5.5
        ------------------------------------------------------------
        revno: 3402.1.305 [merge]
        committer: Bjorn Munch <bjorn.munch@oracle.com>
        branch nick: main-tr
        timestamp: Fri 2012-01-06 00:24:01 +0100
        message:
          merge trunk-mtr => trunk
            ------------------------------------------------------------
            revno: 3076.1.68 [merge]
            committer: Bjorn Munch <bjorn.munch@oracle.com>
            branch nick: mtr-tr
            timestamp: Thu 2012-01-05 16:18:47 +0100
            message:
              merge trunk => trunk-mtr
            ------------------------------------------------------------
            revno: 3076.1.67 [merge]
            committer: Bjorn Munch <bjorn.munch@oracle.com>
            branch nick: mtr-tr
            timestamp: Wed 2012-01-04 16:52:42 +0100
            message:
              merge trunk => trunk-mtr
            ------------------------------------------------------------
            revno: 3076.1.66 [merge]
            committer: Bjorn Munch <bjorn.munch@oracle.com>
            branch nick: mtr-tr
            timestamp: Wed 2012-01-04 16:48:00 +0100
            message:
              upmerge followup for fix 13055685
                ------------------------------------------------------------
                revno: 2875.125.192
                committer: Bjorn Munch <bjorn.munch@oracle.com>
                branch nick: rrvar-55
                timestamp: Wed 2012-01-04 16:16:17 +0100
                message:
                  Followup after 13055685:
                  Use new syntax to mask different error output in affected tests
            ------------------------------------------------------------
            revno: 3076.1.65 [merge]
            committer: Bjorn Munch <bjorn.munch@oracle.com>
            branch nick: mtr-tr
            timestamp: Tue 2012-01-03 11:03:53 +0100
            message:
              null upmerge
                ------------------------------------------------------------
                revno: 2875.125.191 [merge]
                committer: Bjorn Munch <bjorn.munch@oracle.com>
                branch nick: mtr-55
                timestamp: Tue 2012-01-03 10:59:33 +0100
                message:
                  merge 5.5 => 5.5-mtr
            ------------------------------------------------------------
            revno: 3076.1.64 [merge]
            committer: Bjorn Munch <bjorn.munch@oracle.com>
            branch nick: mtr-tr
            timestamp: Tue 2012-01-03 11:02:47 +0100
            message:
              merge trunk => trunk-mtr
            ------------------------------------------------------------
            revno: 3076.1.63 [merge]
            committer: Bjorn Munch <bjorn.munch@oracle.com>
            branch nick: mtr-tr
            timestamp: Fri 2011-12-16 12:21:09 +0100
            message:
              merge trunk => trunk-mtr
            ------------------------------------------------------------
            revno: 3076.1.62 [merge]
            committer: Bjorn Munch <bjorn.munch@oracle.com>
            branch nick: mtr-tr
            timestamp: Tue 2011-11-22 13:15:34 +0100
            message:
              merge trunk => trunk-mtr
        ------------------------------------------------------------
        revno: 3402.1.304
        committer: Christopher Powers <chris.powers@oracle.com>
        branch nick: mysql-trunk
        timestamp: Thu 2012-01-05 12:57:16 -0600
        message:
          Bug#12790483 - OBJECTS_SUMMARY_GLOBAL_BY_TYPE AND RENAME TABLE
            
          Fixed build break.
        ------------------------------------------------------------
        revno: 3402.1.303 [merge]
        committer: Christopher Powers <chris.powers@oracle.com>
        branch nick: mysql-trunk-bug12790483
        timestamp: Thu 2012-01-05 11:57:53 -0600
        message:
          local merge
            ------------------------------------------------------------
            revno: 3402.49.2 [merge]
            committer: Tor Didriksen <tor.didriksen@oracle.com>
            branch nick: trunk-merge
            timestamp: Thu 2012-01-05 13:12:18 +0100
            message:
              merge opt-team => trunk
                ------------------------------------------------------------
                revno: 2876.249.464 [merge]
                committer: Tor Didriksen <tor.didriksen@oracle.com>
                branch nick: next-mr-opt-team
                timestamp: Thu 2012-01-05 11:17:03 +0100
                message:
                  Merge opt-backporting => opt-team
                    ------------------------------------------------------------
                    revno: 2876.475.17
                    committer: Jorgen Loland <jorgen.loland@oracle.com>
                    branch nick: mysql-next-mr-opt-backporting-13541761
                    timestamp: Wed 2012-01-04 14:53:33 +0100
                    message:
                      BUG#13540692: WRONG NULL HANDLING WITH RIGHT JOIN + 
                                    DISTINCT OR ORDER BY
                      BUG#13538387: WRONG RESULT ON SELECT DISTINCT + LEFT JOIN + 
                                    LIMIT + MIX OF MYISAM AND INNODB
                      BUG#13541761: WRONG RESULTS ON CORRELATED SUBQUERY + 
                                    AGGREGATE FUNCTION + MYISAM OR MEMORY
                      
                      The fix for bugs 13430588/13422961/11760517 did two things:
                      
                       1) removed setting of record[0] null-bits from
                          mark_as_null_row(). This caused bugs 13540692 and 
                          13538387. Fixed by setting Copy_field::null_row
                          to from_field->table->null_row regardless of whether
                          the field can be NULL since not nullable columns 
                          must have value NULL if the row is null-complemented.
                       2) made JOIN::clear() call mark_as_null_row() on const 
                          tables in addition to non-const tables. This caused 
                          13541761 because when const tables inside subqueries 
                          are temporarily marked as null, we have to save and 
                          later restore their null-row info as the fields are 
                          never reevaluated. Fixed by calling 
                          save_const_null_info() and restore_const_null_info().
                    ------------------------------------------------------------
                    revno: 2876.475.16
                    committer: Jorgen Loland <jorgen.loland@oracle.com>
                    branch nick: mysql-next-mr-opt-backporting-13350136
                    timestamp: Wed 2012-01-04 10:51:39 +0100
                    message:
                      BUG#13350136 - TEMPORARY MYISAM TABLES DO NOT PACK LONG 
                                     VARCHAR COLUMNS
                      
                      MyISAM has three record formats (fixed, packed and compressed) 
                      out of which fixed and packed are applicable for temporary 
                      tables. The difference is that with fixed length record format,
                      VARCHAR trailing bytes are written whereas for packed record 
                      format the trailing bytes are not written. The packed record 
                      therefore saves space at the cost of some additional memcopies.
                      
                      The packed record format is currently not in use by temporary
                      tables, although old commit messages suggests that this has not
                      always been the case, e.g:
                      
                         revision: sp1r-monty@mysql.com-20041206000037-04661
                         Date: 2004-12-06
                         "Internal temporary files can now use fixed length tables 
                          if the used VARCHAR columns are short"
                      
                      This CS enables packed record format for temporary tables.
                      
                      The CS also includes a fix for a MyISAM bug that is only a
                      problem when the packed format and a special unique constraint
                      (that checksums wide columns) is used. This unique constraint
                      only applies to internal temporary tables when uniqueness is
                      required on columns with a total size bigger than normal 
                      indexes allow (1000 bytes). The problem:
                      
                      A column's value in MyISAM can be read from or written to the 
                      row buffer using MI_COLUMNDEF::offset ("normal" column 
                      definition) or HA_KEYSEG::start (key definition). The former 
                      is calculated in mi_open() and is the sum of the length of all
                      preceding columns. The latter is calculated in mi_create(). 
                      The bug was that in mi_create(), HA_KEYSEG::start was set to 
                      the offset of the column for the on-disk format (reclength) 
                      whereas it should have been the offset for the in-memory format.
                      
                      Due to this bug, unique constraint values were written to one
                      offset (HA_KEYSEG::start in mi_check_unique()) and read from
                      another offset (MI_COLUMNDEF::offset in _mi_pack_record et al),
                      resulting in duplicate rows in the result set because equally
                      valued rows got seemingly different checksums.
                    ------------------------------------------------------------
                    revno: 2876.475.15
                    committer: Guilhem Bichot <guilhem.bichot@oracle.com>
                    branch nick: mysql-next-mr-opt-backporting
                    timestamp: Tue 2012-01-03 12:04:14 +0100
                    message:
                      Fix for
                      Bug#11766384 - 59487: WRONG RESULT WITH STRAIGHT_JOIN AND RIGHT JOIN
                      BUG#11752239 - 43368: STRAIGHT_JOIN DOESN'T WORK FOR NESTED JOINS 
                      BUG#11766858 - 60080: STRAIGHT_JOIN IS NOT ENFORCED WHEN RIGHT-HAND TABLE IS ITSELF A JOIN 
                      dependencies were not propagated when a nested join was flattened.
                    ------------------------------------------------------------
                    revno: 2876.475.14
                    committer: Jorgen Loland <jorgen.loland@oracle.com>
                    branch nick: mysql-next-mr-opt-backporting-13422961
                    timestamp: Tue 2011-12-20 13:04:31 +0100
                    message:
                      BUG#13430588: WRONG RESULT FROM IMPLICITLY GROUPED QUERY 
                                    WITH CONST TABLE AND NO MATCHING ROWS
                      BUG#13422961: WRONG RESULTS FROM SELECT WITH AGGREGATES
                                    AND IMPLICIT GROUPING + MYISAM OR MEM
                      BUG#11760517: 52935: MIN/MAX FAILS TO EVALUATE HAVING 
                                    CONDITION, RETURNS INCORRECT NULL RESULT
                      
                      When implicitly grouped queries do not have any rows matching
                      the join predicates, a row based on NULL values is returned
                      (if not filtered out by the HAVING clause). This means that
                      (a) non-aggregated fields should have the value NULL and (b)
                      aggregated fields should be calculated based on NULL.
                      
                      For (a), this is achieved by marking all tables as containing
                      only NULL values by calling mark_as_null_row(). For (b),
                      this is achieved by calling Item::no_rows_in_result().
                      
                      There were multiple bugs in this area:
                       1) In locations where mark_as_null_row() was called, const
                          tables were ignored. This has been fixed by storing the
                          info mark_as_null_row() modifies for const tables, call 
                          mark_as_null_row() for all tables including const tables,
                          send the result and finally restore const table info.
                          Note that save/restore is only required for subqueries 
                          since the value will not be reused otherwise. This was 
                          the case for end_send_group() and end_write_group()
                       2) Item::no_rows_in_result() was not called everywhere where
                          aggregate items needed to be calculated on NULL values. This
                          was the case for do_select().
                       3) mark_as_null_row() was not called everywhere non-aggregate
                          items needed to be set to NULL. This was the case for
                          do_select() and end_write_group().
                       4) the having clause was evaluated after (a) but before (b).
                          This was the case in return_zero_rows()
                      
                      Additional cleanup: 
                       * mark_as_null_row() no longer sets the NULL bits, only
                         table->null_row and table->status
                       * Field::is_null() now checks table->null_row before checking
                         the NULL bits.
                    ------------------------------------------------------------
                    revno: 2876.475.13
                    committer: Tor Didriksen <tor.didriksen@oracle.com>
                    branch nick: next-mr-opt-backporting
                    timestamp: Tue 2011-12-20 10:51:05 +0100
                    message:
                      WL#5825 Using C++ Standard Library with MySQL code
                      Post-push cleanup: the min/max macros are gone, so don't comment about them.
                      It is still a good idea to include "my_config.h" before anything else.
                    ------------------------------------------------------------
                    revno: 2876.475.12
                    committer: Tor Didriksen <tor.didriksen@oracle.com>
                    branch nick: next-mr-opt-backporting
                    timestamp: Fri 2011-12-16 15:39:02 +0100
                    message:
                      Bug#12577230 RERUN OF STORED FUNCTION CAUSES SEGFAULT IN MAKE_JOIN_SELECT
                      
                      Post-push cleanup: add accessors, and rename on_expr to join_cond()
                ------------------------------------------------------------
                revno: 2876.249.463 [merge]
                committer: Tor Didriksen <tor.didriksen@oracle.com>
                branch nick: next-mr-opt-team
                timestamp: Thu 2012-01-05 11:15:36 +0100
                message:
                  Empty merge opt-backporting => opt-team
                    ------------------------------------------------------------
                    revno: 2876.475.11 [merge]
                    committer: Tor Didriksen <tor.didriksen@oracle.com>
                    branch nick: next-mr-opt-backporting
                    timestamp: Fri 2011-12-16 12:22:10 +0100
                    message:
                      merge trunk => opt-backporting
                ------------------------------------------------------------
                revno: 2876.249.462 [merge]
                committer: Tor Didriksen <tor.didriksen@oracle.com>
                branch nick: next-mr-opt-team
                timestamp: Thu 2012-01-05 11:14:20 +0100
                message:
                  Empty merge opt-backporting => opt-team
                    ------------------------------------------------------------
                    revno: 2876.475.10 [merge]
                    committer: Tor Didriksen <tor.didriksen@oracle.com>
                    branch nick: next-mr-opt-backporting
                    timestamp: Fri 2011-12-16 12:20:30 +0100
                    message:
                      empty merge trunk => opt-backporting
                ------------------------------------------------------------
                revno: 2876.249.461 [merge]
                committer: Tor Didriksen <tor.didriksen@oracle.com>
                branch nick: next-mr-opt-team
                timestamp: Thu 2012-01-05 11:12:47 +0100
                message:
                  NULL merge opt-backporting => opt-team
                    ------------------------------------------------------------
                    revno: 2876.475.9 [merge]
                    committer: Tor Didriksen <tor.didriksen@oracle.com>
                    branch nick: next-mr-opt-backporting
                    timestamp: Fri 2011-12-16 12:18:10 +0100
                    message:
                      NULL merge trunk => opt-backporting
                ------------------------------------------------------------
                revno: 2876.249.460 [merge]
                committer: Tor Didriksen <tor.didriksen@oracle.com>
                branch nick: next-mr-opt-team
                timestamp: Thu 2012-01-05 11:07:30 +0100
                message:
                  Automerge opt-backporting => opt-team
                    ------------------------------------------------------------
                    revno: 2876.475.8
                    committer: Tor Didriksen <tor.didriksen@oracle.com>
                    branch nick: next-mr-opt-backporting
                    timestamp: Fri 2011-12-16 11:57:51 +0100
                    message:
                      new test results after merge
                ------------------------------------------------------------
                revno: 2876.249.459 [merge]
                committer: Tor Didriksen <tor.didriksen@oracle.com>
                branch nick: next-mr-opt-team
                timestamp: Thu 2012-01-05 11:05:16 +0100
                message:
                  Empty merge opt-backporting => opt-team
                    ------------------------------------------------------------
                    revno: 2876.475.7 [merge]
                    committer: Tor Didriksen <tor.didriksen@oracle.com>
                    branch nick: next-mr-opt-backporting
                    timestamp: Fri 2011-12-16 11:55:17 +0100
                    message:
                      merge trunk => opt-backporting
                ------------------------------------------------------------
                revno: 2876.249.458 [merge]
                committer: Tor Didriksen <tor.didriksen@oracle.com>
                branch nick: next-mr-opt-team
                timestamp: Thu 2012-01-05 11:04:03 +0100
                message:
                  Empty merge opt-backporting => opt-team
                    ------------------------------------------------------------
                    revno: 2876.475.6 [merge]
                    committer: Tor Didriksen <tor.didriksen@oracle.com>
                    branch nick: next-mr-opt-backporting
                    timestamp: Fri 2011-12-16 11:08:55 +0100
                    message:
                      merge trunk => opt-backporting
                ------------------------------------------------------------
                revno: 2876.249.457 [merge]
                committer: Tor Didriksen <tor.didriksen@oracle.com>
                branch nick: next-mr-opt-team
                timestamp: Thu 2012-01-05 11:01:58 +0100
                message:
                  Merge opt-backporting => opt-team, reverted, copied result files
                    ------------------------------------------------------------
                    revno: 2876.475.5
                    committer: Tor Didriksen <tor.didriksen@oracle.com>
                    branch nick: next-mr-opt-backporting
                    timestamp: Fri 2011-12-16 10:47:20 +0100
                    message:
                      Bug#13430436 PERFORMANCE DEGRADATION IN SYSBENCH ON INNODB DUE TO ICP
                      
                      New test results.
                ------------------------------------------------------------
                revno: 2876.249.456 [merge]
                committer: Tor Didriksen <tor.didriksen@oracle.com>
                branch nick: next-mr-opt-team
                timestamp: Thu 2012-01-05 10:51:34 +0100
                message:
                  Automerge opt-backporting => opt-team
                    ------------------------------------------------------------
                    revno: 2876.475.4 [merge]
                    committer: Tor Didriksen <tor.didriksen@oracle.com>
                    branch nick: next-mr-opt-backporting
                    timestamp: Fri 2011-12-16 10:42:18 +0100
                    message:
                      merge trunk => opt-backporting
                ------------------------------------------------------------
                revno: 2876.249.455 [merge]
                committer: Tor Didriksen <tor.didriksen@oracle.com>
                branch nick: next-mr-opt-team
                timestamp: Fri 2011-12-16 12:22:23 +0100
                message:
                  merge trunk => opt-team
                ------------------------------------------------------------
                revno: 2876.249.454 [merge]
                committer: Tor Didriksen <tor.didriksen@oracle.com>
                branch nick: next-mr-opt-team
                timestamp: Fri 2011-12-16 12:20:13 +0100
                message:
                  empty merge trunk => opt-team
                ------------------------------------------------------------
                revno: 2876.249.453 [merge]
                committer: Tor Didriksen <tor.didriksen@oracle.com>
                branch nick: next-mr-opt-team
                timestamp: Fri 2011-12-16 12:18:25 +0100
                message:
                  empty merge trunk => opt-team
                ------------------------------------------------------------
                revno: 2876.249.452 [merge]
                committer: Tor Didriksen <tor.didriksen@oracle.com>
                branch nick: next-mr-opt-team
                timestamp: Fri 2011-12-16 12:12:58 +0100
                message:
                  merge trunk => opt-team
                ------------------------------------------------------------
                revno: 2876.249.451 [merge]
                committer: Tor Didriksen <tor.didriksen@oracle.com>
                branch nick: next-mr-opt-team
                timestamp: Fri 2011-12-16 11:08:22 +0100
                message:
                  merge trunk => opt-team
                ------------------------------------------------------------
                revno: 2876.249.450 [merge]
                committer: Tor Didriksen <tor.didriksen@oracle.com>
                branch nick: next-mr-opt-team
                timestamp: Fri 2011-12-16 10:42:43 +0100
                message:
                  merge trunk => opt-team
            ------------------------------------------------------------
            revno: 3402.49.1
            committer: Anitha Gopi <anitha.gopi@oracle.com>
            branch nick: mysql-trunk
            timestamp: Thu 2012-01-05 10:46:25 +0530
            message:
              Bug#12682554 - FAILED ASSERT AT HANDLER0ALTER.CC IN MANY TESTS 
              Removed tests from experimental group
        ------------------------------------------------------------
        revno: 3402.1.302
        committer: Christopher Powers <chris.powers@oracle.com>
        branch nick: mysql-trunk-bug12790483
        timestamp: Wed 2012-01-04 12:29:43 -0600
        message:
          Bug#12790483 - OBJECTS_SUMMARY_GLOBAL_BY_TYPE AND RENAME TABLE
          
          Resolved causes of orphaned rows in OBJECTS_SUMMARY_GLOBAL_BY_TYPE:
            
          - Delete PFS table share of 'old' table during RENAME TABLE
          - Delete newly created PFS table share following a failed CREATE_TABLE
          - Added 'temporary' paramter to drop_table_share() API
          - Enhance detection of temporary table in ha_create_table()
          - Do not create PFS table shares or track events for temporary tables, internal or otherwise
        ------------------------------------------------------------
        revno: 3402.1.301
        committer: Jimmy Yang <jimmy.yang@oracle.com>
        branch nick: mysql-trunk
        timestamp: Wed 2012-01-04 22:34:41 +0800
        message:
          Backout kinoyasu's checkin for Bug#12400341. The connection setting
          in the test could exceed the max limit thus the test failure.
        ------------------------------------------------------------
        revno: 3402.1.300
        committer: Tor Didriksen <tor.didriksen@oracle.com>
        branch nick: trunk
        timestamp: Wed 2012-01-04 13:47:36 +0100
        message:
          WL#946 Post-push fix:
          In Field_year::store_time(), store the year of a MYSQL_TIMESTAMP_DATE
          rather than trying to add current time.
        ------------------------------------------------------------
        revno: 3402.1.299 [merge]
        committer: kinoyasu <kinoyasu@rynex6>
        branch nick: mysql-trunk
        timestamp: Wed 2012-01-04 17:49:13 +0900
        message:
          Bug#12400341 INNODB CAN LEAVE ORPHAN IBD FILES AROUND
          
          If we meet DB_TOO_MANY_CONCURRENT_TRXS during the execution tab_create_graph from row_create_table_for_mysql(), .ibd file for the table should be created already but was not deleted for the error handling.
          
          rb:875 approved by Jimmy Yang
            ------------------------------------------------------------
            revno: 2875.331.48 [merge]
            committer: kinoyasu <kinoyasu@rynex6>
            branch nick: mysql-5.5
            timestamp: Wed 2012-01-04 16:41:04 +0900
            message:
              Bug#12400341 INNODB CAN LEAVE ORPHAN IBD FILES AROUND
              
              If we meet DB_TOO_MANY_CONCURRENT_TRXS during the execution tab_create_graph from row_create_table_for_mysql(), .ibd file for the table should be created already but was not deleted for the error handling.
              
              rb:875 approved by Jimmy Yang
                ------------------------------------------------------------
                revno: 2661.823.11
                committer: kinoyasu <kinoyasu@rynex6>
                branch nick: mysql-5.1
                timestamp: Wed 2012-01-04 15:31:11 +0900
                message:
                  Bug#12400341 INNODB CAN LEAVE ORPHAN IBD FILES AROUND
                  
                  If we meet DB_TOO_MANY_CONCURRENT_TRXS during the execution tab_create_graph from row_create_table_for_mysql(), .ibd file for the table should be created already but was not deleted for the error handling.
                  
                  rb:875 approved by Jimmy Yang
        ------------------------------------------------------------
        revno: 3402.1.298
        committer: Manish Kumar<manish.4.kumar@oracle.com>
        branch nick: mysql-trunk-bug-13071203
        timestamp: Wed 2012-01-04 11:36:07 +0530
        message:
          BUG#13071203 - ERROR LOGGING FOR CHANGE MASTER USES QUOTES FOR OPTIONS THAT DON'T ACCEPT THEM
          
          Problem: The error logging shows all parameters as quoted but CHANGE MASTER command
                   syntax doesn't accept quotes for some of the command options.
                   This makes it difficult when cutting and pasting from the error log, making
                   it more error prone. Particularly a problem with CHANGE MASTER as an error in
                   entering the values can be disasterous.The reason of such logging is due to the formatting
                   used to print the master_info values.
                   
          Fix: the problem was fixed by removing the quotes from the numeric parameters of the master info
                in the file rpl_slave.cc, when a change master to command is used.
        ------------------------------------------------------------
        revno: 3402.1.297 [merge]
        committer: Tatjana Azundris Nuernberg <tatjana.nuernberg@oracle.com>
        branch nick: 56-11755281
        timestamp: Mon 2012-01-02 07:43:23 +0000
        message:
          auto-merge of Bug#12990746
            ------------------------------------------------------------
            revno: 3402.48.1
            committer: Tatjana Azundris Nuernberg <tatjana.nuernberg@oracle.com>
            branch nick: 56-12990746
            timestamp: Mon 2012-01-02 05:52:38 +0000
            message:
              BUG#12990746: COM_STATISTICS GIVES BOGUS QUERIES PER SECOND
              
              Patch for 11751727 changed certain status variables to
              longlong types so they would roll over much later.
              The format string used for COM_STATUS did not reflect this,
              resulting in incorrect queries-per-second status on
              mysqladmin ... status.
              
              This patch updates that format string.
        ------------------------------------------------------------
        revno: 3402.1.296 [merge]
        committer: Tatjana Azundris Nuernberg <tatjana.nuernberg@oracle.com>
        branch nick: 56-11755281
        timestamp: Mon 2012-01-02 07:18:39 +0000
        message:
          auto-merge
            ------------------------------------------------------------
            revno: 3402.47.1
            committer: Praveenkumar Hulakund <praveenkumar.hulakund@oracle.com>
            branch nick: trunk
            timestamp: Mon 2012-01-02 11:42:18 +0530
            message:
              Bug#11764724 : 57586: UNKNOWN TABLE WHEN TRYING TO DROP A TABLE AND NO AVAILABLE UNDO SLOTS LEFT
              
              Perf regression reported performance degradation because of fix added for this Bug.
              Reverting back the fix to check, whether perf degradation is because of this fix or not.
        ------------------------------------------------------------
        revno: 3402.1.295 [merge]
        committer: Tatjana Azundris Nuernberg <tatjana.nuernberg@oracle.com>
        branch nick: 56-11755281
        timestamp: Mon 2012-01-02 07:09:32 +0000
        message:
          manual merge for Bug#11755281
            ------------------------------------------------------------
            revno: 2875.331.47 [merge]
            committer: Tatjana Azundris Nuernberg <tatjana.nuernberg@oracle.com>
            branch nick: 55-11755281
            timestamp: Mon 2012-01-02 06:50:05 +0000
            message:
              manual up-merge of Bug#11755281
                ------------------------------------------------------------
                revno: 2661.823.10
                committer: Tatjana Azundris Nuernberg <tatjana.nuernberg@oracle.com>
                branch nick: 51-11755281
                timestamp: Mon 2012-01-02 06:25:48 +0000
                message:
                  BUG#11755281/47032: ERROR 2006 / ERROR 2013 INSTEAD OF PROPER ERROR MESSAGE
                  
                  If init_command was incorrect, we couldn't let users execute
                  queries, but we couldn't report the issue to the client either
                  as it does not expect error messages before even sending a
                  command. Thus, we simply disconnected them without throwing
                  a clear error.
                  
                  We now go through the proper sequence once (without executing
                  any user statements) so we can report back what the problem
                  is. Only then do we disconnect the user.
                  
                  As always, root remains unaffected by this as init_command is
                  (still) not executed for them.
        ------------------------------------------------------------
        revno: 3402.1.294 [merge]
        committer: Vasil Dimov <vasil.dimov@oracle.com>
        branch nick: mysql-trunk
        timestamp: Thu 2011-12-29 16:32:49 +0200
        message:
          Null merge mysql-5.5 -> mysql-trunk
          
          The merged revisions are already in mysql-trunk and were backported
          into mysql-5.5.
            ------------------------------------------------------------
            revno: 2875.331.46
            committer: Vasil Dimov <vasil.dimov@oracle.com>
            branch nick: mysql-5.5
            timestamp: Thu 2011-12-29 16:19:33 +0200
            message:
              Partial fix for Bug#11764622 57480: MEMORY LEAK WHEN HAVING 256+ TABLES
              
              Port vasil.dimov@oracle.com-20111205083046-jtgi1emlvtfnjatt from mysql-trunk
            ------------------------------------------------------------
            revno: 2875.331.45
            committer: Vasil Dimov <vasil.dimov@oracle.com>
            branch nick: mysql-5.5
            timestamp: Thu 2011-12-29 16:14:45 +0200
            message:
              Partial fix for Bug#11764622 57480: MEMORY LEAK WHEN HAVING 256+ TABLES
              
              Port vasil.dimov@oracle.com-20111205082900-lx9om1joscejr25e from mysql-trunk
            ------------------------------------------------------------
            revno: 2875.331.44
            committer: Vasil Dimov <vasil.dimov@oracle.com>
            branch nick: mysql-5.5
            timestamp: Thu 2011-12-29 16:12:55 +0200
            message:
              Partial fix for Bug#11764622 57480: MEMORY LEAK WHEN HAVING 256+ TABLES
              
              Port vasil.dimov@oracle.com-20111205082831-7v1qu50hvd9hjr3g from mysql-trunk
            ------------------------------------------------------------
            revno: 2875.331.43
            committer: Vasil Dimov <vasil.dimov@oracle.com>
            branch nick: mysql-5.5
            timestamp: Thu 2011-12-29 16:11:07 +0200
            message:
              Partial fix for Bug#11764622 57480: MEMORY LEAK WHEN HAVING 256+ TABLES
              
              Port vasil.dimov@oracle.com-20111205082756-wtlg8isyn4yohyny from mysql-trunk
            ------------------------------------------------------------
            revno: 2875.331.42
            committer: Vasil Dimov <vasil.dimov@oracle.com>
            branch nick: mysql-5.5
            timestamp: Thu 2011-12-29 16:05:08 +0200
            message:
              Partial fix for Bug#11764622 57480: MEMORY LEAK WHEN HAVING 256+ TABLES
              
              Port vasil.dimov@oracle.com-20111205082626-87j5f48dq1ouk86r from mysql-trunk
        ------------------------------------------------------------
        revno: 3402.1.293
        committer: Nirbhay Choubey <nirbhay.choubey@oracle.com>
        branch nick: B12589167-trunk
        timestamp: Thu 2011-12-29 17:01:18 +0530
        message:
          Bug#12589167 60901: 5.6.2 CLIENT TRUNCATES LINES AT
                       255 CHARS/MULTILINE QUERIES DONT WORK
                       ON WINDOWS
          
          The synopsis of the bug does not outline the real
          problem. The actual problem being the copy/paste,
          i.e. whenever a multi-lined string is copied leaving
          the trailing line-separator characters "CRLF" of the
          last line, the first character of the last line
          always gets altered to 'm', and that is the reason
          behind this bug.
          
          Fixed by changing the way lines are read from the
          console buffer (initially done as part of WL#5331).
          Now, the entire line will be read in a single go
          instead of character-by-character reading.
        ------------------------------------------------------------
        revno: 3402.1.292
        committer: Nirbhay Choubey <nirbhay.choubey@oracle.com>
        branch nick: B13460909-trunk
        timestamp: Wed 2011-12-28 19:13:30 +0530
        message:
          Bug#13460909 :STACK SMASHING DETECTED IN LIBMYSQLD
                        DEBUG BUILD
          
          An embedded-mysql application can crash in debug
          mode with 'stack smashing detected' error when it
          tries to connect without specifying the user name
          (NULL).
          
          The problem lies in the length of the buffer (array)
          allocated to store user name in mysql_real_connect
          function. This length did not take into consideration
          an extra byte that strmake requires in order to store
          either '\0' or 'Z' in debug mode (for padding empty
          bytes).
          
          Fixed by increasing the name buffer length by 1.
        ------------------------------------------------------------
        revno: 3402.1.291 [merge]
        committer: Marko M?kel? <marko.makela@oracle.com>
        branch nick: mysql-trunk
        timestamp: Wed 2011-12-28 12:40:55 +0200
        message:
          Merge mysql-5.5 to mysql-trunk.
            ------------------------------------------------------------
            revno: 2875.331.41 [merge]
            committer: Marko M?kel? <marko.makela@oracle.com>
            branch nick: mysql-5.5
            timestamp: Wed 2011-12-28 12:31:18 +0200
            message:
              Merge mysql-5.1 to mysql-5.5.
                ------------------------------------------------------------
                revno: 2661.823.9
                committer: Marko M?kel? <marko.makela@oracle.com>
                branch nick: mysql-5.1
                timestamp: Wed 2011-12-28 12:19:30 +0200
                message:
                  Bug#13418934 REMOVE HAVE_PURIFY DEPENDENCES FROM INNODB
                  
                  InnoDB: Remove HAVE_purify, UNIV_INIT_MEM_TO_ZERO, UNIV_SET_MEM_TO_ZERO.
                  
                  The compile-time setting HAVE_purify can mask potential bugs.
                  It is being set in PB2 Valgrind runs. We should simply get rid of it,
                  and replace it with UNIV_MEM_INVALID() to declare uninitialized memory
                  as such in Valgrind-instrumented binaries.
                  
                  os_mem_alloc_large(), ut_malloc_low(): Remove the parameter set_to_zero.
                  
                  ut_malloc(): Define as a macro that invokes ut_malloc_low().
                  
                  buf_pool_init(): Never initialize the buffer pool frames. All pages
                  must be initialized before flushing them to disk.
                  
                  mem_heap_alloc(): Never initialize the allocated memory block.
                  
                  os_mem_alloc_nocache(), ut_test_malloc(): Unused function, remove.
                  
                  rb:813 approved by Jimmy Yang
        ------------------------------------------------------------
        revno: 3402.1.290
        committer: Annamalai Gurusami <annamalai.gurusami@oracle.com>
        branch nick: mysql-trunk-bug13255225
        timestamp: Wed 2011-12-28 14:07:08 +0530
        message:
          Bug #13255225: THE VALUE OF INNODB_UNDO_LOGS IN MY.CNF IS IGNORED
          
          Introduced a new read only status variable srv_available_undo_logs.  
          During startup, this variable will be set to the total available 
          number of rollback segments.  Users can access this variable to find
          out the available number of rollback segments.  The innodb_undo_logs
          will contain the number of active rollback segments. 
          
          Review Board link:
          http://bur03.no.oracle.com/rb/r/862/
        ------------------------------------------------------------
        revno: 3402.1.289
        committer: Marko M?kel? <marko.makela@oracle.com>
        branch nick: mysql-trunk
        timestamp: Tue 2011-12-27 17:39:56 +0200
        message:
          Correct the comment of rw_lock_x_lock_low().
        ------------------------------------------------------------
        revno: 3402.1.288
        committer: Marko M?kel? <marko.makela@oracle.com>
        branch nick: mysql-trunk
        timestamp: Tue 2011-12-27 14:20:05 +0200
        message:
          Remove unused functions when analyzing Bug#13537504
          
          rw_lock_s_unlock_direct(), rw_lock_x_unlock_direct(): Remove.
        ------------------------------------------------------------
        revno: 3402.1.287
        committer: Vasil Dimov <vasil.dimov@oracle.com>
        branch nick: mysql-trunk
        timestamp: Tue 2011-12-27 13:12:58 +0200
        message:
          Remove innodb.innodb_bug56143 from default.experimental after
          
          Bug#11765460 DROP TABLE USES INEFFICIENT METHODS TO REMOVE FKS/INDEXES
          FROM INNODB SYS TABLES
          
          has been fixed.
        ------------------------------------------------------------
        revno: 3402.1.286 [merge]
        committer: Rohit Kalhans<rohit.kalhans@oracle.com>
        branch nick: mysql-trunk_MC
        timestamp: Mon 2011-12-26 22:51:34 +0530
        message:
          upmerge from mysql-5.5 to mysql-trunk
            ------------------------------------------------------------
            revno: 2875.331.40
            committer: Rohit Kalhans<rohit.kalhans@oracle.com>
            branch nick: mysql-5.5_MC
            timestamp: Mon 2011-12-26 22:40:56 +0530
            message:
              rpl.rpl_known_bugs_detection fails on PB2 daily mysql-5.5.
              
              The rpl.rpl_known_bugs_detection fails on pb2 as warnings were found in the
              mysqld log file. We fix this problem by suppressing the warning.
        ------------------------------------------------------------
        revno: 3402.1.285
        committer: Praveenkumar Hulakund <praveenkumar.hulakund@oracle.com>
        branch nick: mysql-trunk-test
        timestamp: Mon 2011-12-26 15:41:21 +0530
        message:
          BUG#11764724 - 57586: UNKNOWN TABLE WHEN TRYING TO DROP A TABLE AND NO AVAILABLE UNDO 
          SLOTS LEFT
          
          Description:
          If you attempt to drop an existing InnoDB table, but you do not have any 
          available undo slots open, then you will receive an "unknown table" error. 
          
          mysql> DROP TABLE test.innodb_table_monitor; 
          ERROR 1051 (42S02): Unknown table 'innodb_table_monitor' 
          
          How To Repeat: 
          <first> make sure max_connections > 1024 </first> 
          
          use test; 
          create table t (id int) engine=innodb; 
          create table innodb_table_monitor (id int) engine=innodb; 
          
          Run following script: 
          
          <? 
          $db_arr=array(); 
          for ($i = 1; $i <= 1024; $i++) { 
          $db=$db_arr[$i]=mysql_connect("localhost:3307","root","pass",1); 
                  mysql_select_db("test",$db); 
                  mysql_query("BEGIN",$db) or die(mysql_error()); 
                  mysql_query("INSERT INTO t VALUES ($i)",$db) or die(mysql_error()); 
          } 
          $db=$db_arr[$i]=mysql_connect("localhost:3307","root","pass",1); 
          mysql_select_db("test",$db); 
          mysql_query("DROP TABLE test.innodb_table_monitor",$db) or die(mysql_error()); 
          
          sleep(60); 
          ?> 
          
          
          After the above script, it will throw the following error: 
          
          Unknown table 'innodb_table_monitor' 
          
          Analysis:
          Here, max number of concurrent transactions/connections are started and then the
          next transaction to drop a table is initiated. Since, system has already max number
          of transactions running, next transaction to "drop table" was not started and innodb
          returned error "DB_TOO_MANY_CONCURRENT_TRXS". But this error was not handled properly 
          in sql layer because of which "drop table" operation was throwing wrong error message. 
          
          Fix:
          As a fix, I have added check in sql (in function "mysql_rm_table_part2") to handle error 
          code "HA_ERR_TOO_MANY_CONCURRENT_TRXS" and throw proper error message.
          
          Ouput of drop command after fix (with max number of concurrent transaction running)
          
          mysql> drop table test;
          ERROR 177 (HY000): Too many active concurrent transactions
          
          To reproduce this issue, max_connections should be set to value greater than 1024 and
          1024 connections/transactions need to be started. Since, this process consumes lot of
          time and resource, I havent added test case in mysql_test. But I will update but list
          with request of QA assistance to verify fix.
        ------------------------------------------------------------
        revno: 3402.1.284 [merge]
        committer: Nirbhay Choubey <nirbhay.choubey@oracle.com>
        branch nick: mysql-trunk
        timestamp: Sat 2011-12-24 15:13:56 +0530
        message:
          Merge of post-fix for bug#12809202 from mysql-5.5
            ------------------------------------------------------------
            revno: 2875.331.39
            committer: Nirbhay Choubey <nirbhay.choubey@oracle.com>
            branch nick: mysql-5.5
            timestamp: Sat 2011-12-24 15:08:59 +0530
            message:
              Bug#12809202 61854: MYSQLDUMP --SINGLE-TRANSACTION
                           --FLUSH-LOG BREAKS CONSISTENCY
              
              Post-fix for some failing tests.
        ------------------------------------------------------------
        revno: 3402.1.283 [merge]
        committer: Nirbhay Choubey <nirbhay.choubey@oracle.com>
        branch nick: mysql-trunk
        timestamp: Fri 2011-12-23 23:10:23 +0530
        message:
          Merge of patch for bug#12809202 from mysql-5.5.
            ------------------------------------------------------------
            revno: 2875.331.38
            committer: Nirbhay Choubey <nirbhay.choubey@oracle.com>
            branch nick: B12809202_5.5
            timestamp: Fri 2011-12-23 23:05:00 +0530
            message:
              Bug#12809202 61854: MYSQLDUMP --SINGLE-TRANSACTION
                           --FLUSH-LOG BREAKS CONSISTENCY
              
              The transaction started by mysqldump gets committed
              implicitly when flush-log is specified along with
              single-transaction option, and hence can break
              consistency.
              
              This is because, COM_REFRESH is executed in order
              to flush logs and starting from 5.5 this command
              performs an implicit commit.
              
              Fixed by making sure that COM_REFRESH is executed
              before the transaction has started and not after it.
              
              Note : This patch triggers following behavioral
                     changes in mysqldump :
              
              1) After this patch we no longer flush logs before
                 dumping each database if --single-transaction
                 option is given like it was done before (in the
                 absence of --lock-all-tables and --master-data
                 options).
              
              2) Also, after this patch, we start acquiring
                 FTWRL before flushing logs in cases when only
                 --single-transaction and --flush-logs are given.
                 It becomes safe to use mysqldump with these two
                 options and without --master-data parameter for
                 backups.
        ------------------------------------------------------------
        revno: 3402.1.282 [merge]
        committer: Ramil Kalimullin <ramil@mysql.com>
        branch nick: mysql-trunk
        timestamp: Fri 2011-12-23 19:00:18 +0400
        message:
          Auto-merge from mysql-5.5.
            ------------------------------------------------------------
            revno: 2875.331.37 [merge]
            committer: Ramil Kalimullin <ramil@mysql.com>
            branch nick: mysql-5.5
            timestamp: Fri 2011-12-23 18:56:29 +0400
            message:
              Auto-merge from mysql-5.1.
                ------------------------------------------------------------
                revno: 2661.823.8
                committer: Ramil Kalimullin <ramil@mysql.com>
                branch nick: mysql-5.1
                timestamp: Fri 2011-12-23 18:52:44 +0400
                message:
                  Fix for bug#11758931 - 51196: SLAVE SQL: GOT AN ERROR WRITING
                  COMMUNICATION PACKETS, ERROR_CODE: 1160
                  
                  Addendum: for some queries table->in_use might be NULL -
                  check it.
        ------------------------------------------------------------
        revno: 3402.1.281 [merge]
        committer: Ramil Kalimullin <ramil@mysql.com>
        branch nick: mysql-trunk
        timestamp: Fri 2011-12-23 17:29:02 +0400
        message:
          Auto-merge from mysql-5.5.
            ------------------------------------------------------------
            revno: 2875.331.36 [merge]
            committer: Ramil Kalimullin <ramil@mysql.com>
            branch nick: mysql-5.5
            timestamp: Fri 2011-12-23 17:26:17 +0400
            message:
              Auto-merge from mysq-5.1.
                ------------------------------------------------------------
                revno: 2661.823.7
                committer: Ramil Kalimullin <ramil@mysql.com>
                branch nick: mysql-5.1
                timestamp: Fri 2011-12-23 17:22:48 +0400
                message:
                  Fix for bug#11758931 - 51196: SLAVE SQL: GOT AN ERROR WRITING 
                  COMMUNICATION PACKETS, ERROR_CODE: 1160
                  
                  If idle FEDERATED table is evicted from the table cache when 
                  a connection to remote server is lost, query that initiated 
                  eviction may fail.
                  If this query is executed by slave SQL thread it may fail as well.
                  
                  An error of close was stored in diagnostics area, which was later
                  attributed to the statement that caused eviction.
                  
                  With this patch FEDERATED clears an error of close.
        ------------------------------------------------------------
        revno: 3402.1.280
        committer: Inaam Rana <inaam.rana@oracle.com>
        branch nick: dblwr
        timestamp: Fri 2011-12-23 08:17:36 -0500
        message:
          [part 1 of WL5655] refactoring dblwr code
          
          rb://861
          approved by: Jimmy
          
          * Refactor dblwr code in a separate module
          * Cleanup support of pre-4.1 ibuf record format
        ------------------------------------------------------------
        revno: 3402.1.279
        committer: Mayank Prasad <mayank.prasad@oracle.com>
        branch nick: 2emb_issue
        timestamp: Fri 2011-12-23 14:25:18 +0530
        message:
          bug#12561297:
                
          Details: 
           - fixed failing test case on pb2 for sparc platform.
          
          Issue:
           In function init_embedded_server(), fake_argv (*char[]), which has a string 
           constant as its first element, was being assigned to argvp (char***), which  
           was not proper as while dereferencing argvp[0][0] (in my_load_defaults()), 
           it was not able to access that memory location.
          
          Solution:
          - Removed unnecessary C-Style type casting which is potential cause to
            introduce similar issue.
          - First assigning 'array of char pointer' to '**char' (temp pointer) and then
            assigning its address to '***char' resolves the issue.
          - Tell the master server to not use innodb, otherwise mysqld_embedded
            (which starts innodb) will hang for a looong time waiting to lock innodb
            data segments. 
        ------------------------------------------------------------
        revno: 3402.1.278 [merge]
        committer: Sneha Modi<sneha.modi@oracle.com>
        branch nick: mysql-trunk
        timestamp: Thu 2011-12-22 23:13:39 +0530
        message:
          Bug#11754150: A test case for bug#6857 has been disabled in sp.test:
          
          Merging from mysql-5.5 -> mysql-trunk
            ------------------------------------------------------------
            revno: 2875.331.35
            committer: Sneha Modi<sneha.modi@oracle.com>
            branch nick: mysql-5.5
            timestamp: Thu 2011-12-22 23:11:48 +0530
            message:
              Bug#11754150: A test case for Bug#6857 has been disabled in sp.test:
              
              An extra space was inserted in the code by mistake which was producing a result content mismatch.
        ------------------------------------------------------------
        revno: 3402.1.277
        committer: Jorgen Loland <jorgen.loland@oracle.com>
        branch nick: mysql-trunk-12773464
        timestamp: Thu 2011-12-22 14:36:08 +0100
        message:
          Bug#12773464 - 61925: WRONG RESULT WITH AGGREGATE + 
                         NOT BETWEEN + KEY
          
          The problem: opt_sum_query() was invoked to replace MAX(a) with
          a constant in the query:
             SELECT MAX(a) FROM t1 WHERE a NOT BETWEEN 3 AND 9;
          
          However, opt_sum_query() mistook NOT BETWEEN for a BETWEEN
          and therefore found the highest values lower than or equal to 9
          and then tested the predicate on this value. The predicate 
          obviously evaluated to false and MAX(a) therefore evaluated to
          NULL.
          
          opt_sum_query() can only handle conjunctions ("AND" predicates)
          but "x NOT BETWEEN a AND b" is equivalent to "x < a OR x > b" 
          and is therefore not a conjunction. The fix is to return
          from the function without doing const replacement for 
          NOT BETWEENs.
        ------------------------------------------------------------
        revno: 3402.1.276 [merge]
        committer: Sneha Modi<sneha.modi@oracle.com>
        branch nick: mysql-trunk
        timestamp: Thu 2011-12-22 16:42:32 +0530
        message:
          Bug#11754150:  A TEST CASE FOR BUG#6857 IS DISABLED IN SP.TEST
          
          merging from mysql-5.5 -> mysql-trunk
            ------------------------------------------------------------
            revno: 2875.331.34
            committer: Sneha Modi<sneha.modi@oracle.com>
            branch nick: mysql-5.5
            timestamp: Thu 2011-12-22 16:39:08 +0530
            message:
              Bug#11754150:  A TEST CASE FOR BUG#6857 IS DISABLED IN SP.TEST
              
              unix_timestamp() is implemented in this part of the code in place of current_time().
              Also, since the pb2 machines may be extremely fast, instead of looping through the code,
              we use sleep(1.1) so that the variables t0 and t1 have different values.
        ------------------------------------------------------------
        revno: 3402.1.275
        committer: Dmitry Shulga <Dmitry.Shulga@oracle.com>
        branch nick: mysql-trunk-bug13070308
        timestamp: Thu 2011-12-22 16:38:23 +0600
        message:
          Follow-up for patch for bug#13070308.
          
          Fixed changes in the result file for xa.test.
        ------------------------------------------------------------
        revno: 3402.1.274
        committer: Dmitry Shulga <Dmitry.Shulga@oracle.com>
        branch nick: mysql-trunk-bug13070308
        timestamp: Thu 2011-12-22 15:27:58 +0600
        message:
          Prerequisite patch for bug#13070308 - (VALGRIND FAILURE IN XA TEST).
          
          This patch sets explicitly the type of engine for tables used in
          the test as InnoDb since there is a suspicion that the test failed since
          table's storage engine has type MyISAM. For MyISAM tables we observe
          exactly the same test failure as described in the bug report.
        ------------------------------------------------------------
        revno: 3402.1.273 [merge]
        committer: Inaam Rana <inaam.rana@oracle.com>
        branch nick: mysql-trunk
        timestamp: Wed 2011-12-21 21:47:18 -0500
        message:
          merge from 5.5
            ------------------------------------------------------------
            revno: 2875.331.33 [merge]
            committer: Inaam Rana <inaam.rana@oracle.com>
            branch nick: mysql-5.5
            timestamp: Wed 2011-12-21 21:40:35 -0500
            message:
              merge from mysql-5.1
                ------------------------------------------------------------
                revno: 2661.823.6
                committer: Inaam Rana <inaam.rana@oracle.com>
                branch nick: mysql-5.1
                timestamp: Wed 2011-12-21 21:36:52 -0500
                message:
                  Add ChangeLog message.
                ------------------------------------------------------------
                revno: 2661.823.5
                committer: Inaam Rana <inaam.rana@oracle.com>
                branch nick: mysql-5.1
                timestamp: Wed 2011-12-21 21:33:13 -0500
                message:
                  Bug#11866367	FPE WHEN SETTING INNODB_SPIN_WAIT_DELAY
                  
                  rb://865
                  approved by: Jimmy
                  
                  Integer overflow causes division by zero.
        ------------------------------------------------------------
        revno: 3402.1.272 [merge]
        committer: Alexander Nozdrin <alexander.nozdrin@oracle.com>
        branch nick: mysql-trunk
        timestamp: Wed 2011-12-21 23:46:44 +0400
        message:
          Auto-merge from mysql-5.5.
            ------------------------------------------------------------
            revno: 2875.331.32
            committer: Alexander Nozdrin <alexander.nozdrin@oracle.com>
            branch nick: mysql-5.5
            timestamp: Wed 2011-12-21 19:26:11 +0400
            message:
              A patch for Bug#13023858 - MYSQL_UPGRADE PRINTS
              THE ORACLE_WELCOME_COPYRIGHT_NOTICE TWICE.
              
              Fix of a merge error.
        ------------------------------------------------------------
        revno: 3402.1.271
        committer: Inaam Rana <inaam.rana@oracle.com>
        branch nick: mysql-trunk
        timestamp: Wed 2011-12-21 14:35:09 -0500
        message:
          Cleanup: Remove UNIV_DO_FLUSH code which is never defined.
          
          rb://864
          approved by: Marko
        ------------------------------------------------------------
        revno: 3402.1.270
        committer: Sneha Modi<sneha.modi@oracle.com>
        branch nick: mysql-trunk
        timestamp: Wed 2011-12-21 23:32:23 +0530
        message:
          Bug#11754150:A TEST CASE FOR BUG#6857 IS DISABLED IN SP.TEST
          
          This part was enabled and it started failing.So,it's being disabled and investigated further.
        ------------------------------------------------------------
        revno: 3402.1.269
        committer: Sneha Modi<sneha.modi@oracle.com>
        branch nick: mysql-trunk
        timestamp: Wed 2011-12-21 19:11:51 +0530
        message:
          Bug#11754150: A TEST CASE FOR BUG#6857 IS DISABLED IN SP.TEST
          
          This part of the code is being enabled on mysql-trunk 
          as the time format has been changed on the trunk.
        ------------------------------------------------------------
        revno: 3402.1.268 [merge]
        committer: Sneha Modi<sneha.modi@oracle.com>
        branch nick: mysql-trunk
        timestamp: Wed 2011-12-21 19:01:24 +0530
        message:
          Bug#11754150: A TEST CASE FOR BUG#6857 IS DISABLED IN SP.TEST
          
          Merging from mysql-5.5 -> mysql-trunk
            ------------------------------------------------------------
            revno: 2875.331.31
            committer: Sneha Modi<sneha.modi@oracle.com>
            branch nick: mysql-5.5
            timestamp: Wed 2011-12-21 19:00:07 +0530
            message:
              Bug#11754150: A TEST CASE FOR BUG#6857 IS DISABLED IN SP.TEST
              
              Unix_timestamp for time comparison has some problems...Re-using current_time for 
              time comparison.
        ------------------------------------------------------------
        revno: 3402.1.267
        committer: Vasil Dimov <vasil.dimov@oracle.com>
        branch nick: mysql-trunk
        timestamp: Wed 2011-12-21 15:01:49 +0200
        message:
          Fix some debug printouts in row0sel.cc
        ------------------------------------------------------------
        revno: 3402.1.266
        committer: Andrei Elkin <andrei.elkin@oracle.com>
        branch nick: trunk-bug12964649-mts_mem_not_freed
        timestamp: Wed 2011-12-21 12:29:44 +0200
        message:
          BUG#12964649
          fixing post-push valgrind issue: in case MTS worker cant start its private queue dynarray left undestroyed.
        ------------------------------------------------------------
        revno: 3402.1.265 [merge]
        committer: Sneha Modi<sneha.modi@oracle.com>
        branch nick: mysql-trunk
        timestamp: Wed 2011-12-21 15:16:27 +0530
        message:
          Bug#11754150:  A TEST CASE FOR BUG#6857 IS DISABLED IN SP.TEST
          
          merging from mysql-5.5 -> mysql-trunk
            ------------------------------------------------------------
            revno: 2875.331.30
            committer: Sneha Modi<sneha.modi@oracle.com>
            branch nick: mysql-5.5
            timestamp: Wed 2011-12-21 15:14:55 +0530
            message:
              Bug#11754150: A TEST CASE FOR BUG#6857 IS DISABLED IN SP.TEST
              
              The time comparison using current_time() stored in an int variable was giving wrong results as 
              the current_time() format as an int implementation has been changed in mysql-trunk but not in mysql-5.5.
              
              The time is stored in the format hh:mm:ss as 'time' datatype.But as an int, it is stored as hhmmss,
              but only on the trunk. On mysql-5.5,as an int, it is stored as hh.
              Hence, the current_time() function has been changed to unix_timestamp() function.
        ------------------------------------------------------------
        revno: 3402.1.264
        committer: Inaam Rana <inaam.rana@oracle.com>
        branch nick: dblwr
        timestamp: Tue 2011-12-20 22:24:58 -0500
        message:
          WL5655: Part 0: dblw batch completion processing in IO thread
          
          rb://848
          approved by: Jimmy
          
          * Current implementation is constrained in a way that it forces the
          calling thread to wait for a batch to complete and then flush all files
          before declaring dblw reusable. This patch off load this to the IO
          helper thread. The calling thread now returns after submitting the
          batch IO requests.
          
          * Also in current design we wait of all IO requests to complete before
          starting the flushing. This won't work when we'll have multiple batches
          running at the same time. This patch introduces a counter in dblw buffer
          to track how many of the IO requests for a given batch has been serviced.
        ------------------------------------------------------------
        revno: 3402.1.263
        committer: Sven Sandberg <sven.sandberg@oracle.com>
        branch nick: trunk
        timestamp: Tue 2011-12-20 17:06:32 +0100
        message:
          Cleaned up test case mysqlbinlog2:
           - replace copy-and-paste by normal programming constructs
           - don't generate more events than necessary
           - use understandable variable names
           - test --stop-datetime in second binlog
           - renamed file to the more descriptive "mysqlbinlog_start_stop"
        ------------------------------------------------------------
        revno: 3402.1.262 [merge]
        committer: Joerg Bruehe <joerg.bruehe@oracle.com>
        branch nick: mysql-trunk
        timestamp: Tue 2011-12-20 10:45:15 +0100
        message:
          Mergethe build tree of 5.6. back into main "trunk".
          
          Both main and the build clone had received major changes in parallel,
          this resulted in
              Text conflict in mysql-test/r/type_temporal_fractional.result
              Text conflict in mysql-test/t/type_temporal_fractional.test
              Text conflict in storage/innobase/handler/ha_innodb.cc
              Text conflict in storage/innobase/handler/ha_innodb.h
              Text conflict in storage/innobase/handler/handler0alter.cc
            ------------------------------------------------------------
            revno: 3402.46.6
            tags: mysql-5.6.4
            committer: Ramil Kalimullin <ramil@mysql.com>
            branch nick: mysql-5.6.4-m7-release
            timestamp: Tue 2011-12-13 22:18:20 +0400
            message:
              Fis for BUG#13436875 - ASSERTION '!ARGS[0]->IS_TEMPORAL() || !ARGS[1]->IS_TEMPORAL()'
              
              numeric_context_result_type() Item/Field method has been changed to return 
              only numeric result types:
              1. temporal Items/Fields return DECIMAL_RESULT/INT_RESULT depending on 
                 their decimal precision,
              2. STRING_RESULT Items/Fields return REAL_RESULT,
              3. other Items/Fields return its result_type.
