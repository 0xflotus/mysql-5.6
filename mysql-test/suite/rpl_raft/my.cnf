!include include/default_mysqld.cnf
!include include/default_client.cnf

[mysqld.1]
# Run the <testname>-master.sh script before starting this process
#!run-master-sh
log-bin=binary-logs-13000
relay-log=mysqld-relay-bin-13000
plugin-load=rpl_raft=mysql_raft_repl.so
gtid_mode=ON
enforce_gtid_consistency=ON
log_slave_updates=1
binlog_checksum=CRC32
read_only=1

[mysqld.2]
# Run the <testname>-slave.sh script before starting this process
#!run-slave-sh
# Append <testname>-slave.opt file to the list of argument used when
# starting the mysqld
#!use-slave-opt
log-bin=binary-logs-13001
relay-log=mysqld-relay-bin-13001
plugin-load=rpl_raft=mysql_raft_repl.so
gtid_mode=ON
enforce_gtid_consistency=ON
log_slave_updates=1
binlog_checksum=CRC32
read_only=1
master_retry_count=10
# Values reported by slave when it connect to master
# and shows up in SHOW SLAVE STATUS;
report-host=127.0.0.1
report-port=@mysqld.2.port
report-user=root

[mysqld.3]
# Run the <testname>-slave.sh script before starting this process
#!run-slave-sh
# Append <testname>-slave.opt file to the list of argument used when
# starting the mysqld
#!use-slave-opt
log-bin=binary-logs-13002
relay-log=mysqld-relay-bin-13002
plugin-load=rpl_raft=mysql_raft_repl.so
gtid_mode=ON
enforce_gtid_consistency=ON
log_slave_updates=1
binlog_checksum=CRC32
read_only=1
master_retry_count=10
# Values reported by slave when it connect to master
# and shows up in SHOW SLAVE STATUS;
report-host=127.0.0.1
report-port=@mysqld.3.port
report-user=root

[ENV]
MASTER_MYPORT=@mysqld.1.port
MASTER_MYSOCK=@mysqld.1.socket

SLAVE_MYPORT=@mysqld.2.port
SLAVE_MYSOCK=@mysqld.2.socket

SERVER_MYPORT_3=@mysqld.3.port
SERVER_MYSOCK_3=@mysqld.3.socket
