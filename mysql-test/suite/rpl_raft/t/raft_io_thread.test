--source include/master-slave.inc

--connection slave
SET @@global.enable_raft_plugin=0;
START SLAVE IO_THREAD;

--error ER_SLAVE_IO_RAFT_CONFLICT
SET @@global.enable_raft_plugin=1;

STOP SLAVE IO_THREAD;
SET @@global.enable_raft_plugin=1;

SET @@global.enable_raft_plugin=0;
START SLAVE IO_THREAD;

SET @@global.binlog_error_action="ABORT_SERVER";
STOP SLAVE IO_THREAD;

--error ER_RAFT_BINLOG_ERROR_ACTION
SET @@global.enable_raft_plugin=1;

SET @@global.binlog_error_action="ROLLBACK_TRX";
SET @@global.enable_raft_plugin=1;


SET @@global.enable_raft_plugin=0;
START SLAVE IO_THREAD;

--connection master
--source include/rpl_end.inc
